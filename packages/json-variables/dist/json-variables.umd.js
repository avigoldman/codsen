/**
 * json-variables
 * Resolves custom-marked, cross-referenced paths in parsed JSON
 * Version: 10.0.7
 * Author: Roy Revelt, Codsen Ltd
 * License: MIT
 * Homepage: https://codsen.com/os/json-variables/
 */

!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).jsonVariables={})}(this,(function(e){"use strict";function r(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function t(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function n(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))}))}return e}function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function a(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(e){var r={exports:{}};return e(r,r.exports),r.exports}var u=s((function(e,r){var t="__lodash_hash_undefined__",n=9007199254740991,i="[object Arguments]",a="[object Boolean]",s="[object Date]",u="[object Function]",l="[object GeneratorFunction]",f="[object Map]",h="[object Number]",c="[object Object]",p="[object Promise]",g="[object RegExp]",d="[object Set]",y="[object String]",m="[object Symbol]",v="[object WeakMap]",w="[object ArrayBuffer]",b="[object DataView]",_="[object Float32Array]",T="[object Float64Array]",O="[object Int8Array]",A="[object Int16Array]",W="[object Int32Array]",I="[object Uint8Array]",j="[object Uint8ClampedArray]",E="[object Uint16Array]",S="[object Uint32Array]",N=/\w*$/,D=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,H={};H[i]=H["[object Array]"]=H[w]=H[b]=H[a]=H[s]=H[_]=H[T]=H[O]=H[A]=H[W]=H[f]=H[h]=H[c]=H[g]=H[d]=H[y]=H[m]=H[I]=H[j]=H[E]=H[S]=!0,H["[object Error]"]=H[u]=H[v]=!1;var M="object"==typeof self&&self&&self.Object===Object&&self,x="object"==typeof o&&o&&o.Object===Object&&o||M||Function("return this")(),C=r&&!r.nodeType&&r,B=C&&e&&!e.nodeType&&e,k=B&&B.exports===C;function P(e,r){return e.set(r[0],r[1]),e}function F(e,r){return e.add(r),e}function J(e,r,t,n){var i=-1,a=e?e.length:0;for(n&&a&&(t=e[++i]);++i<a;)t=r(t,e[i],i,e);return t}function V(e){var r=!1;if(null!=e&&"function"!=typeof e.toString)try{r=!!(e+"")}catch(e){}return r}function q(e){var r=-1,t=Array(e.size);return e.forEach((function(e,n){t[++r]=[n,e]})),t}function L(e,r){return function(t){return e(r(t))}}function $(e){var r=-1,t=Array(e.size);return e.forEach((function(e){t[++r]=e})),t}var U,z=Array.prototype,G=Function.prototype,K=Object.prototype,Q=x["__core-js_shared__"],X=(U=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+U:"",Y=G.toString,Z=K.hasOwnProperty,ee=K.toString,re=RegExp("^"+Y.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=k?x.Buffer:void 0,ne=x.Symbol,ie=x.Uint8Array,ae=L(Object.getPrototypeOf,Object),oe=Object.create,se=K.propertyIsEnumerable,ue=z.splice,le=Object.getOwnPropertySymbols,fe=te?te.isBuffer:void 0,he=L(Object.keys,Object),ce=Be(x,"DataView"),pe=Be(x,"Map"),ge=Be(x,"Promise"),de=Be(x,"Set"),ye=Be(x,"WeakMap"),me=Be(Object,"create"),ve=Ve(ce),we=Ve(pe),be=Ve(ge),_e=Ve(de),Te=Ve(ye),Oe=ne?ne.prototype:void 0,Ae=Oe?Oe.valueOf:void 0;function We(e){var r=-1,t=e?e.length:0;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function Ie(e){var r=-1,t=e?e.length:0;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function je(e){var r=-1,t=e?e.length:0;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function Ee(e){this.__data__=new Ie(e)}function Se(e,r){var t=Le(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&$e(e)}(e)&&Z.call(e,"callee")&&(!se.call(e,"callee")||ee.call(e)==i)}(e)?function(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}(e.length,String):[],n=t.length,a=!!n;for(var o in e)!r&&!Z.call(e,o)||a&&("length"==o||Fe(o,n))||t.push(o);return t}function Ne(e,r,t){var n=e[r];Z.call(e,r)&&qe(n,t)&&(void 0!==t||r in e)||(e[r]=t)}function De(e,r){for(var t=e.length;t--;)if(qe(e[t][0],r))return t;return-1}function Re(e,r,t,n,o,p,v){var D;if(n&&(D=p?n(e,o,p,v):n(e)),void 0!==D)return D;if(!Ge(e))return e;var R=Le(e);if(R){if(D=function(e){var r=e.length,t=e.constructor(r);r&&"string"==typeof e[0]&&Z.call(e,"index")&&(t.index=e.index,t.input=e.input);return t}(e),!r)return function(e,r){var t=-1,n=e.length;r||(r=Array(n));for(;++t<n;)r[t]=e[t];return r}(e,D)}else{var M=Pe(e),x=M==u||M==l;if(Ue(e))return function(e,r){if(r)return e.slice();var t=new e.constructor(e.length);return e.copy(t),t}(e,r);if(M==c||M==i||x&&!p){if(V(e))return p?e:{};if(D=function(e){return"function"!=typeof e.constructor||Je(e)?{}:(r=ae(e),Ge(r)?oe(r):{});var r}(x?{}:e),!r)return function(e,r){return xe(e,ke(e),r)}(e,function(e,r){return e&&xe(r,Ke(r),e)}(D,e))}else{if(!H[M])return p?e:{};D=function(e,r,t,n){var i=e.constructor;switch(r){case w:return Me(e);case a:case s:return new i(+e);case b:return function(e,r){var t=r?Me(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,n);case _:case T:case O:case A:case W:case I:case j:case E:case S:return function(e,r){var t=r?Me(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}(e,n);case f:return function(e,r,t){return J(r?t(q(e),!0):q(e),P,new e.constructor)}(e,n,t);case h:case y:return new i(e);case g:return function(e){var r=new e.constructor(e.source,N.exec(e));return r.lastIndex=e.lastIndex,r}(e);case d:return function(e,r,t){return J(r?t($(e),!0):$(e),F,new e.constructor)}(e,n,t);case m:return o=e,Ae?Object(Ae.call(o)):{}}var o}(e,M,Re,r)}}v||(v=new Ee);var C=v.get(e);if(C)return C;if(v.set(e,D),!R)var B=t?function(e){return function(e,r,t){var n=r(e);return Le(e)?n:function(e,r){for(var t=-1,n=r.length,i=e.length;++t<n;)e[i+t]=r[t];return e}(n,t(e))}(e,Ke,ke)}(e):Ke(e);return function(e,r){for(var t=-1,n=e?e.length:0;++t<n&&!1!==r(e[t],t,e););}(B||e,(function(i,a){B&&(i=e[a=i]),Ne(D,a,Re(i,r,t,n,a,e,v))})),D}function He(e){return!(!Ge(e)||(r=e,X&&X in r))&&(ze(e)||V(e)?re:D).test(Ve(e));var r}function Me(e){var r=new e.constructor(e.byteLength);return new ie(r).set(new ie(e)),r}function xe(e,r,t,n){t||(t={});for(var i=-1,a=r.length;++i<a;){var o=r[i],s=n?n(t[o],e[o],o,t,e):void 0;Ne(t,o,void 0===s?e[o]:s)}return t}function Ce(e,r){var t,n,i=e.__data__;return("string"==(n=typeof(t=r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?i["string"==typeof r?"string":"hash"]:i.map}function Be(e,r){var t=function(e,r){return null==e?void 0:e[r]}(e,r);return He(t)?t:void 0}We.prototype.clear=function(){this.__data__=me?me(null):{}},We.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},We.prototype.get=function(e){var r=this.__data__;if(me){var n=r[e];return n===t?void 0:n}return Z.call(r,e)?r[e]:void 0},We.prototype.has=function(e){var r=this.__data__;return me?void 0!==r[e]:Z.call(r,e)},We.prototype.set=function(e,r){return this.__data__[e]=me&&void 0===r?t:r,this},Ie.prototype.clear=function(){this.__data__=[]},Ie.prototype.delete=function(e){var r=this.__data__,t=De(r,e);return!(t<0)&&(t==r.length-1?r.pop():ue.call(r,t,1),!0)},Ie.prototype.get=function(e){var r=this.__data__,t=De(r,e);return t<0?void 0:r[t][1]},Ie.prototype.has=function(e){return De(this.__data__,e)>-1},Ie.prototype.set=function(e,r){var t=this.__data__,n=De(t,e);return n<0?t.push([e,r]):t[n][1]=r,this},je.prototype.clear=function(){this.__data__={hash:new We,map:new(pe||Ie),string:new We}},je.prototype.delete=function(e){return Ce(this,e).delete(e)},je.prototype.get=function(e){return Ce(this,e).get(e)},je.prototype.has=function(e){return Ce(this,e).has(e)},je.prototype.set=function(e,r){return Ce(this,e).set(e,r),this},Ee.prototype.clear=function(){this.__data__=new Ie},Ee.prototype.delete=function(e){return this.__data__.delete(e)},Ee.prototype.get=function(e){return this.__data__.get(e)},Ee.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.set=function(e,r){var t=this.__data__;if(t instanceof Ie){var n=t.__data__;if(!pe||n.length<199)return n.push([e,r]),this;t=this.__data__=new je(n)}return t.set(e,r),this};var ke=le?L(le,Object):function(){return[]},Pe=function(e){return ee.call(e)};function Fe(e,r){return!!(r=null==r?n:r)&&("number"==typeof e||R.test(e))&&e>-1&&e%1==0&&e<r}function Je(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||K)}function Ve(e){if(null!=e){try{return Y.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function qe(e,r){return e===r||e!=e&&r!=r}(ce&&Pe(new ce(new ArrayBuffer(1)))!=b||pe&&Pe(new pe)!=f||ge&&Pe(ge.resolve())!=p||de&&Pe(new de)!=d||ye&&Pe(new ye)!=v)&&(Pe=function(e){var r=ee.call(e),t=r==c?e.constructor:void 0,n=t?Ve(t):void 0;if(n)switch(n){case ve:return b;case we:return f;case be:return p;case _e:return d;case Te:return v}return r});var Le=Array.isArray;function $e(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!ze(e)}var Ue=fe||function(){return!1};function ze(e){var r=Ge(e)?ee.call(e):"";return r==u||r==l}function Ge(e){var r=typeof e;return!!e&&("object"==r||"function"==r)}function Ke(e){return $e(e)?Se(e):function(e){if(!Je(e))return he(e);var r=[];for(var t in Object(e))Z.call(e,t)&&"constructor"!=t&&r.push(t);return r}(e)}e.exports=function(e){return Re(e,!0,!0)}}));var l,f,h=Object.prototype,c=Function.prototype.toString,p=h.hasOwnProperty,g=c.call(Object),d=h.toString,y=(l=Object.getPrototypeOf,f=Object,function(e){return l(f(e))});var m=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=d.call(e)||function(e){var r=!1;if(null!=e&&"function"!=typeof e.toString)try{r=!!(e+"")}catch(e){}return r}(e))return!1;var r=y(e);if(null===r)return!0;var t=p.call(r,"constructor")&&r.constructor;return"function"==typeof t&&t instanceof t&&c.call(t)==g};function v(e){if(e.includes(".")){var r=e.lastIndexOf(".");if(!e.slice(0,r).includes("."))return e.slice(0,r);for(var t=r-1;t--;)if("."===e[t])return e.slice(t+1,r)}return null}function w(e,r){return function e(r,t,i,a){var o,s=u(r),l=n({depth:-1,path:""},i);if(l.depth+=1,Array.isArray(s))for(var f=0,h=s.length;f<h&&!a.now;f++){var c=l.path?l.path+"."+f:""+f;void 0!==s[f]?(l.parent=u(s),l.parentType="array",l.parentKey=v(c),o=e(t(s[f],void 0,n(n({},l),{},{path:c}),a),t,n(n({},l),{},{path:c}),a),Number.isNaN(o)&&f<s.length?(s.splice(f,1),f-=1):s[f]=o):s.splice(f,1)}else if(m(s))for(var p in s){if(a.now&&null!=p)break;var g=l.path?l.path+"."+p:p;0===l.depth&&null!=p&&(l.topmostKey=p),l.parent=u(s),l.parentType="object",l.parentKey=v(g),o=e(t(p,s[p],n(n({},l),{},{path:g}),a),t,n(n({},l),{},{path:g}),a),Number.isNaN(o)?delete s[p]:s[p]=o}return s}(e,r,{},{now:!1})}var b=new Map;function _(e,r){if(!Array.isArray(e))switch(typeof e){case"string":e=[e];break;case"undefined":e=[];break;default:throw new TypeError("Expected '"+r+"' to be a string or an array, but got a type of '"+typeof e+"'")}return e.filter((function(e){if("string"!=typeof e){if(void 0===e)return!1;throw new TypeError("Expected '"+r+"' to be an array of strings, but found a type of '"+typeof e+"' in the array")}return!0}))}function T(e,r){r=n({caseSensitive:!1},r);var t=e+JSON.stringify(r);if(b.has(t))return b.get(t);var i="!"===e[0];i&&(e=e.slice(1)),e=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e).replace(/\\\*/g,"[\\s\\S]*");var a=new RegExp("^"+e+"$",r.caseSensitive?"":"i");return a.negated=i,b.set(t,a),a}var O=function(e,r,t){if(e=_(e,"inputs"),0===(r=_(r,"patterns")).length)return[];var n="!"===r[0][0];r=r.map((function(e){return T(e,t)}));for(var i,o=[],s=a(e);!(i=s()).done;){for(var u,l=i.value,f=n,h=a(r);!(u=h()).done;){var c=u.value;c.test(l)&&(f=!c.negated)}f&&o.push(l)}return o};O.isMatch=function(e,r,t){return e=_(e,"inputs"),0!==(r=_(r,"patterns")).length&&e.some((function(e){return r.every((function(r){var n=T(r,t),i=n.test(e);return n.negated?!i:i}))}))};var A=s((function(e){e.exports=function(){var e=Object.prototype.toString;function r(e,r){return null!=e&&Object.prototype.hasOwnProperty.call(e,r)}function t(e){if(!e)return!0;if(a(e)&&0===e.length)return!0;if("string"!=typeof e){for(var t in e)if(r(e,t))return!1;return!0}return!1}function n(r){return e.call(r)}function i(e){return"object"==typeof e&&"[object Object]"===n(e)}var a=Array.isArray||function(r){return"[object Array]"===e.call(r)};function o(e){return"boolean"==typeof e||"[object Boolean]"===n(e)}function s(e){var r=parseInt(e);return r.toString()===e?r:e}function u(e){var n,u=function e(r){return Object.keys(e).reduce((function(t,n){return"create"===n||"function"==typeof e[n]&&(t[n]=e[n].bind(e,r)),t}),{})};function l(e,r){if(n(e,r))return e[r]}function f(r,t,n,i){if("number"==typeof t&&(t=[t]),!t||0===t.length)return r;if("string"==typeof t)return f(r,t.split(".").map(s),n,i);var a=t[0],o=l(r,a);if(e.includeInheritedProps&&("__proto__"===a||"constructor"===a&&"function"==typeof o))throw new Error("For security reasons, object's magic properties cannot be set");return 1===t.length?(void 0!==o&&i||(r[a]=n),o):(void 0===o&&(r[a]="number"==typeof t[1]?[]:{}),f(r[a],t.slice(1),n,i))}return n=(e=e||{}).includeInheritedProps?function(){return!0}:function(e,t){return"number"==typeof t&&Array.isArray(e)||r(e,t)},u.has=function(t,n){if("number"==typeof n?n=[n]:"string"==typeof n&&(n=n.split(".")),!n||0===n.length)return!!t;for(var i=0;i<n.length;i++){var o=s(n[i]);if(!("number"==typeof o&&a(t)&&o<t.length||(e.includeInheritedProps?o in Object(t):r(t,o))))return!1;t=t[o]}return!0},u.ensureExists=function(e,r,t){return f(e,r,t,!0)},u.set=function(e,r,t,n){return f(e,r,t,n)},u.insert=function(e,r,t,n){var i=u.get(e,r);n=~~n,a(i)||u.set(e,r,i=[]),i.splice(n,0,t)},u.empty=function(e,r){var s,l;if(!t(r)&&null!=e&&(s=u.get(e,r))){if("string"==typeof s)return u.set(e,r,"");if(o(s))return u.set(e,r,!1);if("number"==typeof s)return u.set(e,r,0);if(a(s))s.length=0;else{if(!i(s))return u.set(e,r,null);for(l in s)n(s,l)&&delete s[l]}}},u.push=function(e,r){var t=u.get(e,r);a(t)||u.set(e,r,t=[]),t.push.apply(t,Array.prototype.slice.call(arguments,2))},u.coalesce=function(e,r,t){for(var n,i=0,a=r.length;i<a;i++)if(void 0!==(n=u.get(e,r[i])))return n;return t},u.get=function(e,r,t){if("number"==typeof r&&(r=[r]),!r||0===r.length)return e;if(null==e)return t;if("string"==typeof r)return u.get(e,r.split("."),t);var n=s(r[0]),i=l(e,n);return void 0===i?t:1===r.length?i:u.get(e[n],r.slice(1),t)},u.del=function(e,r){if("number"==typeof r&&(r=[r]),null==e)return e;if(t(r))return e;if("string"==typeof r)return u.del(e,r.split("."));var i=s(r[0]);return n(e,i)?1!==r.length?u.del(e[i],r.slice(1)):(a(e)?e.splice(i,1):delete e[i],e):e},u}var l=u();return l.create=u,l.withInheritedProps=u({includeInheritedProps:!0}),l}()}));function W(e){return"string"==typeof e?e.length?[e]:[]:e}function I(e){return e&&"object"==typeof e&&!Array.isArray(e)}function j(e){return"string"==typeof e}var E={cb:void 0,i:!1,trimBeforeMatching:!1,trimCharsBeforeMatching:[],maxMismatches:0,firstMustMatch:!1,lastMustMatch:!1,hungry:!1},S=function(e){return e+1};function N(e,r,t,i,a,o){void 0===a&&(a=!1),void 0===o&&(o=S);var s="function"==typeof t?t():t;if(+r<0&&a&&"EOL"===s)return s;var u=n(n({},E),i);if(r>=e.length&&!a)return!1;var l=a?1:t.length,f=0,h=!1,c=!1,p=!1,g=u.maxMismatches,d=r,y=!1,m=!1,v=!1;function w(){return 1===f&&g<u.maxMismatches-1}for(;e[d];){var b=o(d);if(u.trimBeforeMatching&&""===e[d].trim()){if(!e[b]&&a&&"EOL"===t)return!0;d=o(d)}else if(u&&!u.i&&u.trimCharsBeforeMatching&&u.trimCharsBeforeMatching.includes(e[d])||u&&u.i&&u.trimCharsBeforeMatching&&u.trimCharsBeforeMatching.map((function(e){return e.toLowerCase()})).includes(e[d].toLowerCase())){if(a&&"EOL"===t&&!e[b])return!0;d=o(d)}else{var _=b>d?t[t.length-l]:t[l-1];if(!u.i&&e[d]===_||u.i&&e[d].toLowerCase()===_.toLowerCase()){if(y||(y=!0),p||(p=!0),l===t.length){if(m=!0,g!==u.maxMismatches)return!1}else 1===l&&(v=!0);if(l-=1,f++,w())return!1;if(!l)return(f!==t.length||g===u.maxMismatches||!h)&&d}else{if(h||f||(h=!0),!(u.maxMismatches&&g&&d))return!(0!==d||1!==l||u.lastMustMatch||!p)&&0;g-=1;for(var T=0;T<=g;T++){var O=b>d?t[t.length-l+1+T]:t[l-2-T],A=e[o(d)];if(O&&(!u.i&&e[d]===O||u.i&&e[d].toLowerCase()===O.toLowerCase())&&(!u.firstMustMatch||l!==t.length)){if(f++,w())return!1;l-=2,y=!0;break}if(A&&O&&(!u.i&&A===O||u.i&&A.toLowerCase()===O.toLowerCase())&&(!u.firstMustMatch||l!==t.length)){if(!f&&!u.hungry)return!1;l-=1,y=!0;break}if(void 0===O&&g>=0&&y&&(!u.firstMustMatch||m)&&(!u.lastMustMatch||v))return d}y||(c=d)}if(!1!==c&&c!==d&&(c=!1),l<1)return d;d=o(d)}}return l>0?!(!a||"EOL"!==s)||!!(u&&u.maxMismatches>=l&&p)&&(c||0):void 0}function D(e,r,t,i,a){if(I(a)&&Object.prototype.hasOwnProperty.call(a,"trimBeforeMatching")&&"boolean"!=typeof a.trimBeforeMatching)throw new Error("string-match-left-right/"+e+"(): [THROW_ID_09] opts.trimBeforeMatching should be boolean!"+(Array.isArray(a.trimBeforeMatching)?" Did you mean to use opts.trimCharsBeforeMatching?":""));var o,s,u=n(n({},E),a);if("string"==typeof u.trimCharsBeforeMatching&&(u.trimCharsBeforeMatching=W(u.trimCharsBeforeMatching)),u.trimCharsBeforeMatching=u.trimCharsBeforeMatching.map((function(e){return j(e)?e:String(e)})),!j(r))return!1;if(!r.length)return!1;if(!Number.isInteger(t)||t<0)throw new Error("string-match-left-right/"+e+"(): [THROW_ID_03] the second argument should be a natural number. Currently it's of a type: "+typeof t+", equal to:\n"+JSON.stringify(t,null,4));if(j(i))o=[i];else if(Array.isArray(i))o=i;else if(i){if("function"!=typeof i)throw new Error("string-match-left-right/"+e+"(): [THROW_ID_05] the third argument, whatToMatch, is neither string nor array of strings! It's "+typeof i+", equal to:\n"+JSON.stringify(i,null,4));(o=[]).push(i)}else o=i;if(a&&!I(a))throw new Error("string-match-left-right/"+e+"(): [THROW_ID_06] the fourth argument, options object, should be a plain object. Currently it's of a type \""+typeof a+'", and equal to:\n'+JSON.stringify(a,null,4));var l=0,f="";if(u&&u.trimCharsBeforeMatching&&u.trimCharsBeforeMatching.some((function(e,r){return e.length>1&&(l=r,f=e,!0)})))throw new Error("string-match-left-right/"+e+"(): [THROW_ID_07] the fourth argument, options object contains trimCharsBeforeMatching. It was meant to list the single characters but one of the entries at index "+l+" is longer than 1 character, "+f.length+" (equals to "+f+"). Please split it into separate characters and put into array as separate elements.");if(!o||!Array.isArray(o)||Array.isArray(o)&&!o.length||Array.isArray(o)&&1===o.length&&j(o[0])&&!o[0].trim()){if("function"==typeof u.cb){var h,c=t;if("matchLeftIncl"!==e&&"matchRight"!==e||(c+=1),"L"===e[5])for(var p=c;p--;){var g=r[p];if((!u.trimBeforeMatching||u.trimBeforeMatching&&void 0!==g&&g.trim())&&(!u.trimCharsBeforeMatching||!u.trimCharsBeforeMatching.length||void 0!==g&&!u.trimCharsBeforeMatching.includes(g))){h=p;break}}else if(e.startsWith("matchRight"))for(var d=c;d<r.length;d++){var y=r[d];if((!u.trimBeforeMatching||u.trimBeforeMatching&&y.trim())&&(!u.trimCharsBeforeMatching||!u.trimCharsBeforeMatching.length||!u.trimCharsBeforeMatching.includes(y))){h=d;break}}if(void 0===h)return!1;var m=r[h],v=h+1,w="";return v&&v>0&&(w=r.slice(0,v)),"L"===e[5]?u.cb(m,w,h):(h&&h>0&&(w=r.slice(h)),u.cb(m,w,h))}var b="";throw a||(b=" More so, the whole options object, the fourth input argument, is missing!"),new Error("string-match-left-right/"+e+'(): [THROW_ID_08] the third argument, "whatToMatch", was given as an empty string. This means, you intend to match purely by a callback. The callback was not set though, the opts key "cb" is not set!'+b)}for(var _=0,T=o.length;_<T;_++){var O=o[_],A=void 0,S=void 0,D="",R=t;"matchRight"===e?R+=1:"matchLeft"===e&&(R-=1);var H=N(r,R,O,u,s="function"==typeof o[_],(function(r){return"L"===e[5]?r-1:r+1}));if(H&&s&&"function"==typeof O&&"EOL"===O())return!(!O()||u.cb&&!u.cb(A,D,S))&&O();if(Number.isInteger(H)&&(S=e.startsWith("matchLeft")?H-1:H+1,D="L"===e[5]?r.slice(0,H):r.slice(S)),S<0&&(S=void 0),r[S]&&(A=r[S]),Number.isInteger(H)&&(!u.cb||u.cb(A,D,S)))return O}return!1}function R(e,r,t,n){return D("matchLeftIncl",e,r,t,n)}function H(e,r,t,n){return D("matchRightIncl",e,r,t,n)}function M(e){return"string"==typeof e}var x={fromIndex:0,throwWhenSomethingWrongIsDetected:!0,allowWholeValueToBeOnlyHeadsOrTails:!0,source:"string-find-heads-tails",matchHeadsAndTailsStrictlyInPairsByTheirOrder:!1,relaxedAPI:!1};function C(e,r,t,i){if(i&&(!(a=i)||"object"!=typeof a||Array.isArray(a)))throw new TypeError("string-find-heads-tails: [THROW_ID_01] the fourth input argument, an Optional Options Object, must be a plain object! Currently it's equal to: "+i+" (type: "+typeof i+")");var a,o,s,u=n(n({},x),i);if("string"==typeof u.fromIndex&&/^\d*$/.test(u.fromIndex))u.fromIndex=Number(u.fromIndex);else if(!Number.isInteger(u.fromIndex)||u.fromIndex<0)throw new TypeError(u.source+" [THROW_ID_18] the fourth input argument must be a natural number or zero! Currently it's: "+u.fromIndex);if(!M(e)||0===e.length){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_02] the first input argument, input string, must be a non-zero-length string! Currently it's: "+typeof e+", equal to: "+e)}if("string"!=typeof r&&!Array.isArray(r)){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_03] the second input argument, heads, must be either a string or an array of strings! Currently it's: "+typeof r+", equal to:\n"+JSON.stringify(r,null,4))}if("string"==typeof r){if(0===r.length){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_04] the second input argument, heads, must be a non-empty string! Currently it's empty.")}r=W(r)}else if(Array.isArray(r)){if(0===r.length){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_05] the second input argument, heads, must be a non-empty array and contain at least one string! Currently it's empty.")}if(r.every((function(e,r){return o=e,s=r,M(e)}))){if(!r.every((function(e,r){return s=r,M(e)&&e.length>0&&""!==e.trim()}))){if(!u.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_07] the second input argument, heads, should not contain empty strings! For example, there's one detected at index "+s+" of heads array:\n"+JSON.stringify(r,null,4)+".");if(0===(r=r.filter((function(e){return M(e)&&e.length>0}))).length)return[]}}else{if(!u.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_06] the second input argument, heads, contains non-string elements! For example, element at "+s+"th index is "+typeof o+", equal to:\n"+JSON.stringify(o,null,4)+". Whole heads array looks like:\n"+JSON.stringify(r,null,4));if(0===(r=r.filter((function(e){return M(e)&&e.length>0}))).length)return[]}}if(!M(t)&&!Array.isArray(t)){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_08] the third input argument, tails, must be either a string or an array of strings! Currently it's: "+typeof t+", equal to:\n"+JSON.stringify(t,null,4))}if(M(t)){if(0===t.length){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_09] the third input argument, tails, must be a non-empty string! Currently it's empty.")}t=W(t)}else if(Array.isArray(t)){if(0===t.length){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_10] the third input argument, tails, must be a non-empty array and contain at least one string! Currently it's empty.")}if(t.every((function(e,r){return o=e,s=r,M(e)}))){if(!t.every((function(e,r){return s=r,M(e)&&e.length>0&&""!==e.trim()}))){if(!u.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_12] the third input argument, tails, should not contain empty strings! For example, there's one detected at index "+s+". Whole tails array is equal to:\n"+JSON.stringify(t,null,4));if(0===(t=t.filter((function(e){return M(e)&&e.length>0}))).length)return[]}}else{if(!u.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_11] the third input argument, tails, contains non-string elements! For example, element at "+s+"th index is "+typeof o+", equal to:\n"+JSON.stringify(o,null,4)+". Whole tails array is equal to:\n"+JSON.stringify(t,null,4));if(0===(t=t.filter((function(e){return M(e)&&e.length>0}))).length)return[]}}var l=u.source===x.source;if(u.throwWhenSomethingWrongIsDetected&&!u.allowWholeValueToBeOnlyHeadsOrTails){if(W(r).includes(e))throw new Error(u.source+(l?": [THROW_ID_16]":"")+" the whole input string can't be equal to "+(M(r)?"":"one of ")+"heads ("+e+")!");if(W(t).includes(e))throw new Error(u.source+(l?": [THROW_ID_17]":"")+" the whole input string can't be equal to "+(M(t)?"":"one of ")+"tails ("+e+")!")}for(var f,h=r.concat(t).map((function(e){return e.charAt(0)})).reduce((function(e,r){return r.charCodeAt(0)>e[1]?[e[0],r.charCodeAt(0)]:r.charCodeAt(0)<e[0]?[r.charCodeAt(0),e[1]]:e}),[r[0].charCodeAt(0),r[0].charCodeAt(0)]),c=[],p=!1,g={},d="",y=u.fromIndex,m=e.length;y<m;y++){var v=e[y].charCodeAt(0);if(v<=h[1]&&v>=h[0]){var w=H(e,y,r);if(w&&u.matchHeadsAndTailsStrictlyInPairsByTheirOrder)for(var b=r.length;b--;)if(r[b]===w){f=b;break}if("string"==typeof w){if(!p){(g={}).headsStartAt=y,g.headsEndAt=y+w.length,p=!0,y+=w.length-1,d&&(d="");continue}if(u.throwWhenSomethingWrongIsDetected)throw new TypeError(u.source+(l?": [THROW_ID_19]":"")+' When processing "'+e+'", we found heads ('+e.slice(y,y+w.length)+') starting at character with index number "'+y+'" and there was another set of heads before it! Generally speaking, there should be "heads-tails-heads-tails", not "heads-heads-tails"!\nWe\'re talking about the area of the code:\n\n\n--------------------------------------starts\n'+e.slice(Math.max(y-200,0),y)+"\n      [33m-------\x3e[39m [31m"+e.slice(y,y+w.length)+"[39m [33m<-------[39m\n"+e.slice(y+w.length,Math.min(m,y+200))+"\n--------------------------------------ends\n\n\nTo turn off this error being thrown, set opts.throwWhenSomethingWrongIsDetected to Boolean false.")}var _=H(e,y,t);if(p&&_&&u.matchHeadsAndTailsStrictlyInPairsByTheirOrder&&void 0!==f&&void 0!==t[f]&&t[f]!==_){for(var T=void 0,O=t.length;O--;)if(t[O]===_){T=O;break}throw new TypeError(u.source+(l?": [THROW_ID_20]":"")+' When processing "'+e+'", we had "opts.matchHeadsAndTailsStrictlyInPairsByTheirOrder" on. We found heads ('+r[f]+") but the tails the followed it were not of the same index, "+f+" ("+t[f]+") but "+T+" ("+_+").")}if("string"==typeof _){if(p){g.tailsStartAt=y,g.tailsEndAt=y+_.length,c.push(g),g={},p=!1,y+=_.length-1;continue}u.throwWhenSomethingWrongIsDetected&&(d=u.source+(l?": [THROW_ID_21]":"")+' When processing "'+e+'", we found tails ('+e.slice(y,y+_.length)+') starting at character with index number "'+y+"\" but there were no heads preceding it. That's very naughty!")}}if(u.throwWhenSomethingWrongIsDetected&&y===m-1){if(0!==Object.keys(g).length)throw new TypeError(u.source+(l?": [THROW_ID_22]":"")+' When processing "'+e+"\", we reached the end of the string and yet didn't find any tails ("+JSON.stringify(t,null,4)+") to match the last detected heads ("+e.slice(g.headsStartAt,g.headsEndAt)+")!");if(d)throw new Error(d)}}return c}function B(e,r,t){var n;void 0!==t&&(n=Array.isArray(t)?u(t):[u(t)]);var i=[],a=w(e,(function(e,t,a){var o=void 0!==t?t:e;if(void 0!==t&&O.isMatch(e,r,{caseSensitive:!0}))if(void 0===n)i.push({val:t,path:a.path});else if(n.length)return n.shift();return o}));return void 0===n?i:a}function k(e,r){void 0===r&&(r=1);function t(e){return Array.from(e).reverse().join("")}function n(e,r,t){var n=t?"\n":"\r",i=t?"\r":"\n";if(!e)return e;for(var a=0,o="",s=0,u=e.length;s<u;s++)(e[s]===n||e[s]===i&&e[s-1]!==n)&&a++,"\r\n".includes(e[s])||" "===e[s]?" "===e[s]?o+=e[s]:e[s]===n?a<=r&&(o+=e[s],e[s+1]===i&&(o+=e[s+1],s++)):e[s]===i&&(!e[s-1]||e[s-1]!==n)&&a<=r&&(o+=e[s]):e[s+1]||a||(o+=" ");return o}if("string"==typeof e&&e.length){var i=1;"number"==typeof+r&&Number.isInteger(+r)&&+r>=0&&(i=+r);var a="",o="";if(e.trim()){if(!e[0].trim())for(var s=0,u=e.length;s<u;s++)if(e[s].trim()){a=e.slice(0,s);break}}else a=e;if(e.trim()&&(""===e.slice(-1).trim()||" "===e.slice(-1)))for(var l=e.length;l--;)if(e[l].trim()){o=e.slice(l+1);break}return""+n(a,i,!1)+e.trim()+t(n(t(o),i,!0))}return e}var P={strictlyTwoElementsInRangeArrays:!1,progressFn:null};function F(e,r){if(!Array.isArray(e)||!e.length)return e;var t,i,a=n(n({},P),r);if(a.strictlyTwoElementsInRangeArrays&&!e.filter((function(e){return e})).every((function(e,r){return 2===e.length||(t=r,i=e.length,!1)})))throw new TypeError("ranges-sort: [THROW_ID_03] The first argument should be an array and must consist of arrays which are natural number indexes representing TWO string index ranges. However, "+t+"th range ("+JSON.stringify(e[t],null,4)+") has not two but "+i+" elements!");if(!e.filter((function(e){return e})).every((function(e,r){return!(!Number.isInteger(e[0])||e[0]<0||!Number.isInteger(e[1])||e[1]<0)||(t=r,!1)})))throw new TypeError("ranges-sort: [THROW_ID_04] The first argument should be an array and must consist of arrays which are natural number indexes representing string index ranges. However, "+t+"th range ("+JSON.stringify(e[t],null,4)+") does not consist of only natural numbers!");var o=Math.pow(e.filter((function(e){return e})).length,2),s=0;return Array.from(e).filter((function(e){return e})).sort((function(e,r){return a.progressFn&&a.progressFn(Math.floor(100*(s+=1)/o)),e[0]===r[0]?e[1]<r[1]?-1:e[1]>r[1]?1:0:e[0]<r[0]?-1:1}))}var J={mergeType:1,progressFn:null,joinRangesThatTouchEdges:!0};function V(e,r){function t(e){return e&&"object"==typeof e&&!Array.isArray(e)}if(!Array.isArray(e)||!e.length)return null;var i;if(r){if(!t(r))throw new Error("emlint: [THROW_ID_03] the second input argument must be a plain object. It was given as:\n"+JSON.stringify(r,null,4)+" (type "+typeof r+")");if((i=n(n({},J),r)).progressFn&&t(i.progressFn)&&!Object.keys(i.progressFn).length)i.progressFn=null;else if(i.progressFn&&"function"!=typeof i.progressFn)throw new Error('ranges-merge: [THROW_ID_01] opts.progressFn must be a function! It was given of a type: "'+typeof i.progressFn+'", equal to '+JSON.stringify(i.progressFn,null,4));if(i.mergeType&&1!=+i.mergeType&&2!=+i.mergeType)throw new Error('ranges-merge: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "'+typeof i.mergeType+'", equal to '+JSON.stringify(i.mergeType,null,4));if("boolean"!=typeof i.joinRangesThatTouchEdges)throw new Error('ranges-merge: [THROW_ID_04] opts.joinRangesThatTouchEdges was customised to a wrong thing! It was given of a type: "'+typeof i.joinRangesThatTouchEdges+'", equal to '+JSON.stringify(i.joinRangesThatTouchEdges,null,4))}else i=n({},J);var a,o,s,u=e.filter((function(e){return e})).map((function(e){return[].concat(e)})).filter((function(e){return void 0!==e[2]||e[0]!==e[1]}));if(!(a=i.progressFn?F(u,{progressFn:function(e){(s=Math.floor(e/5))!==o&&(o=s,i.progressFn(s))}}):F(u)))return null;for(var l=a.length-1,f=l;f>0;f--)i.progressFn&&(s=Math.floor(78*(1-f/l))+21)!==o&&s>o&&(o=s,i.progressFn(s)),(a[f][0]<=a[f-1][0]||!i.joinRangesThatTouchEdges&&a[f][0]<a[f-1][1]||i.joinRangesThatTouchEdges&&a[f][0]<=a[f-1][1])&&(a[f-1][0]=Math.min(a[f][0],a[f-1][0]),a[f-1][1]=Math.max(a[f][1],a[f-1][1]),void 0!==a[f][2]&&(a[f-1][0]>=a[f][0]||a[f-1][1]<=a[f][1])&&null!==a[f-1][2]&&(null===a[f][2]&&null!==a[f-1][2]?a[f-1][2]=null:null!=a[f-1][2]?2==+i.mergeType&&a[f-1][0]===a[f][0]?a[f-1][2]=a[f][2]:a[f-1][2]+=a[f][2]:a[f-1][2]=a[f][2]),a.splice(f,1),f=a.length);return a.length?a:null}function q(e){return null!=e}function L(e){return Number.isInteger(e)&&e>=0}function $(e){return"string"==typeof e}var U={limitToBeAddedWhitespace:!1,limitLinebreaksCount:1,mergeType:1},z=function(){function e(e){var r=n(n({},U),e);if(r.mergeType&&1!==r.mergeType&&2!==r.mergeType)if($(r.mergeType)&&"1"===r.mergeType.trim())r.mergeType=1;else{if(!$(r.mergeType)||"2"!==r.mergeType.trim())throw new Error('ranges-push: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "'+typeof r.mergeType+'", equal to '+JSON.stringify(r.mergeType,null,4));r.mergeType=2}this.opts=r,this.ranges=[]}var r=e.prototype;return r.add=function(e,r,t){var n=this;if(null!=e||null!=r){if(q(e)&&!q(r)){if(Array.isArray(e)){if(e.length){if(e.some((function(e){return Array.isArray(e)})))return void e.forEach((function(e){Array.isArray(e)&&n.add.apply(n,e)}));e.length&&L(+e[0])&&L(+e[1])&&this.add.apply(this,e)}return}throw new TypeError('ranges-push/Ranges/add(): [THROW_ID_12] the first input argument, "from" is set ('+JSON.stringify(e,null,0)+') but second-one, "to" is not ('+JSON.stringify(r,null,0)+")")}if(!q(e)&&q(r))throw new TypeError('ranges-push/Ranges/add(): [THROW_ID_13] the second input argument, "to" is set ('+JSON.stringify(r,null,0)+') but first-one, "from" is not ('+JSON.stringify(e,null,0)+")");var i=+e,a=+r;if(L(t)&&(t=String(t)),!L(i)||!L(a))throw L(i)&&i>=0?new TypeError('ranges-push/Ranges/add(): [THROW_ID_10] "to" value, the second input argument, must be a natural number or zero! Currently it\'s of a type "'+typeof a+'" equal to: '+JSON.stringify(a,null,4)):new TypeError('ranges-push/Ranges/add(): [THROW_ID_09] "from" value, the first input argument, must be a natural number or zero! Currently it\'s of a type "'+typeof i+'" equal to: '+JSON.stringify(i,null,4));if(q(t)&&!$(t)&&!L(t))throw new TypeError("ranges-push/Ranges/add(): [THROW_ID_08] The third argument, the value to add, was given not as string but "+typeof t+", equal to:\n"+JSON.stringify(t,null,4));if(q(this.ranges)&&Array.isArray(this.last())&&i===this.last()[1]){if(this.last()[1]=a,this.last(),null!==this.last()[2]&&q(t)){var o=!(this.last()[2]&&this.last()[2].length>0)||this.opts&&this.opts.mergeType&&1!==this.opts.mergeType?t:this.last()[2]+t;this.opts.limitToBeAddedWhitespace&&(o=k(o,this.opts.limitLinebreaksCount)),$(o)&&!o.length||(this.last()[2]=o)}}else{this.ranges||(this.ranges=[]);var s=void 0===t||$(t)&&!t.length?[i,a]:[i,a,t&&this.opts.limitToBeAddedWhitespace?k(t,this.opts.limitLinebreaksCount):t];this.ranges.push(s)}}},r.push=function(e,r,t){this.add(e,r,t)},r.current=function(){var e=this;return Array.isArray(this.ranges)&&this.ranges.length?(this.ranges=V(this.ranges,{mergeType:this.opts.mergeType}),this.ranges&&this.opts.limitToBeAddedWhitespace?this.ranges.map((function(r){return q(r[2])?[r[0],r[1],k(r[2],e.opts.limitLinebreaksCount)]:r})):this.ranges):null},r.wipe=function(){this.ranges=[]},r.replace=function(e){if(Array.isArray(e)&&e.length){if(!Array.isArray(e[0])||!L(e[0][0]))throw new Error("ranges-push/Ranges/replace(): [THROW_ID_11] Single range was given but we expected array of arrays! The first element, "+JSON.stringify(e[0],null,4)+" should be an array and its first element should be an integer, a string index.");this.ranges=Array.from(e)}else this.ranges=[]},r.last=function(){return Array.isArray(this.ranges)&&this.ranges.length?this.ranges[this.ranges.length-1]:null},e}();function G(e,r,t){var n,i=0,a=0;if(0===arguments.length)throw new Error("ranges-apply: [THROW_ID_01] inputs missing!");if("string"!=typeof e)throw new TypeError("ranges-apply: [THROW_ID_02] first input argument must be a string! Currently it's: "+typeof e+", equal to: "+JSON.stringify(e,null,4));if(r&&!Array.isArray(r))throw new TypeError("ranges-apply: [THROW_ID_03] second input argument must be an array (or null)! Currently it's: "+typeof r+", equal to: "+JSON.stringify(r,null,4));if(t&&"function"!=typeof t)throw new TypeError("ranges-apply: [THROW_ID_04] the third input argument must be a function (or falsey)! Currently it's: "+typeof t+", equal to: "+JSON.stringify(t,null,4));if(!r||!r.filter((function(e){return e})).length)return e;var o=(n=Array.isArray(r)&&Number.isInteger(r[0])&&Number.isInteger(r[1])?[Array.from(r)]:Array.from(r)).length,s=0;n.filter((function(e){return e})).forEach((function(e,r){if(t&&(i=Math.floor(s/o*10))!==a&&(a=i,t(i)),!Array.isArray(e))throw new TypeError("ranges-apply: [THROW_ID_05] ranges array, second input arg., has "+r+"th element not an array: "+JSON.stringify(e,null,4)+", which is "+typeof e);if(!Number.isInteger(e[0])){if(!Number.isInteger(+e[0])||+e[0]<0)throw new TypeError("ranges-apply: [THROW_ID_06] ranges array, second input arg. has "+r+"th element, array "+JSON.stringify(e,null,0)+". Its first element is not an integer, string index, but "+typeof e[0]+", equal to: "+JSON.stringify(e[0],null,4)+".");n[r][0]=+n[r][0]}if(!Number.isInteger(e[1])){if(!Number.isInteger(+e[1])||+e[1]<0)throw new TypeError("ranges-apply: [THROW_ID_07] ranges array, second input arg. has "+r+"th element, array "+JSON.stringify(e,null,0)+". Its second element is not an integer, string index, but "+typeof e[1]+", equal to: "+JSON.stringify(e[1],null,4)+".");n[r][1]=+n[r][1]}s+=1}));var u=V(n,{progressFn:function(e){t&&(i=10+Math.floor(e/10))!==a&&(a=i,t(i))}}),l=Array.isArray(u)?u.length:0;if(l>0){var f=e.slice(u[l-1][1]);e=u.reduce((function(r,n,o,s){return t&&(i=20+Math.floor(o/l*80))!==a&&(a=i,t(i)),r+e.slice(0===o?0:s[o-1][1],s[o][0])+(s[o][2]||"")}),""),e+=f}return e}var K={classicTrim:!1,cr:!1,lf:!1,tab:!1,space:!0,nbsp:!1};function Q(e,r){if("string"!=typeof e)throw new Error("string-trim-spaces-only: [THROW_ID_01] input must be string! It was given as "+typeof e+", equal to:\n"+JSON.stringify(e,null,4));var t,i,a=n(n({},K),r);function o(e){return a.classicTrim&&!e.trim()||!a.classicTrim&&(a.space&&" "===e||a.cr&&"\r"===e||a.lf&&"\n"===e||a.tab&&"\t"===e||a.nbsp&&" "===e)}if(e.length){if(o(e[0]))for(var s=0,u=e.length;s<u;s++){if(!o(e[s])){t=s;break}if(s===e.length-1)return{res:"",ranges:[[0,e.length]]}}if(o(e[e.length-1]))for(var l=e.length;l--;)if(!o(e[l])){i=l+1;break}return t?i?{res:e.slice(t,i),ranges:[[0,t],[i,e.length]]}:{res:e.slice(t),ranges:[[0,t]]}:i?{res:e.slice(0,i),ranges:[[i,e.length]]}:{res:e,ranges:[]}}return{res:"",ranges:[]}}var X=Object.prototype.hasOwnProperty,Y={heads:"%%_",tails:"_%%",headsNoWrap:"%%-",tailsNoWrap:"-%%",lookForDataContainers:!0,dataContainerIdentifierTails:"_data",wrapHeadsWith:"",wrapTailsWith:"",dontWrapVars:[],preventDoubleWrapping:!0,wrapGlobalFlipSwitch:!0,noSingleMarkers:!1,resolveToBoolIfAnyValuesContainBool:!0,resolveToFalseIfAnyValuesContainBool:!0,throwWhenNonStringInsertedInString:!1,allowUnresolved:!1};function Z(e){return"string"==typeof e}function ee(e){return"boolean"==typeof e}function re(e){return null===e}function te(e){return e&&"object"==typeof e&&!Array.isArray(e)}function ne(e){return null!=e}function ie(e){return Z(e)?e.trim():e}function ae(e){if("string"==typeof e&&e.length>0&&-1!==e.indexOf("."))for(var r=0,t=e.length;r<t;r++)if("."===e[r])return e.slice(r+1);return e}function oe(e){if("string"==typeof e&&e.length>0&&-1!==e.indexOf("."))for(var r=e.length;r--;)if("."===e[r])return e.slice(0,r);return e}function se(e){if("string"==typeof e&&e.length>0&&-1!==e.indexOf("."))for(var r=e.length;r--;)if("."===e[r])return e.slice(r+1);return e}function ue(e,r){return!("string"!=typeof e||!e.trim())&&!!(e.includes(r.heads)||e.includes(r.tails)||Z(r.headsNoWrap)&&r.headsNoWrap.length>0&&e.includes(r.headsNoWrap)||Z(r.tailsNoWrap)&&r.tailsNoWrap.length>0&&e.includes(r.tailsNoWrap))}function le(e,r,t,i,a,o){if(void 0===t&&(t=!1),r.wrapHeadsWith||(r.wrapHeadsWith=""),r.wrapTailsWith||(r.wrapTailsWith=""),Z(e)&&!t&&r.wrapGlobalFlipSwitch&&!r.dontWrapVars.some((function(e){return O.isMatch(o,e)}))&&(!r.preventDoubleWrapping||r.preventDoubleWrapping&&Z(e)&&!e.includes(r.wrapHeadsWith)&&!e.includes(r.wrapTailsWith)))return r.wrapHeadsWith+e+r.wrapTailsWith;if(t){if(!Z(e))return e;var s=function(e,r){var t=Object.prototype.hasOwnProperty;if(void 0===e)throw new Error("string-remove-duplicate-heads-tails: [THROW_ID_01] The input is missing!");if("string"!=typeof e)return e;if(r&&!m(r))throw new Error("string-remove-duplicate-heads-tails: [THROW_ID_03] The given options are not a plain object but "+typeof r+"!");var i=n({},r);if(i&&t.call(i,"heads")){if(!W(i.heads).every((function(e){return"string"==typeof e||Array.isArray(e)})))throw new Error("string-remove-duplicate-heads-tails: [THROW_ID_04] The opts.heads contains elements which are not string-type!");"string"==typeof i.heads&&(i.heads=W(i.heads))}if(i&&t.call(i,"tails")){if(!W(i.tails).every((function(e){return"string"==typeof e||Array.isArray(e)})))throw new Error("string-remove-duplicate-heads-tails: [THROW_ID_05] The opts.tails contains elements which are not string-type!");"string"==typeof i.tails&&(i.tails=W(i.tails))}var a=Q(e).res;if(0===a.length)return e;e=a;var o=n(n({},{heads:["{{"],tails:["}}"]}),i);o.heads=o.heads.map((function(e){return e.trim()})),o.tails=o.tails.map((function(e){return e.trim()}));var s=!1,u=!1,l=new z({limitToBeAddedWhitespace:!0}),f=new z({limitToBeAddedWhitespace:!0}),h=!0,c=!0,p="";function g(e,r){var t;return H(e,0,r.heads,{trimBeforeMatching:!0,cb:function(e,r,n){return t=n,!0}})&&H(e,t,r.tails,{trimBeforeMatching:!0,cb:function(e,r,n){return t=n,!0}})?e.slice(t):e}for(;e!==g(e,o);)e=Q(g(e,o)).res;function d(e,r){var t;return R(e,e.length-1,r.tails,{trimBeforeMatching:!0,cb:function(e,r,n){return t=n,!0}})&&t&&R(e,t,r.heads,{trimBeforeMatching:!0,cb:function(e,r,n){return t=n,!0}})?e.slice(0,t+1):e}for(;e!==d(e,o);)e=Q(d(e,o)).res;if(!(o.heads.length&&H(e,0,o.heads,{trimBeforeMatching:!0})&&o.tails.length&&R(e,e.length-1,o.tails,{trimBeforeMatching:!0})))return Q(e).res;for(var y=0,v=e.length;y<v;y++)if(""===e[y].trim());else{var w=void 0;if(H(e,y,o.heads,{trimBeforeMatching:!0,cb:function(e,r,t){return w=t,!0}})&&w){c=!0,h&&(h=!0);var b=void 0;H(e,w,o.tails,{trimBeforeMatching:!0,cb:function(e,r,t){return b=t,!0}})&&l.push(y,b),f.current()&&s&&"tails"!==p&&l.push(f.current()),s||f.current()&&(l.push(f.current()),f.wipe()),f.push(y,w),p="heads",y=w-1;continue}if(H(e,y,o.tails,{trimBeforeMatching:!0,cb:function(r,t,n){return w=Number.isInteger(n)?n:e.length,!0}})&&w){c=!0,h?("heads"===p&&f.wipe(),h=!1):f.push(y,w),p="tails",y=w-1;continue}h&&(h=!0),c&&!s?(s=!0,c=!1):c&&!u?(u=!0,h=!0,c=!1,"heads"===p&&f.wipe()):c&&u&&f.wipe()}return f.current()&&l.push(f.current()),l.current()?G(e,l.current()).trim():e.trim()}(e,{heads:r.wrapHeadsWith,tails:r.wrapTailsWith});return Z(s)?(l=r.wrapHeadsWith,f=r.wrapTailsWith,"string"==typeof(u=s)&&u.length>0&&H(u,0,l,{trimBeforeMatching:!0,cb:function(e,r,t){return h=t,!0}})&&R(u,u.length-1,f,{trimBeforeMatching:!0,cb:function(e,r,t){return c=t+1,!0}})?u.slice(h,c):u):s}var u,l,f,h,c;return e}function fe(e,r,t,n){var i;if(-1!==t.indexOf(".")){var a=t,o=!0;if(n.lookForDataContainers&&"string"==typeof n.dataContainerIdentifierTails&&n.dataContainerIdentifierTails.length>0&&!a.endsWith(n.dataContainerIdentifierTails)){var s=A.get(e,a+n.dataContainerIdentifierTails);te(s)&&A.get(s,r)&&(i=A.get(s,r),o=!1)}for(;o&&-1!==a.indexOf(".");){if(se(a=oe(a))===r)throw new Error('json-variables/findValues(): [THROW_ID_20] While trying to resolve: "'+r+'" at path "'+t+'", we encountered a closed loop. The parent key "'+se(a)+'" is called the same as the variable "'+r+"\" we're looking for.");if(n.lookForDataContainers&&"string"==typeof n.dataContainerIdentifierTails&&n.dataContainerIdentifierTails.length>0&&!a.endsWith(n.dataContainerIdentifierTails)){var u=A.get(e,a+n.dataContainerIdentifierTails);te(u)&&A.get(u,r)&&(i=A.get(u,r),o=!1)}if(void 0===i){var l=A.get(e,a);te(l)&&A.get(l,r)&&(i=A.get(l,r),o=!1)}}}if(void 0===i){var f=A.get(e,r);void 0!==f&&(i=f)}if(void 0===i)if(-1===r.indexOf(".")){var h=B(e,r);if(h.length>0)for(var c=0,p=h.length;c<p;c++){if(Z(h[c].val)||ee(h[c].val)||re(h[c].val)){i=h[c].val;break}if("number"==typeof h[c].val){i=String(h[c].val);break}if(Array.isArray(h[c].val)){i=h[c].val.join("");break}throw new Error('json-variables/findValues(): [THROW_ID_21] While trying to resolve: "'+r+'" at path "'+t+'", we actually found the key named '+r+", but it was not equal to a string but to:\n"+JSON.stringify(h[c],null,4)+"\nWe can't resolve a string with that! It should be a string.")}}else{var g=B(e,function(e){if("string"==typeof e&&e.length>0&&-1!==e.indexOf("."))for(var r=0,t=e.length;r<t;r++)if("."===e[r])return e.slice(0,r);return e}(r));if(g.length>0)for(var d=0,y=g.length;d<y;d++){var m=A.get(g[d].val,ae(r));m&&Z(m)&&(i=m)}}return i}function he(e,r,t,n,i){if(void 0===i&&(i=[]),i.includes(t)){var a="";if(i.length>1){a=i.reduce((function(e,r,n){return e+(0===n?"":" →\n")+(r===t?"💥 ":"  ")+r})," Here's the path we travelled up until we hit the recursion:\n\n"),a+=" →\n💥 "+t}throw new Error('json-variables/resolveString(): [THROW_ID_19] While trying to resolve: "'+r+'" at path "'+t+'", we encountered a closed loop, the key is referencing itself."'+a)}var o={},s=Array.from(i);s.push(t);var u,l=new z;function f(i,a,u){for(var f=0,h=i.length;f<h;f++){var c=i[f],p=r.slice(c.headsEndAt,c.tailsStartAt);if(0===p.length)l.push(c.headsStartAt,c.tailsEndAt);else if(X.call(o,p)&&Z(o[p]))l.push(c.headsStartAt,c.tailsEndAt,o[p]);else{var g=fe(e,p.trim(),t,n);if(void 0===g)if(!0===n.allowUnresolved)g="";else{if("string"!=typeof n.allowUnresolved)throw new Error("json-variables/processHeadsAndTails(): [THROW_ID_18] We couldn't find the value to resolve the variable "+r.slice(c.headsEndAt,c.tailsStartAt)+". We're at path: \""+t+'".');g=n.allowUnresolved}if(!u&&n.throwWhenNonStringInsertedInString&&!Z(g))throw new Error("json-variables/processHeadsAndTails(): [THROW_ID_23] While resolving the variable "+r.slice(c.headsEndAt,c.tailsStartAt)+" at path "+t+", it resolved into a non-string value, "+JSON.stringify(g,null,4)+'. This is happening because options setting "throwWhenNonStringInsertedInString" is active (set to "true").');if(ee(g)){if(n.resolveToBoolIfAnyValuesContainBool)return l.wipe(),!n.resolveToFalseIfAnyValuesContainBool&&g;g=""}else{if(re(g)&&u)return l.wipe(),g;g=Array.isArray(g)?String(g.join("")):re(g)?"":String(g)}var d=t.includes(".")?oe(t)+"."+p:p;if(ue(g,n)){var y=le(he(e,g,d,n,s),n,a,0,0,p.trim());Z(y)&&l.push(c.headsStartAt,c.tailsEndAt,y)}else{o[p]=g;var m=le(g,n,a,0,0,p.trim());Z(m)&&l.push(c.headsStartAt,c.tailsEndAt,m)}}}}try{u=C(r,n.heads,n.tails,{source:"",throwWhenSomethingWrongIsDetected:!1})}catch(e){throw new Error('json-variables/resolveString(): [THROW_ID_17] While trying to resolve string: "'+r+'" at path '+t+", something wrong with heads and tails was detected! Here's the internal error message:\n"+e)}var h=!1;1===u.length&&""===G(r,[[u[0].headsStartAt,u[0].tailsEndAt]]).trim()&&(h=!0);var c=f(u,!1,h);if(ee(c))return c;if(re(c))return c;try{u=C(r,n.headsNoWrap,n.tailsNoWrap,{source:"",throwWhenSomethingWrongIsDetected:!1})}catch(e){throw new Error('json-variables/resolveString(): [THROW_ID_22] While trying to resolve string: "'+r+'" at path '+t+", something wrong with no-wrap heads and no-wrap tails was detected! Here's the internal error message:\n"+e)}1===u.length&&""===G(r,[[u[0].headsStartAt,u[0].tailsEndAt]]).trim()&&(h=!0);var p=f(u,!0,h);return ee(p)||re(p)?p:l&&l.current()?G(r,l.current()):r}e.defaults=Y,e.jVar=function(e,r){if(!arguments.length)throw new Error("json-variables/jVar(): [THROW_ID_01] Alas! Inputs are missing!");if(!te(e))throw new TypeError("json-variables/jVar(): [THROW_ID_02] Alas! The input must be a plain object! Currently it's: "+(Array.isArray(e)?"array":typeof e));if(r&&!te(r))throw new TypeError("json-variables/jVar(): [THROW_ID_03] Alas! An Optional Options Object must be a plain object! Currently it's: "+(Array.isArray(r)?"array":typeof r));var t,i,a,o=n(n({},Y),r);if(o.dontWrapVars?Array.isArray(o.dontWrapVars)||(o.dontWrapVars=W(o.dontWrapVars)):o.dontWrapVars=[],o.dontWrapVars.length>0&&!o.dontWrapVars.every((function(e,r){return!!Z(e)||(t=e,i=r,!1)})))throw new Error('json-variables/jVar(): [THROW_ID_05] Alas! All variable names set in opts.dontWrapVars should be of a string type. Computer detected a value "'+t+'" at index '+i+", which is not string but "+(Array.isArray(t)?"array":typeof t)+"!");if(""===o.heads)throw new Error("json-variables/jVar(): [THROW_ID_06] Alas! opts.heads are empty!");if(""===o.tails)throw new Error("json-variables/jVar(): [THROW_ID_07] Alas! opts.tails are empty!");if(o.lookForDataContainers&&""===o.dataContainerIdentifierTails)throw new Error("json-variables/jVar(): [THROW_ID_08] Alas! opts.dataContainerIdentifierTails is empty!");if(o.heads===o.tails)throw new Error("json-variables/jVar(): [THROW_ID_09] Alas! opts.heads and opts.tails can't be equal!");if(o.heads===o.headsNoWrap)throw new Error("json-variables/jVar(): [THROW_ID_10] Alas! opts.heads and opts.headsNoWrap can't be equal!");if(o.tails===o.tailsNoWrap)throw new Error("json-variables/jVar(): [THROW_ID_11] Alas! opts.tails and opts.tailsNoWrap can't be equal!");if(""===o.headsNoWrap)throw new Error("json-variables/jVar(): [THROW_ID_12] Alas! opts.headsNoWrap is an empty string!");if(""===o.tailsNoWrap)throw new Error("json-variables/jVar(): [THROW_ID_13] Alas! opts.tailsNoWrap is an empty string!");if(o.headsNoWrap===o.tailsNoWrap)throw new Error("json-variables/jVar(): [THROW_ID_14] Alas! opts.headsNoWrap and opts.tailsNoWrap can't be equal!");return w(e,(function(r,t,n){if(ne(t)&&ue(r,o))throw new Error("json-variables/jVar(): [THROW_ID_15] Alas! Object keys can't contain variables!\nPlease check the following key: "+r);if(""===(a=void 0!==t?t:r))return a;if(0!==o.heads.length&&ie(a)===ie(o.heads)||0!==o.tails.length&&ie(a)===ie(o.tails)||0!==o.headsNoWrap.length&&ie(a)===ie(o.headsNoWrap)||0!==o.tailsNoWrap.length&&ie(a)===ie(o.tailsNoWrap)){if(!o.noSingleMarkers)return a;throw new Error("json-variables/jVar(): [THROW_ID_16] Alas! While processing the input, we stumbled upon "+ie(a)+" which is equal to "+(ie(a)===ie(o.heads)?"heads":"")+(ie(a)===ie(o.tails)?"tails":"")+(Z(o.headsNoWrap)&&ie(a)===ie(o.headsNoWrap)?"headsNoWrap":"")+(Z(o.tailsNoWrap)&&ie(a)===ie(o.tailsNoWrap)?"tailsNoWrap":"")+'. If you wouldn\'t have set opts.noSingleMarkers to "true" this error would not happen and computer would have left the current element ('+ie(a)+") alone")}return Z(a)&&ue(a,o)?he(e,a,n.path,o):a}))},e.version="10.0.7",Object.defineProperty(e,"__esModule",{value:!0})}));
