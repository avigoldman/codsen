/**
 * emlint
 * Pluggable email template code linter
 * Version: 4.4.0
 * Author: Roy Revelt, Codsen Ltd
 * License: MIT
 * Homepage: https://codsen.com/os/emlint/
 */

import{TypedEmitter as t}from"tiny-typed-emitter";import{fixEnt as e}from"string-fix-broken-named-entities";import{traverse as a}from"ast-monkey-traverse";import{getLineStartIndexes as r,lineCol as i}from"line-column-mini";import s from"lodash.clonedeep";import{cparser as n}from"codsen-parser";import o from"matcher";import d from"define-lazy-prop";import{processCommaSep as l}from"string-process-comma-separated";import{right as c,left as u,leftStopAtNewLines as b}from"string-left-right";import m from"lodash.isregexp";import{rMerge as h}from"ranges-merge";import{allHtmlAttribs as f}from"html-all-known-attributes";import p from"leven";import g from"mime-db";import{isRel as x}from"is-relative-uri";import v from"url-regex";import{isLangCode as A}from"is-language-code";import{isMediaD as N}from"is-media-descriptor";import{notEmailFriendly as T}from"html-entities-not-email-friendly";import E from"he";import{findMalformed as S}from"string-find-malformed";import{matchRight as I}from"string-match-left-right";import{pathPrev as V}from"ast-monkey-util";import y from"object-path";var F=["bad-character-acknowledge","bad-character-activate-arabic-form-shaping","bad-character-activate-symmetric-swapping","bad-character-application-program-command","bad-character-backspace","bad-character-bell","bad-character-break-permitted-here","bad-character-cancel","bad-character-cancel-character","bad-character-character-tabulation-set","bad-character-character-tabulation-with-justification","bad-character-control-0080","bad-character-control-0081","bad-character-control-0084","bad-character-control-0099","bad-character-control-sequence-introducer","bad-character-data-link-escape","bad-character-delete","bad-character-device-control-four","bad-character-device-control-one","bad-character-device-control-string","bad-character-device-control-three","bad-character-device-control-two","bad-character-em-quad","bad-character-em-space","bad-character-en-quad","bad-character-en-space","bad-character-end-of-medium","bad-character-end-of-protected-area","bad-character-end-of-selected-area","bad-character-end-of-text","bad-character-end-of-transmission","bad-character-end-of-transmission-block","bad-character-enquiry","bad-character-escape","bad-character-figure-space","bad-character-first-strong-isolate","bad-character-form-feed","bad-character-four-per-em-space","bad-character-function-application","bad-character-hair-space","bad-character-ideographic-space","bad-character-information-separator-four","bad-character-information-separator-one","bad-character-information-separator-three","bad-character-information-separator-two","bad-character-inhibit-arabic-form-shaping","bad-character-inhibit-symmetric-swapping","bad-character-interlinear-annotation-anchor","bad-character-interlinear-annotation-separator","bad-character-interlinear-annotation-terminator","bad-character-invisible-plus","bad-character-invisible-separator","bad-character-invisible-times","bad-character-left-to-right-embedding","bad-character-left-to-right-isolate","bad-character-left-to-right-mark","bad-character-left-to-right-override","bad-character-line-separator","bad-character-line-tabulation","bad-character-line-tabulation-set","bad-character-medium-mathematical-space","bad-character-message-waiting","bad-character-narrow-no-break-space","bad-character-national-digit-shapes","bad-character-negative-acknowledge","bad-character-next-line","bad-character-no-break-here","bad-character-nominal-digit-shapes","bad-character-non-breaking-space","bad-character-null","bad-character-ogham-space-mark","bad-character-operating-system-command","bad-character-paragraph-separator","bad-character-partial-line-backward","bad-character-partial-line-forward","bad-character-pop-directional-formatting","bad-character-pop-directional-isolate","bad-character-private-message","bad-character-private-use-1","bad-character-private-use-2","bad-character-punctuation-space","bad-character-replacement-character","bad-character-reverse-line-feed","bad-character-right-to-left-embedding","bad-character-right-to-left-isolate","bad-character-right-to-left-mark","bad-character-right-to-left-override","bad-character-set-transmit-state","bad-character-shift-in","bad-character-shift-out","bad-character-single-character-introducer","bad-character-single-shift-three","bad-character-single-shift-two","bad-character-six-per-em-space","bad-character-soft-hyphen","bad-character-start-of-heading","bad-character-start-of-protected-area","bad-character-start-of-selected-area","bad-character-start-of-string","bad-character-start-of-text","bad-character-string-terminator","bad-character-substitute","bad-character-synchronous-idle","bad-character-tabulation","bad-character-thin-space","bad-character-three-per-em-space","bad-character-word-joiner","bad-character-zero-width-joiner","bad-character-zero-width-no-break-space","bad-character-zero-width-non-joiner","bad-character-zero-width-space"],w=["tag-bad-self-closing","tag-bold","tag-closing-backslash","tag-is-present","tag-malformed","tag-missing-closing","tag-missing-opening","tag-name-case","tag-rogue","tag-space-after-opening-bracket","tag-space-before-closing-bracket","tag-space-between-slash-and-bracket","tag-table","tag-void-frontal-slash","tag-void-slash"],C=["attribute-duplicate","attribute-enforce-img-alt","attribute-malformed","attribute-on-closing-tag"],R=["css-rule-malformed","css-trailing-semi"],O=["bad-malformed-numeric-character-entity","bad-named-html-entity-malformed-nbsp","bad-named-html-entity-multiple-encoding","bad-named-html-entity-not-email-friendly","bad-named-html-entity-unrecognised"];function $(t,e,a,r){const i={...{offset:0,from:0,to:t.length},...r};let s=null,n=null;for(let r=i.from;r<i.to;r++)null!==n||t[r].trim().length||(n=r),null===n||!t[r].trim().length&&r+1!==i.to||("function"==typeof a&&a([n+i.offset,(t[r].trim().length?r:r+1)+i.offset]),n=null),null===s&&t[r].trim().length&&(s=r),null===s||t[r].trim().length&&r+1!==i.to||("function"==typeof e&&e([s+i.offset,(r+1===i.to&&t[r].trim().length?r+1:r)+i.offset]),s=null)}function k(t,e){if("string"!=typeof t)return{charStart:0,charEnd:0,errorArr:[],trimmedVal:""};let a,r=0,i=t.length;const n=[],o=[];return t.length&&t[0].trim().length||(r=c(t),t.length&&null!==r?n.push([e,e+r]):(i=null,o.push({idxFrom:+e,idxTo:+e+t.length,message:"Missing value.",fix:null}))),i&&!t[t.length-1].trim()&&(i=u(t,t.length-1)+1,n.push([e+i,e+t.length])),n.length?(o.push({idxFrom:n[0][0],idxTo:n[n.length-1][1],message:"Remove whitespace.",fix:{ranges:s(n)}}),n.length=0,a=t.trim()):a=t,{charStart:r,charEnd:i,errorArr:o,trimmedVal:a}}const B={caseInsensitive:!1};function L(t,e,a){const r={...B,...a};return!(!Array.isArray(t)||!t.length)&&t.some((t=>m(t)&&e.match(t)||"string"==typeof t&&(!r.caseInsensitive&&e===t||r.caseInsensitive&&e.toLowerCase()===t.toLowerCase())))}const M={caseInsensitive:!1,canBeCommaSeparated:!1,quickPermittedValues:[],permittedValues:[],noSpaceAfterComma:!1};function j(t,e,a,r,i,s){const n=t.slice(r,i);if(!L(a.quickPermittedValues,n,{caseInsensitive:a.caseInsensitive})&&!L(a.permittedValues,n,{caseInsensitive:a.caseInsensitive})){let o=null,d=`Unrecognised value: "${t.slice(r,i)}".`;L(a.quickPermittedValues,n.toLowerCase())||L(a.permittedValues,n.toLowerCase())?(d="Should be lowercase.",o={ranges:[[r+e,i+e,n.toLowerCase()]]}):Array.isArray(a.quickPermittedValues)&&a.quickPermittedValues.length&&a.quickPermittedValues.length<6&&a.quickPermittedValues.every((t=>"string"==typeof t))&&(!Array.isArray(a.permittedValues)||!a.permittedValues.length)&&a.quickPermittedValues.join("|").length<40?d=`Should be "${a.quickPermittedValues.join("|")}".`:Array.isArray(a.permittedValues)&&a.permittedValues.length&&a.permittedValues.length<6&&a.permittedValues.every((t=>"string"==typeof t))&&(!Array.isArray(a.quickPermittedValues)||!a.quickPermittedValues.length)&&a.permittedValues.join("|").length<40&&(d=`Should be "${a.permittedValues.join("|")}".`),s.push({idxFrom:r+e,idxTo:i+e,message:d,fix:o})}}function K(t,e,a){const r={...M,...a},{charStart:i,charEnd:s,errorArr:n}=k(t,e);return"number"==typeof i&&"number"==typeof s&&(r.canBeCommaSeparated?l(t,{offset:e,oneSpaceAfterCommaOK:!1,leadingWhitespaceOK:!0,trailingWhitespaceOK:!0,cb:(a,i)=>{t.slice(a-e,i-e),j(t,e,r,a-e,i-e,n)},errCb:(t,e)=>{n.push({idxFrom:t[0][0],idxTo:t[t.length-1][1],message:e,fix:{ranges:t}})}}):(t.slice(i,s),j(t,e,r,i,s,n))),n}const P=/^\.\w+$/g,U=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z/g,_=/^[+-]?[1-7]$/,G=["apple-touch-icon","apple-touch-startup-image","alternate","archives","appendix","author","bookmark","canonical","chapter","contents","copyright","dns-prefetch","external","first","glossary","help","icon","import","index","last","license","manifest","modulepreload","next","nofollow","noopener","noreferrer","opener","pingback","preconnect","prefetch","preload","prerender","prev","search","shortlink","section","sidebar","start","stylesheet","subsection","tag","up"],q={"tag-missing-opening":"Opening tag is missing.","tag-missing-closing":"Closing tag is missing.","tag-void-frontal-slash":"Remove frontal slash."};function W(t){return"string"==typeof t&&1===t.length&&t.toUpperCase()!==t.toLowerCase()}function D(t){return Number.isInteger(t)&&t>0?t:Array.isArray(t)&&t.length&&Number.isInteger(t[0])&&t[0]>0?t[0]:0}function H(t){return!(!t||"object"!=typeof t||Array.isArray(t))}function z(t,e){return e?H(t)&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e.includes("-")&&Object.prototype.hasOwnProperty.call(t,e.split("-")[0])?t[e.split("-")[0]]:H(t)&&Object.prototype.hasOwnProperty.call(t,"all")?t.all:0:0}var Q=Object.freeze({__proto__:null,wholeExtensionRegex:P,splitByWhitespace:$,isAnEnabledValue:D,isAnEnabledRule:z,astErrMessages:q,validateString:K,fontSizeRegex:_,isoDateRegex:U,linkTypes:G,isLetter:W,isObj:H});function Z(t){return{character({chr:e,i:a}){0===e.charCodeAt(0)&&t.report({ruleId:"bad-character-null",message:"Bad character - NULL.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function J(t){return{character({chr:e,i:a}){1===e.charCodeAt(0)&&t.report({ruleId:"bad-character-start-of-heading",message:"Bad character - START OF HEADING.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function X(t){return{character({chr:e,i:a}){2===e.charCodeAt(0)&&t.report({ruleId:"bad-character-start-of-text",message:"Bad character - START OF TEXT.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Y(t){return{character({chr:e,i:a}){3===e.charCodeAt(0)&&t.report({ruleId:"bad-character-end-of-text",message:"Bad character - END OF TEXT.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1,"\n"]]}})}}}function tt(t){return{character({chr:e,i:a}){4===e.charCodeAt(0)&&t.report({ruleId:"bad-character-end-of-transmission",message:"Bad character - END OF TRANSMISSION.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function et(t){return{character({chr:e,i:a}){5===e.charCodeAt(0)&&t.report({ruleId:"bad-character-enquiry",message:"Bad character - ENQUIRY.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function at(t){return{character({chr:e,i:a}){6===e.charCodeAt(0)&&t.report({ruleId:"bad-character-acknowledge",message:"Bad character - ACKNOWLEDGE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function rt(t){return{character({chr:e,i:a}){7===e.charCodeAt(0)&&t.report({ruleId:"bad-character-bell",message:"Bad character - BELL.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function it(t){return{character({chr:e,i:a}){8===e.charCodeAt(0)&&t.report({ruleId:"bad-character-backspace",message:"Bad character - BACKSPACE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}const st=(t,...e)=>{let a="never";return Array.isArray(e)&&e[0]&&"string"==typeof e[0]&&"indentationisfine"===e[0].toLowerCase()&&(a="indentationIsFine"),{character({chr:e,i:r}){if(9===e.charCodeAt(0))if("never"===a)t.report({ruleId:"bad-character-tabulation",message:"Bad character - TABULATION.",idxFrom:r,idxTo:r+1,fix:{ranges:[[r,r+1," "]]}});else if("indentationIsFine"===a){const e=b(t.str,r);null!==e&&t.str[e].trim().length&&t.report({ruleId:"bad-character-tabulation",message:"Bad character - TABULATION.",idxFrom:r,idxTo:r+1,fix:{ranges:[[r,r+1," "]]}})}}}};function nt(t){return{character({chr:e,i:a}){11===e.charCodeAt(0)&&t.report({ruleId:"bad-character-line-tabulation",message:"Bad character - LINE TABULATION.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function ot(t){return{character({chr:e,i:a}){12===e.charCodeAt(0)&&t.report({ruleId:"bad-character-form-feed",message:"Bad character - FORM FEED.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function dt(t){return{character({chr:e,i:a}){14===e.charCodeAt(0)&&t.report({ruleId:"bad-character-shift-out",message:"Bad character - SHIFT OUT.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function lt(t){return{character({chr:e,i:a}){15===e.charCodeAt(0)&&t.report({ruleId:"bad-character-shift-in",message:"Bad character - SHIFT IN.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function ct(t){return{character({chr:e,i:a}){16===e.charCodeAt(0)&&t.report({ruleId:"bad-character-data-link-escape",message:"Bad character - DATA LINK ESCAPE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function ut(t){return{character({chr:e,i:a}){17===e.charCodeAt(0)&&t.report({ruleId:"bad-character-device-control-one",message:"Bad character - DEVICE CONTROL ONE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function bt(t){return{character({chr:e,i:a}){18===e.charCodeAt(0)&&t.report({ruleId:"bad-character-device-control-two",message:"Bad character - DEVICE CONTROL TWO.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function mt(t){return{character({chr:e,i:a}){19===e.charCodeAt(0)&&t.report({ruleId:"bad-character-device-control-three",message:"Bad character - DEVICE CONTROL THREE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function ht(t){return{character({chr:e,i:a}){20===e.charCodeAt(0)&&t.report({ruleId:"bad-character-device-control-four",message:"Bad character - DEVICE CONTROL FOUR.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function ft(t){return{character({chr:e,i:a}){21===e.charCodeAt(0)&&t.report({ruleId:"bad-character-negative-acknowledge",message:"Bad character - NEGATIVE ACKNOWLEDGE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function pt(t){return{character({chr:e,i:a}){22===e.charCodeAt(0)&&t.report({ruleId:"bad-character-synchronous-idle",message:"Bad character - SYNCHRONOUS IDLE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function gt(t){return{character({chr:e,i:a}){23===e.charCodeAt(0)&&t.report({ruleId:"bad-character-end-of-transmission-block",message:"Bad character - END OF TRANSMISSION BLOCK.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function xt(t){return{character({chr:e,i:a}){24===e.charCodeAt(0)&&t.report({ruleId:"bad-character-cancel",message:"Bad character - CANCEL.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function vt(t){return{character({chr:e,i:a}){25===e.charCodeAt(0)&&t.report({ruleId:"bad-character-end-of-medium",message:"Bad character - END OF MEDIUM.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function At(t){return{character({chr:e,i:a}){26===e.charCodeAt(0)&&t.report({ruleId:"bad-character-substitute",message:"Bad character - SUBSTITUTE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Nt(t){return{character({chr:e,i:a}){27===e.charCodeAt(0)&&t.report({ruleId:"bad-character-escape",message:"Bad character - ESCAPE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Tt(t){return{character({chr:e,i:a}){28===e.charCodeAt(0)&&t.report({ruleId:"bad-character-information-separator-four",message:"Bad character - INFORMATION SEPARATOR FOUR.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Et(t){return{character({chr:e,i:a}){29===e.charCodeAt(0)&&t.report({ruleId:"bad-character-information-separator-three",message:"Bad character - INFORMATION SEPARATOR THREE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function St(t){return{character({chr:e,i:a}){30===e.charCodeAt(0)&&t.report({ruleId:"bad-character-information-separator-two",message:"Bad character - INFORMATION SEPARATOR TWO.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function It(t){return{character({chr:e,i:a}){31===e.charCodeAt(0)&&t.report({ruleId:"bad-character-information-separator-one",message:"Bad character - INFORMATION SEPARATOR ONE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Vt(t){return{character({chr:e,i:a}){127===e.charCodeAt(0)&&t.report({ruleId:"bad-character-delete",message:"Bad character - DELETE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function yt(t){return{character({chr:e,i:a}){128===e.charCodeAt(0)&&t.report({ruleId:"bad-character-control-0080",message:"Bad character - CONTROL.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Ft(t){return{character({chr:e,i:a}){129===e.charCodeAt(0)&&t.report({ruleId:"bad-character-control-0081",message:"Bad character - CONTROL.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function wt(t){return{character({chr:e,i:a}){130===e.charCodeAt(0)&&t.report({ruleId:"bad-character-break-permitted-here",message:"Bad character - BREAK PERMITTED HERE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Ct(t){return{character({chr:e,i:a}){131===e.charCodeAt(0)&&t.report({ruleId:"bad-character-no-break-here",message:"Bad character - NO BREAK HERE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Rt(t){return{character({chr:e,i:a}){132===e.charCodeAt(0)&&t.report({ruleId:"bad-character-control-0084",message:"Bad character - CONTROL.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Ot(t){return{character({chr:e,i:a}){133===e.charCodeAt(0)&&t.report({ruleId:"bad-character-next-line",message:"Bad character - NEXT LINE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function $t(t){return{character({chr:e,i:a}){134===e.charCodeAt(0)&&t.report({ruleId:"bad-character-start-of-selected-area",message:"Bad character - START OF SELECTED AREA.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function kt(t){return{character({chr:e,i:a}){135===e.charCodeAt(0)&&t.report({ruleId:"bad-character-end-of-selected-area",message:"Bad character - END OF SELECTED AREA.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Bt(t){return{character({chr:e,i:a}){136===e.charCodeAt(0)&&t.report({ruleId:"bad-character-character-tabulation-set",message:"Bad character - CHARACTER TABULATION SET.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Lt(t){return{character({chr:e,i:a}){137===e.charCodeAt(0)&&t.report({ruleId:"bad-character-character-tabulation-with-justification",message:"Bad character - CHARACTER TABULATION WITH JUSTIFICATION.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Mt(t){return{character({chr:e,i:a}){138===e.charCodeAt(0)&&t.report({ruleId:"bad-character-line-tabulation-set",message:"Bad character - LINE TABULATION SET.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function jt(t){return{character({chr:e,i:a}){139===e.charCodeAt(0)&&t.report({ruleId:"bad-character-partial-line-forward",message:"Bad character - PARTIAL LINE FORWARD.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Kt(t){return{character({chr:e,i:a}){140===e.charCodeAt(0)&&t.report({ruleId:"bad-character-partial-line-backward",message:"Bad character - PARTIAL LINE BACKWARD.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Pt(t){return{character({chr:e,i:a}){141===e.charCodeAt(0)&&t.report({ruleId:"bad-character-reverse-line-feed",message:"Bad character - REVERSE LINE FEED.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Ut(t){return{character({chr:e,i:a}){142===e.charCodeAt(0)&&t.report({ruleId:"bad-character-single-shift-two",message:"Bad character - SINGLE SHIFT TWO.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function _t(t){return{character({chr:e,i:a}){143===e.charCodeAt(0)&&t.report({ruleId:"bad-character-single-shift-three",message:"Bad character - SINGLE SHIFT THREE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Gt(t){return{character({chr:e,i:a}){144===e.charCodeAt(0)&&t.report({ruleId:"bad-character-device-control-string",message:"Bad character - DEVICE CONTROL STRING.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function qt(t){return{character({chr:e,i:a}){145===e.charCodeAt(0)&&t.report({ruleId:"bad-character-private-use-1",message:"Bad character - PRIVATE USE ONE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Wt(t){return{character({chr:e,i:a}){146===e.charCodeAt(0)&&t.report({ruleId:"bad-character-private-use-2",message:"Bad character - PRIVATE USE TWO.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Dt(t){return{character({chr:e,i:a}){147===e.charCodeAt(0)&&t.report({ruleId:"bad-character-set-transmit-state",message:"Bad character - SET TRANSMIT STATE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Ht(t){return{character({chr:e,i:a}){148===e.charCodeAt(0)&&t.report({ruleId:"bad-character-cancel-character",message:"Bad character - CANCEL CHARACTER.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function zt(t){return{character({chr:e,i:a}){149===e.charCodeAt(0)&&t.report({ruleId:"bad-character-message-waiting",message:"Bad character - MESSAGE WAITING.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Qt(t){return{character({chr:e,i:a}){150===e.charCodeAt(0)&&t.report({ruleId:"bad-character-start-of-protected-area",message:"Bad character - START OF PROTECTED AREA.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Zt(t){return{character({chr:e,i:a}){151===e.charCodeAt(0)&&t.report({ruleId:"bad-character-end-of-protected-area",message:"Bad character - END OF PROTECTED AREA.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Jt(t){return{character({chr:e,i:a}){152===e.charCodeAt(0)&&t.report({ruleId:"bad-character-start-of-string",message:"Bad character - START OF STRING.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Xt(t){return{character({chr:e,i:a}){153===e.charCodeAt(0)&&t.report({ruleId:"bad-character-control-0099",message:"Bad character - CONTROL.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Yt(t){return{character({chr:e,i:a}){154===e.charCodeAt(0)&&t.report({ruleId:"bad-character-single-character-introducer",message:"Bad character - SINGLE CHARACTER INTRODUCER.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function te(t){return{character({chr:e,i:a}){155===e.charCodeAt(0)&&t.report({ruleId:"bad-character-control-sequence-introducer",message:"Bad character - CONTROL SEQUENCE INTRODUCER.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function ee(t){return{character({chr:e,i:a}){156===e.charCodeAt(0)&&t.report({ruleId:"bad-character-string-terminator",message:"Bad character - STRING TERMINATOR.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function ae(t){return{character({chr:e,i:a}){157===e.charCodeAt(0)&&t.report({ruleId:"bad-character-operating-system-command",message:"Bad character - OPERATING SYSTEM COMMAND.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function re(t){return{character({chr:e,i:a}){158===e.charCodeAt(0)&&t.report({ruleId:"bad-character-private-message",message:"Bad character - PRIVATE MESSAGE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function ie(t){return{character({chr:e,i:a}){159===e.charCodeAt(0)&&t.report({ruleId:"bad-character-application-program-command",message:"Bad character - APPLICATION PROGRAM COMMAND.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function se(t){return{character({chr:e,i:a}){173===e.charCodeAt(0)&&t.report({ruleId:"bad-character-soft-hyphen",message:"Bad character - SOFT HYPHEN.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function ne(t){return{character({chr:e,i:a}){160===e.charCodeAt(0)&&t.report({ruleId:"bad-character-non-breaking-space",message:"Bad character - NON-BREAKING SPACE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1," "]]}})}}}function oe(t){return{character({chr:e,i:a}){5760===e.charCodeAt(0)&&t.report({ruleId:"bad-character-ogham-space-mark",message:"Bad character - OGHAM SPACE MARK.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1," "]]}})}}}function de(t){return{character({chr:e,i:a}){8192===e.charCodeAt(0)&&t.report({ruleId:"bad-character-en-quad",message:"Bad character - EN QUAD.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1," "]]}})}}}function le(t){return{character({chr:e,i:a}){8193===e.charCodeAt(0)&&t.report({ruleId:"bad-character-em-quad",message:"Bad character - EM QUAD.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1," "]]}})}}}function ce(t){return{character({chr:e,i:a}){8194===e.charCodeAt(0)&&t.report({ruleId:"bad-character-en-space",message:"Bad character - EN SPACE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1," "]]}})}}}function ue(t){return{character({chr:e,i:a}){8195===e.charCodeAt(0)&&t.report({ruleId:"bad-character-em-space",message:"Bad character - EM SPACE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1," "]]}})}}}function be(t){return{character({chr:e,i:a}){8196===e.charCodeAt(0)&&t.report({ruleId:"bad-character-three-per-em-space",message:"Bad character - THREE-PER-EM SPACE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1," "]]}})}}}function me(t){return{character({chr:e,i:a}){8197===e.charCodeAt(0)&&t.report({ruleId:"bad-character-four-per-em-space",message:"Bad character - FOUR-PER-EM SPACE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1," "]]}})}}}function he(t){return{character({chr:e,i:a}){8198===e.charCodeAt(0)&&t.report({ruleId:"bad-character-six-per-em-space",message:"Bad character - SIX-PER-EM SPACE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1," "]]}})}}}function fe(t){return{character({chr:e,i:a}){8199===e.charCodeAt(0)&&t.report({ruleId:"bad-character-figure-space",message:"Bad character - FIGURE SPACE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1," "]]}})}}}function pe(t){return{character({chr:e,i:a}){8200===e.charCodeAt(0)&&t.report({ruleId:"bad-character-punctuation-space",message:"Bad character - PUNCTUATION SPACE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1," "]]}})}}}function ge(t){return{character({chr:e,i:a}){8201===e.charCodeAt(0)&&t.report({ruleId:"bad-character-thin-space",message:"Bad character - THIN SPACE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1," "]]}})}}}function xe(t){return{character({chr:e,i:a}){8202===e.charCodeAt(0)&&t.report({ruleId:"bad-character-hair-space",message:"Bad character - HAIR SPACE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1," "]]}})}}}function ve(t){return{character({chr:e,i:a}){8203===e.charCodeAt(0)&&t.report({ruleId:"bad-character-zero-width-space",message:"Bad character - ZERO WIDTH SPACE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1," "]]}})}}}function Ae(t){return{character({chr:e,i:a}){8204===e.charCodeAt(0)&&t.report({ruleId:"bad-character-zero-width-non-joiner",message:"Bad character - ZERO WIDTH NON-JOINER.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Ne(t){return{character({chr:e,i:a}){8205===e.charCodeAt(0)&&t.report({ruleId:"bad-character-zero-width-joiner",message:"Bad character - ZERO WIDTH JOINER.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Te(t){return{character({chr:e,i:a}){8206===e.charCodeAt(0)&&t.report({ruleId:"bad-character-left-to-right-mark",message:"Bad character - LEFT-TO-RIGHT MARK.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Ee(t){return{character({chr:e,i:a}){8207===e.charCodeAt(0)&&t.report({ruleId:"bad-character-right-to-left-mark",message:"Bad character - RIGHT-TO-LEFT MARK.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Se(t){return{character({chr:e,i:a}){8234===e.charCodeAt(0)&&t.report({ruleId:"bad-character-left-to-right-embedding",message:"Bad character - LEFT-TO-RIGHT EMBEDDING.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Ie(t){return{character({chr:e,i:a}){8235===e.charCodeAt(0)&&t.report({ruleId:"bad-character-right-to-left-embedding",message:"Bad character - RIGHT-TO-LEFT EMBEDDING.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Ve(t){return{character({chr:e,i:a}){8236===e.charCodeAt(0)&&t.report({ruleId:"bad-character-pop-directional-formatting",message:"Bad character - POP DIRECTIONAL FORMATTING.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function ye(t){return{character({chr:e,i:a}){8237===e.charCodeAt(0)&&t.report({ruleId:"bad-character-left-to-right-override",message:"Bad character - LEFT-TO-RIGHT OVERRIDE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Fe(t){return{character({chr:e,i:a}){8238===e.charCodeAt(0)&&t.report({ruleId:"bad-character-right-to-left-override",message:"Bad character - RIGHT-TO-LEFT OVERRIDE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function we(t){return{character({chr:e,i:a}){8288===e.charCodeAt(0)&&t.report({ruleId:"bad-character-word-joiner",message:"Bad character - WORD JOINER.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Ce(t){return{character({chr:e,i:a}){8289===e.charCodeAt(0)&&t.report({ruleId:"bad-character-function-application",message:"Bad character - FUNCTION APPLICATION.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Re(t){return{character({chr:e,i:a}){8290===e.charCodeAt(0)&&t.report({ruleId:"bad-character-invisible-times",message:"Bad character - INVISIBLE TIMES.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Oe(t){return{character({chr:e,i:a}){8291===e.charCodeAt(0)&&t.report({ruleId:"bad-character-invisible-separator",message:"Bad character - INVISIBLE SEPARATOR.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function $e(t){return{character({chr:e,i:a}){8292===e.charCodeAt(0)&&t.report({ruleId:"bad-character-invisible-plus",message:"Bad character - INVISIBLE PLUS.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function ke(t){return{character({chr:e,i:a}){8294===e.charCodeAt(0)&&t.report({ruleId:"bad-character-left-to-right-isolate",message:"Bad character - LEFT-TO-RIGHT ISOLATE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Be(t){return{character({chr:e,i:a}){8295===e.charCodeAt(0)&&t.report({ruleId:"bad-character-right-to-left-isolate",message:"Bad character - RIGHT-TO-LEFT ISOLATE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Le(t){return{character({chr:e,i:a}){8296===e.charCodeAt(0)&&t.report({ruleId:"bad-character-first-strong-isolate",message:"Bad character - FIRST STRONG ISOLATE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Me(t){return{character({chr:e,i:a}){8297===e.charCodeAt(0)&&t.report({ruleId:"bad-character-pop-directional-isolate",message:"Bad character - FIRST STRONG ISOLATE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function je(t){return{character({chr:e,i:a}){8298===e.charCodeAt(0)&&t.report({ruleId:"bad-character-inhibit-symmetric-swapping",message:"Bad character - INHIBIT SYMMETRIC SWAPPING.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Ke(t){return{character({chr:e,i:a}){8299===e.charCodeAt(0)&&t.report({ruleId:"bad-character-activate-symmetric-swapping",message:"Bad character - INHIBIT SYMMETRIC SWAPPING.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Pe(t){return{character({chr:e,i:a}){8300===e.charCodeAt(0)&&t.report({ruleId:"bad-character-inhibit-arabic-form-shaping",message:"Bad character - INHIBIT ARABIC FORM SHAPING.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Ue(t){return{character({chr:e,i:a}){8301===e.charCodeAt(0)&&t.report({ruleId:"bad-character-activate-arabic-form-shaping",message:"Bad character - ACTIVATE ARABIC FORM SHAPING.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function _e(t){return{character({chr:e,i:a}){8302===e.charCodeAt(0)&&t.report({ruleId:"bad-character-national-digit-shapes",message:"Bad character - NATIONAL DIGIT SHAPES.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Ge(t){return{character({chr:e,i:a}){8303===e.charCodeAt(0)&&t.report({ruleId:"bad-character-nominal-digit-shapes",message:"Bad character - NOMINAL DIGIT SHAPES.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function qe(t){return{character({chr:e,i:a}){65279===e.charCodeAt(0)&&t.report({ruleId:"bad-character-zero-width-no-break-space",message:"Bad character - ZERO WIDTH NO-BREAK SPACE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function We(t){return{character({chr:e,i:a}){65529===e.charCodeAt(0)&&t.report({ruleId:"bad-character-interlinear-annotation-anchor",message:"Bad character - INTERLINEAR ANNOTATION ANCHOR.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function De(t){return{character({chr:e,i:a}){65530===e.charCodeAt(0)&&t.report({ruleId:"bad-character-interlinear-annotation-separator",message:"Bad character - INTERLINEAR ANNOTATION SEPARATOR.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function He(t){return{character({chr:e,i:a}){65531===e.charCodeAt(0)&&t.report({ruleId:"bad-character-interlinear-annotation-terminator",message:"Bad character - INTERLINEAR ANNOTATION TERMINATOR.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function ze(t){return{character({chr:e,i:a}){8232===e.charCodeAt(0)&&t.report({ruleId:"bad-character-line-separator",message:"Bad character - LINE SEPARATOR.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Qe(t){return{character({chr:e,i:a}){8233===e.charCodeAt(0)&&t.report({ruleId:"bad-character-paragraph-separator",message:"Bad character - PARAGRAPH SEPARATOR.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function Ze(t){return{character({chr:e,i:a}){8239===e.charCodeAt(0)&&t.report({ruleId:"bad-character-narrow-no-break-space",message:"Bad character - NARROW NO-BREAK SPACE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1," "]]}})}}}function Je(t){return{character({chr:e,i:a}){8287===e.charCodeAt(0)&&t.report({ruleId:"bad-character-medium-mathematical-space",message:"Bad character - MEDIUM MATHEMATICAL SPACE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1," "]]}})}}}function Xe(t){return{character({chr:e,i:a}){12288===e.charCodeAt(0)&&t.report({ruleId:"bad-character-ideographic-space",message:"Bad character - IDEOGRAPHIC SPACE.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1," "]]}})}}}function Ye(t){return{character({chr:e,i:a}){65533===e.charCodeAt(0)&&t.report({ruleId:"bad-character-replacement-character",message:"Bad character - REPLACEMENT CHARACTER.",idxFrom:a,idxTo:a+1,fix:{ranges:[[a,a+1]]}})}}}function ta(t){return{tag(e){const a=[];if("<"===t.str[e.start]&&t.str[e.start+1]&&!t.str[e.start+1].trim()&&a.push([e.start+1,c(t.str,e.start+1)||t.str.length]),"<"===t.str[e.start]&&!t.str[e.tagNameStartsAt-1].trim()){const r=u(t.str,e.tagNameStartsAt)||0;r!==e.start&&a.push([r+1,e.tagNameStartsAt])}a.length&&t.report({ruleId:"tag-space-after-opening-bracket",message:"Bad whitespace.",idxFrom:a[0][0],idxTo:a[a.length-1][1],fix:{ranges:a}})}}}function ea(t,e="never"){return{tag(a){if(">"!==t.str[a.end-1])return;let r=a.end-1;const i=u(t.str,r);"/"!==t.str[i]&&"\\"!==t.str[i]||(r=i),(Object.keys(t.processedRulesConfig).includes("format-prettier")&&D(t.processedRulesConfig["format-prettier"])&&a.void||"always"===e&&(!Object.keys(t.processedRulesConfig).includes("format-prettier")||!D(t.processedRulesConfig["format-prettier"])))&&t.str[r-1]&&(t.str[r-1].trim()||" "!==t.str[r-1]||t.str[r-2]&&!t.str[r-2].trim())?t.report({ruleId:"tag-space-before-closing-bracket",message:"Add a space.",idxFrom:a.start,idxTo:a.end,fix:{ranges:[[u(t.str,r)+1,r," "]]}}):(!Object.keys(t.processedRulesConfig).includes("format-prettier")||!D(t.processedRulesConfig["format-prettier"])||a.void)&&("always"===e||Object.keys(t.processedRulesConfig).includes("format-prettier")&&D(t.processedRulesConfig["format-prettier"]))||!t.str[r-1]||t.str[r-1].trim()||t.report({ruleId:"tag-space-before-closing-bracket",message:"Remove space.",idxFrom:a.start,idxTo:a.end,fix:{ranges:[[u(t.str,r)+1,r]]}})}}}function aa(t){return{tag(e){const a=u(t.str,e.end-1);if(Number.isInteger(e.end)&&">"===t.str[e.end-1]&&("/"===t.str[a]||"\\"===t.str[a])&&a<e.end-2){const r=a+1;t.report({ruleId:"tag-space-between-slash-and-bracket",message:"Bad whitespace.",idxFrom:r,idxTo:e.end-1,fix:{ranges:[[r,e.end-1]]}})}}}}function ra(t){return{tag(e){if("table"===e.tagName&&!e.closing&&e.children&&e.children.length){const a=[];let r=0,i=!0;for(let t=0,s=e.children.length;t<s;t++)if("tag"===e.children[t].type&&"tr"===e.children[t].tagName)if(e.children[t].closing){if(i)return;i=!0}else{if(!i)return;i=!1;const s={orderNumber:r,idx:t,tds:[]};if(r++,e.children[t].children&&e.children[t].children.length){let a=!0;for(let r=0,i=e.children[t].children.length;r<i;r++)if("tag"===e.children[t].children[r].type&&"td"===e.children[t].children[r].tagName)if(e.children[t].children[r].closing){if(a)return;a=!0}else{if(!a)return;a=!1,s.tds.push(r)}if(!a)return}a.push(s)}if(!i)return;if(a.length){let r=!1;const i=a.map((t=>t.tds.reduce(((a,i)=>{let s=0;return e.children[t.idx].children[i].attribs&&e.children[t.idx].children[i].attribs.length&&e.children[t.idx].children[i].attribs.some((t=>"colspan"===t.attribName&&t.attribValue&&t.attribValue.length&&t.attribValue.some((t=>{if("text"===t.type){if(Number.isInteger(+t.value))return s=+t.value,!0;r=!0}return!1}))))?a+s:a+1}),0)));if(r)return;const s=new Set(i),n=a.map((t=>t.tds.length));if(s.size&&1!==s.size){const r=Math.max(...n);a.filter((t=>t.tds.length!==r)).forEach((a=>{if(1===a.tds.length)if(a.tds.length===i[a.orderNumber]){const i=e.children[a.idx].children[a.tds[0]].end-1;t.report({ruleId:"tag-table",message:"Add a collspan.",idxFrom:e.children[a.idx].children[a.tds[0]].start,idxTo:e.children[a.idx].children[a.tds[0]].end,fix:{ranges:[[i,i,` colspan="${r}"`]]}})}else{const i=e.children[a.idx].children[a.tds[0]].attribs;for(let e=0,a=i.length;e<a;e++)if("colspan"===i[e].attribName){t.report({ruleId:"tag-table",message:`Should be colspan="${r}".`,idxFrom:i[e].attribStarts,idxTo:i[e].attribEnds,fix:{ranges:[[i[e].attribValueStartsAt,i[e].attribValueEndsAt,`${r}`]]}});break}}else t.report({ruleId:"tag-table",message:`Should contain ${r} td's.`,idxFrom:e.children[a.idx].start,idxTo:e.children[a.idx].end,fix:null})})),n.forEach(((s,n)=>{s===r&&i[n]>s&&a[n].tds.forEach((r=>{e.children[a[n].idx].children[r].attribs.filter((t=>"colspan"===t.attribName)).forEach((e=>{t.report({ruleId:"tag-table",message:"Remove the colspan.",idxFrom:e.attribStarts,idxTo:e.attribEnds,fix:{ranges:[[e.attribLeft+1,e.attribEnds]]}})}))}))}))}}}}}}function ia(t){return{tag(e){if("<"!==t.str[e.start]&&t.report({ruleId:"tag-malformed",message:"Add an opening bracket.",idxFrom:e.start,idxTo:e.end,fix:{ranges:[[e.start,e.start,"<"]]}}),">"!==t.str[e.end-1]){const a=u(t.str,e.end)+1;t.report({ruleId:"tag-malformed",message:"Add a closing bracket.",idxFrom:e.start,idxTo:e.end,fix:{ranges:[[a,a,">"]]}})}}}}function sa(t){return{tag(e){const a=[];if(Number.isInteger(e.start)&&Number.isInteger(e.tagNameStartsAt)&&t.str.slice(e.start,e.tagNameStartsAt).includes("\\"))for(let r=e.start;r<e.tagNameStartsAt;r++)"\\"===t.str[r]&&a.push([r,r+1]);if(Number.isInteger(e.end)&&">"===t.str[e.end-1]&&"\\"===t.str[u(t.str,e.end-1)]){let a=e.void?"Replace backslash with slash.":"Delete this.";const r=u(t.str,e.end-1);let i=u(t.str,r)+1,s=e.void?"/":"";t.processedRulesConfig["tag-space-before-closing-slash"]&&(Number.isInteger(t.processedRulesConfig["tag-space-before-closing-slash"])&&t.processedRulesConfig["tag-space-before-closing-slash"]>0||Array.isArray(t.processedRulesConfig["tag-space-before-closing-slash"])&&t.processedRulesConfig["tag-space-before-closing-slash"][0]>0&&"never"===t.processedRulesConfig["tag-space-before-closing-slash"][1])&&(i=u(t.str,r)+1),Array.isArray(t.processedRulesConfig["tag-space-before-closing-slash"])&&t.processedRulesConfig["tag-space-before-closing-slash"][0]>0&&"always"===t.processedRulesConfig["tag-space-before-closing-slash"][1]&&(i=u(t.str,r)+1,s=` ${s}`,e.void&&" "===t.str[i+1]?(i+=1,s=s.trim()):e.void||(s=s.trim())),e.void&&Array.isArray(t.processedRulesConfig["tag-void-slash"])&&t.processedRulesConfig["tag-void-slash"][0]>0&&"never"===t.processedRulesConfig["tag-void-slash"][1]&&(s="",i=u(t.str,r)+1,a="Delete this."),t.report({ruleId:"tag-closing-backslash",message:a,idxFrom:i,idxTo:e.end-1,fix:{ranges:[[i,e.end-1,s]]}})}a.length&&t.report({ruleId:"tag-closing-backslash",message:"Wrong slash - backslash.",idxFrom:a[0][0],idxTo:a[a.length-1][1],fix:{ranges:a}})}}}function na(t,e="always"){return{tag(a){const r=a.end-1,i=u(t.str,r),s=u(t.str,i)||0;"never"===e&&a.void&&"/"===t.str[i]?t.report({ruleId:"tag-void-slash",message:"Remove the slash.",idxFrom:a.start,idxTo:a.end,fix:{ranges:[[s+1,r]]}}):"always"!==e||!a.void||"/"===t.str[i]||t.processedRulesConfig["tag-closing-backslash"]&&"\\"===t.str[i]&&(Number.isInteger(t.processedRulesConfig["tag-closing-backslash"])&&t.processedRulesConfig["tag-closing-backslash"]>0||Array.isArray(t.processedRulesConfig["tag-closing-backslash"])&&t.processedRulesConfig["tag-closing-backslash"][0]>0&&"always"===t.processedRulesConfig["tag-closing-backslash"][1])||(Array.isArray(t.processedRulesConfig["tag-space-before-closing-slash"])&&"always"===t.processedRulesConfig["tag-space-before-closing-slash"][1]?t.report(" "===t.str[i+1]?{ruleId:"tag-void-slash",message:"Missing slash.",idxFrom:a.start,idxTo:a.end,fix:{ranges:[[i+2,r+1,"/>"]]}}:{ruleId:"tag-void-slash",message:"Missing slash.",idxFrom:a.start,idxTo:a.end,fix:{ranges:[[i+1,r+1," />"]]}}):(void 0===t.processedRulesConfig["tag-space-before-closing-slash"]||Array.isArray(t.processedRulesConfig["tag-space-before-closing-slash"])&&"never"===t.processedRulesConfig["tag-space-before-closing-slash"][1]||Number.isInteger(t.processedRulesConfig["tag-space-before-closing-slash"])&&t.processedRulesConfig["tag-space-before-closing-slash"]>0)&&t.report({ruleId:"tag-void-slash",message:"Missing slash.",idxFrom:a.start,idxTo:a.end,fix:{ranges:[[r,r+1,"/>"]]}}))}}}function oa(t){const e=["CDATA"],a=["doctype"];return{tag(r){if(r.tagName&&!0===r.recognised)if(e.includes(r.tagName.toUpperCase())){if(t.str.slice(r.tagNameStartsAt,r.tagNameEndsAt)!==r.tagName.toUpperCase()){const e=[[r.tagNameStartsAt,r.tagNameEndsAt,r.tagName.toUpperCase()]];t.report({ruleId:"tag-name-case",message:"Bad tag name case.",idxFrom:r.tagNameStartsAt,idxTo:r.tagNameEndsAt,fix:{ranges:e}})}}else if(t.str.slice(r.tagNameStartsAt,r.tagNameEndsAt)!==r.tagName&&!a.includes(r.tagName.toLowerCase())){t.report({ruleId:"tag-name-case",message:"Bad tag name case.",idxFrom:r.tagNameStartsAt,idxTo:r.tagNameEndsAt,fix:{ranges:[[r.tagNameStartsAt,r.tagNameEndsAt,r.tagName]]}})}}}}function da(t,...e){return{tag(a){Array.isArray(e)&&e.length&&(o([a.tagName],e),o([a.tagName],e).length&&t.report({ruleId:"tag-is-present",message:`${a.tagName} is not allowed.`,idxFrom:a.start,idxTo:a.end,fix:{ranges:[[a.start,a.end]]}}))}}}function la(t,e="strong"){return{tag(a){"bold"===a.tagName&&t.report({ruleId:"tag-bold",message:'Tag "bold" does not exist in HTML.',idxFrom:a.start,idxTo:a.end,fix:{ranges:[[a.tagNameStartsAt,a.tagNameEndsAt,e]]}})}}}function ca(t){return{tag(e){if(!e.void&&e.value.endsWith(">")&&"/"===e.value[u(e.value,e.value.length-1)]){const a=e.start+u(e.value,u(e.value,e.value.length-1))+1,r=e.start+e.value.length-1;t.report({ruleId:"tag-bad-self-closing",message:"Remove the slash.",idxFrom:a,idxTo:r,fix:{ranges:[[a,r]]}})}}}}const ua=t=>{const e=new Set(["id","class"]);function a(e){if(!Array.isArray(e)||!e.length)return e;if(!t.str[e[e.length-1][1]].trim()){const a=c(t.str,e[e.length-1][1]);"/>".includes(t.str[a])&&(e[e.length-1][1]=a)}return e}return{tag(r){if(Array.isArray(r.attribs)&&r.attribs.length>1){const i=new Set,s=new Set;for(let a=0,n=r.attribs.length;a<n;a++)void 0!==r.attribs[a].attribName&&(i.has(r.attribs[a].attribName)?!e.has(r.attribs[a].attribName)||Array.isArray(r.attribs[a].attribValue)&&r.attribs[a].attribValue.length&&r.attribs[a].attribValue.some((t=>t.value&&(t.value.includes("'")||t.value.includes('"'))))?t.report({ruleId:"attribute-duplicate",message:`Duplicate attribute "${r.attribs[a].attribName}".`,idxFrom:r.attribs[a].attribStarts,idxTo:r.attribs[a].attribEnds,fix:null}):s.add(r.attribs[a].attribName):i.add(r.attribs[a].attribName));s&&s.size&&[...s].forEach((e=>{const i=[],s=[],n=[];for(let t=0,a=r.attribs.length;t<a;t++)r.attribs[t].attribName===e&&(i.length?n.push([t?r.attribs[t].attribLeft+1:r.attribs[t].attribStarts,r.attribs[t].attribEnds]):i.push(r.attribs[t].attribLeft+1,r.attribs[t].attribEnds),r.attribs[t].attribValueStartsAt&&$(r.attribs[t].attribValueRaw,(([e,a])=>{s.push(r.attribs[t].attribValueRaw.slice(e,a))})));const o=s.sort().join(" ");if(o&&o.length){const s=a(h([[...i,` ${e}="${o}"`],...n]));t.report({ruleId:"attribute-duplicate",message:`Duplicate attribute "${e}".`,idxFrom:r.start,idxTo:r.end,fix:{ranges:s}})}else{const s=a(h([[...i],...n]));t.report({ruleId:"attribute-duplicate",message:`Duplicate attribute "${e}".`,idxFrom:r.start,idxTo:r.end,fix:{ranges:s}})}}))}}}};function ba(t,...e){const a=["doctype"];return{attribute(r){let i=!0;!e.includes("useSingleToEscapeDouble")||!r.attribValueRaw.includes('"')||r.attribValueRaw.includes("'")||r.attribValueRaw.trim().startsWith('"')||r.attribValueRaw.trim().endsWith('"')||(i=!1);let s=!1;if(void 0!==r.attribName){if(!r.attribNameRecognised&&r.attribName&&!r.attribName.startsWith("xmlns:")&&!a.includes(r.parent.tagName)){let e=!1;for(const a of f.values()){if(a===r.attribName.toLowerCase()){t.report({ruleId:"attribute-malformed",message:"Should be lowercase.",idxFrom:r.attribNameStartsAt,idxTo:r.attribNameEndsAt,fix:{ranges:[[r.attribNameStartsAt,r.attribNameEndsAt,a.toLowerCase()]]}}),e=!0;break}if(1===p(a,r.attribName)){t.report({ruleId:"attribute-malformed",message:`Probably meant "${a}".`,idxFrom:r.attribNameStartsAt,idxTo:r.attribNameEndsAt,fix:{ranges:[[r.attribNameStartsAt,r.attribNameEndsAt,a]]}}),e=!0;break}}e||t.report({ruleId:"attribute-malformed",message:`Unrecognised attribute "${r.attribName}".`,idxFrom:r.attribNameStartsAt,idxTo:r.attribNameEndsAt,fix:null})}if(r.attribNameEndsAt&&(r.attribValueStartsAt||r.attribOpeningQuoteAt&&r.attribClosingQuoteAt&&r.attribClosingQuoteAt===r.attribOpeningQuoteAt+1)&&null!==r.attribOpeningQuoteAt&&"="!==t.str.slice(r.attribNameEndsAt,r.attribOpeningQuoteAt)){let e="Malformed around equal.";t.str.slice(r.attribNameEndsAt,r.attribOpeningQuoteAt).includes("=")||(e="Equal is missing.");let a=r.attribNameEndsAt;const i=r.attribOpeningQuoteAt;let s="=";"="===t.str[a]&&(a+=1,s=void 0),t.report({ruleId:"attribute-malformed",message:e,idxFrom:r.attribStarts,idxTo:r.attribEnds,fix:{ranges:s?[[a,i,"="]]:[[a,i]]}})}if(r.attribValueRaw&&(r.attribValueRaw.startsWith('"')||r.attribValueRaw.startsWith("'"))&&r.attribValueStartsAt&&r.attribOpeningQuoteAt&&t.str[r.attribValueStartsAt]===t.str[r.attribOpeningQuoteAt]){t.report({ruleId:"attribute-malformed",message:"Delete repeated opening quotes.",idxFrom:r.attribStarts,idxTo:r.attribEnds,fix:{ranges:[[r.attribValueStartsAt,r.attribValueStartsAt+1]]}}),s=!0}if(r.attribValueRaw&&(r.attribValueRaw.endsWith('"')||r.attribValueRaw.endsWith("'"))&&r.attribValueEndsAt&&r.attribClosingQuoteAt&&t.str[r.attribValueEndsAt]===t.str[r.attribClosingQuoteAt]){t.report({ruleId:"attribute-malformed",message:"Delete repeated closing quotes.",idxFrom:r.attribStarts,idxTo:r.attribEnds,fix:{ranges:[[r.attribValueEndsAt-1,r.attribValueEndsAt]]}}),s=!0}if(t.str[r.attribOpeningQuoteAt]!==(i?'"':"'")&&(r.attribOpeningQuoteAt?t.report({ruleId:"attribute-malformed",message:"Wrong opening quote.",idxFrom:r.attribStarts,idxTo:r.attribEnds,fix:{ranges:[[r.attribOpeningQuoteAt,r.attribOpeningQuoteAt+1,i?'"':"'"]]}}):r.attribValueStartsAt&&t.report({ruleId:"attribute-malformed",message:"Add an opening quote.",idxFrom:r.attribStarts,idxTo:r.attribEnds,fix:{ranges:[[u(t.str,r.attribValueStartsAt)+1,r.attribValueStartsAt,i?'"':"'"]]}})),t.str[r.attribClosingQuoteAt]!==(i?'"':"'"))if(r.attribClosingQuoteAt)t.report({ruleId:"attribute-malformed",message:"Wrong closing quote.",idxFrom:r.attribStarts,idxTo:r.attribEnds,fix:{ranges:[[r.attribClosingQuoteAt,r.attribClosingQuoteAt+1,i?'"':"'"]]}});else if(r.attribValueEndsAt||r.attribOpeningQuoteAt){let e=r.attribOpeningQuoteAt;r.attribValueStartsAt&&(e=r.attribValueStartsAt+r.attribValueRaw.trimEnd().length),t.report({ruleId:"attribute-malformed",message:"Add a closing quote.",idxFrom:r.attribStarts,idxTo:r.attribEnds,fix:{ranges:[[e,r.attribValueEndsAt||r.attribOpeningQuoteAt,i?'"':"'"]]}})}r.parent.pureHTML&&r.attribLeft&&r.attribStarts&&(r.attribLeft+2!==r.attribStarts||" "!==t.str[r.attribStarts-1])&&t.report({ruleId:"attribute-malformed",message:"Add a space.",idxFrom:r.attribStarts,idxTo:r.attribEnds,fix:{ranges:[[r.attribLeft+1,r.attribStarts," "]]}}),!s&&r.attribValueStartsAt&&r.attribValueEndsAt&&"string"==typeof r.attribValueRaw&&(i&&r.attribValueRaw.includes('"')||!i&&r.attribValueRaw.includes("'"))&&r.attribValueRaw.split("").forEach(((e,a)=>{e===(i?'"':"'")&&t.report({ruleId:"attribute-malformed",message:"Unencoded quote.",idxFrom:r.attribValueStartsAt,idxTo:r.attribValueEndsAt,fix:{ranges:[[r.attribValueStartsAt+a,r.attribValueStartsAt+a+1,i?"&quot;":"&apos;"]]}})}))}}}}const ma=t=>({tag(e){e.closing&&Array.isArray(e.attribs)&&e.attribs.length&&t.report({ruleId:"attribute-on-closing-tag",message:"Attribute on a closing tag.",idxFrom:e.attribs[0].attribStarts,idxTo:e.attribs[e.attribs.length-1].attribEnds,fix:null})}});function ha(t){return{tag(e){if(!("tag"!==e.type||"img"!==e.tagName||e.attribs.length&&e.attribs.some((t=>!t.attribName||"alt"===t.attribName.toLowerCase())))){const a=e.attribs.length?e.attribs[~-e.attribs.length].attribEnds:e.tagNameEndsAt;let r=a;t.str[a+1]&&!t.str[a].trim()&&!t.str[a+1].trim()&&c(t.str,a)&&(r=c(t.str,a)-1),t.report({ruleId:"attribute-enforce-img-alt",message:"Add an alt attribute.",idxFrom:e.start,idxTo:e.end,fix:{ranges:[[a,r,' alt=""']]}})}}}}function fa(t){return{attribute(e){if("abbr"===e.attribName){["td","th"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-abbr",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-abbr"})}))}}}}const pa=["cm","mm","in","px","pt","pc","em","ex","ch","rem","vw","vh","vmin","vmax","%"],ga=["adobe-standard-encoding","adobe-symbol-encoding","amiga-1251","ansi_x3.110-1983","asmo_449","big5","big5-hkscs","bocu-1","brf","bs_4730","bs_viewdata","cesu-8","cp50220","cp51932","csa_z243.4-1985-1","csa_z243.4-1985-2","csa_z243.4-1985-gr","csn_369103","dec-mcs","din_66003","dk-us","ds_2089","ebcdic-at-de","ebcdic-at-de-a","ebcdic-ca-fr","ebcdic-dk-no","ebcdic-dk-no-a","ebcdic-es","ebcdic-es-a","ebcdic-es-s","ebcdic-fi-se","ebcdic-fi-se-a","ebcdic-fr","ebcdic-it","ebcdic-pt","ebcdic-uk","ebcdic-us","ecma-cyrillic","es","es2","euc-kr","extended_unix_code_fixed_width_for_japanese","extended_unix_code_packed_format_for_japanese","gb18030","gb2312","gb_1988-80","gb_2312-80","gbk","gost_19768-74","greek-ccitt","greek7","greek7-old","hp-desktop","hp-legal","hp-math8","hp-pi-font","hp-roman8","hz-gb-2312","ibm-symbols","ibm-thai","ibm00858","ibm00924","ibm01140","ibm01141","ibm01142","ibm01143","ibm01144","ibm01145","ibm01146","ibm01147","ibm01148","ibm01149","ibm037","ibm038","ibm1026","ibm1047","ibm273","ibm274","ibm275","ibm277","ibm278","ibm280","ibm281","ibm284","ibm285","ibm290","ibm297","ibm420","ibm423","ibm424","ibm437","ibm500","ibm775","ibm850","ibm851","ibm852","ibm855","ibm857","ibm860","ibm861","ibm862","ibm863","ibm864","ibm865","ibm866","ibm868","ibm869","ibm870","ibm871","ibm880","ibm891","ibm903","ibm904","ibm905","ibm918","iec_p27-1","inis","inis-8","inis-cyrillic","invariant","iso-10646-j-1","iso-10646-ucs-2","iso-10646-ucs-4","iso-10646-ucs-basic","iso-10646-unicode-latin1","iso-10646-utf-1","iso-11548-1","iso-2022-cn","iso-2022-cn-ext","iso-2022-jp","iso-2022-jp-2","iso-2022-kr","iso-8859-1-windows-3.0-latin-1","iso-8859-1-windows-3.1-latin-1","iso-8859-10","iso-8859-13","iso-8859-14","iso-8859-15","iso-8859-16","iso-8859-2-windows-latin-2","iso-8859-9-windows-latin-5","iso-ir-90","iso-unicode-ibm-1261","iso-unicode-ibm-1264","iso-unicode-ibm-1265","iso-unicode-ibm-1268","iso-unicode-ibm-1276","iso_10367-box","iso_2033-1983","iso_5427","iso_5427:1981","iso_5428:1980","iso_646.basic:1983","iso_646.irv:1983","iso_6937-2-25","iso_6937-2-add","iso_8859-1:1987","iso_8859-2:1987","iso_8859-3:1988","iso_8859-4:1988","iso_8859-5:1988","iso_8859-6-e","iso_8859-6-i","iso_8859-6:1987","iso_8859-7:1987","iso_8859-8-e","iso_8859-8-i","iso_8859-8:1988","iso_8859-9:1989","iso_8859-supp","it","jis_c6220-1969-jp","jis_c6220-1969-ro","jis_c6226-1978","jis_c6226-1983","jis_c6229-1984-a","jis_c6229-1984-b","jis_c6229-1984-b-add","jis_c6229-1984-hand","jis_c6229-1984-hand-add","jis_c6229-1984-kana","jis_encoding","jis_x0201","jis_x0212-1990","jus_i.b1.002","jus_i.b1.003-mac","jus_i.b1.003-serb","koi7-switched","koi8-r","koi8-u","ks_c_5601-1987","ksc5636","kz-1048","latin-greek","latin-greek-1","latin-lap","macintosh","microsoft-publishing","mnem","mnemonic","msz_7795.3","nats-dano","nats-dano-add","nats-sefi","nats-sefi-add","nc_nc00-10:81","nf_z_62-010","nf_z_62-010_(1973)","ns_4551-1","ns_4551-2","osd_ebcdic_df03_irv","osd_ebcdic_df04_1","osd_ebcdic_df04_15","pc8-danish-norwegian","pc8-turkish","pt","pt2","ptcp154","scsu","sen_850200_b","sen_850200_c","shift_jis","t.101-g2","t.61-7bit","t.61-8bit","tis-620","tscii","unicode-1-1","unicode-1-1-utf-7","unknown-8bit","us-ascii","us-dk","utf-16","utf-16be","utf-16le","utf-32","utf-32be","utf-32le","utf-7","utf-8","ventura-international","ventura-math","ventura-us","videotex-suppl","viqr","viscii","windows-1250","windows-1251","windows-1252","windows-1253","windows-1254","windows-1255","windows-1256","windows-1257","windows-1258","windows-31j","windows-874"],xa={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},va={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Aa=/^#([a-f0-9]{6})$/i,Na=/^-?[_a-zA-Z]+[_a-zA-Z0-9-]*$/;function Ta(t){return{attribute(e){if("accept-charset"===e.attribName){["form"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-accept-charset",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});K(e.attribValueRaw,e.attribValueStartsAt,{canBeCommaSeparated:!0,noSpaceAfterComma:!0,quickPermittedValues:["UNKNOWN"],permittedValues:ga}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-accept-charset"})}))}}}}function Ea(t){return{attribute(e){if("accept"===e.attribName){["form","input"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-accept",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});K(e.attribValueRaw,e.attribValueStartsAt,{quickPermittedValues:["audio/*","video/*","image/*","text/html","image/png","image/gif","video/mpeg","text/css","audio/basic",P],permittedValues:Object.keys(g),canBeCommaSeparated:!0,noSpaceAfterComma:!0}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-accept"})}))}}}}function Sa(t){return{attribute(e){if("accesskey"===e.attribName){["a","area","button","input","label","legend","textarea"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-accesskey",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});const{charStart:a,charEnd:r,errorArr:i,trimmedVal:s}=k(e.attribValueRaw,e.attribValueStartsAt);"number"==typeof a&&"number"==typeof r&&(!(s.length>1)||s.startsWith("&")&&s.endsWith(";")||i.push({idxFrom:e.attribValueStartsAt+a,idxTo:e.attribValueStartsAt+r,message:"Should be a single character (escaped or not).",fix:null})),i.forEach((e=>{t.report({...e,ruleId:"attribute-validate-accesskey"})}))}}}}function Ia(t,e,a){const r={...{from:0,to:t.length,offset:0},...e};if(" "!==t.slice(r.from,r.to)){let e;e=" "===t[r.from]?[[r.offset+r.from+1,r.offset+r.to]]:" "===t[r.to-1]?[[r.offset+r.from,r.offset+r.to-1]]:[[r.offset+r.from,r.offset+r.to," "]],a.push({idxFrom:r.offset+r.from,idxTo:r.offset+r.to,message:"Should be a single space.",fix:{ranges:e}})}}function Va(t,e,a){const r={...{offset:0,multipleOK:!1,from:0,to:t.length,attribStarts:0,attribEnds:t.length},...e},i=t.slice(r.from,r.to),s=x(i);if(Array.from(i).some((t=>!t.trim().length))){const t=[],s=[];$(i,(t=>{s.push(t)}),(e=>{t.push(e)}),e);const n=s.reduce(((t,e)=>i.slice(e[0]-r.offset,e[1]-r.offset).match(v({exact:!0}))?t+1:t),0);s.reduce(((t,e)=>t+i.slice(e[0]-r.offset,e[1]-r.offset)),""),a.push(n>1?{idxFrom:r.from+r.offset,idxTo:r.to+r.offset,message:"There should be only one URI.",fix:null}:{idxFrom:r.from+r.offset,idxTo:r.to+r.offset,message:"Remove whitespace.",fix:{ranges:t}})}else if(!i.startsWith("tel:")&&!v({exact:!0}).test(i)&&!s.res){let t="Should be an URI.",e=r.offset+r.from,s=r.offset+r.to;const n=i.match(v());Array.isArray(n)&&(t=n.length>1&&!r.multipleOK?"There should be only one URI.":"URI's should be separated with a single space.",e=r.offset+r.attribStarts,s=r.offset+r.attribEnds),a.push({idxFrom:e,idxTo:s,message:t,fix:null})}}function ya(t,e){const a={offset:0,multipleOK:!1,separator:"space",oneSpaceAfterCommaOK:!1,leadingWhitespaceOK:!1,trailingWhitespaceOK:!1,...e},{charStart:r,charEnd:i,errorArr:s}=k(t,a.offset);return Number.isInteger(r)&&(a.multipleOK?"space"===a.separator?$(t,(([e,n])=>{const o=t.slice(e,n);o.endsWith(",")&&o.length>1?s.push({idxFrom:a.offset+n-1,idxTo:a.offset+n,message:"No commas.",fix:null}):Va(t,{...a,from:e,to:n,attribStarts:r,attribEnds:i,offset:a.offset},s)}),(([e,r])=>Ia(t,{from:e,to:r,offset:a.offset},s)),{from:r,to:i}):l(t,{offset:a.offset,oneSpaceAfterCommaOK:!1,leadingWhitespaceOK:!0,trailingWhitespaceOK:!0,cb:(e,n)=>{t.slice(e-a.offset,n-a.offset),Va(t,{...a,from:e-a.offset,to:n-a.offset,attribStarts:r,attribEnds:i,offset:a.offset},s)},errCb:(e,i)=>{let n={ranges:e};!t[e[0][0]-a.offset].trim().length&&t[e[0][0]-a.offset-1]&&r<e[0][0]-1&&("space"===a.separator||","!==t[e[0][0]-a.offset-1]&&","!==t[e[0][1]-a.offset])&&(n=null),s.push({idxFrom:e[0][0],idxTo:e[e.length-1][1],message:i,fix:n})}}):Va(t,{from:r,to:i,offset:a.offset},s)),s}function Fa(t){return{attribute(e){"action"===e.attribName&&("form"!==e.parent.tagName?t.report({ruleId:"attribute-validate-action",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}):ya(e.attribValueRaw,{offset:e.attribValueStartsAt,multipleOK:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-action"})})))}}}function wa(t){return{attribute(e){if("align"===e.attribName){["applet","caption","iframe","img","input","object","legend","table","hr","div","h1","h2","h3","h4","h5","h6","p","col","colgroup","tbody","td","tfoot","th","thead","tr"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-align",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});let a=[];["legend","caption"].includes(e.parent.tagName.toLowerCase())?a=K(e.attribValueRaw,e.attribValueStartsAt,{permittedValues:["top","bottom","left","right"],canBeCommaSeparated:!1}):["applet","iframe","img","input","object"].includes(e.parent.tagName.toLowerCase())?a=K(e.attribValueRaw,e.attribValueStartsAt,{permittedValues:["top","middle","bottom","left","right"],canBeCommaSeparated:!1}):["table","hr"].includes(e.parent.tagName.toLowerCase())?a=K(e.attribValueRaw,e.attribValueStartsAt,{permittedValues:["left","center","right"],canBeCommaSeparated:!1}):["div","h1","h2","h3","h4","h5","h6","p"].includes(e.parent.tagName.toLowerCase())?a=K(e.attribValueRaw,e.attribValueStartsAt,{permittedValues:["left","center","right","justify"],canBeCommaSeparated:!1}):["col","colgroup","tbody","td","tfoot","th","thead","tr"].includes(e.parent.tagName.toLowerCase())&&(a=K(e.attribValueRaw,e.attribValueStartsAt,{permittedValues:["left","center","right","justify","char"],canBeCommaSeparated:!1})),a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-align"})}))}}}}const Ca={namedCssLevel1OK:!0,namedCssLevel2PlusOK:!0,hexThreeOK:!1,hexFourOK:!1,hexSixOK:!0,hexEightOK:!1};function Ra(t,e,a){const r={...Ca,...a},{charStart:i,charEnd:s,errorArr:n}=k(t,e);if("number"==typeof i&&"number"==typeof s){const a=n.length?t.slice(i,s):t;a.length>1&&W(a[0])&&W(a[1])&&Object.keys(va).includes(a.toLowerCase())?r.namedCssLevel1OK?r.namedCssLevel2PlusOK||r.namedCssLevel1OK&&Object.keys(xa).includes(a.toLowerCase())||n.push({idxFrom:e+i,idxTo:e+s,message:"Named colors (CSS Level 2+) not allowed.",fix:{ranges:[[e+i,e+s,va[a.toLowerCase()]]]}}):n.push({idxFrom:e+i,idxTo:e+s,message:"Named colors (CSS Level 1) not allowed.",fix:{ranges:[[e+i,e+s,va[a.toLowerCase()]]]}}):a.startsWith("#")?7!==a.length?n.push({idxFrom:e+i,idxTo:e+s,message:"Hex color code should be 6 digits-long.",fix:null}):Aa.test(a)?r.hexSixOK||n.push({idxFrom:e+i,idxTo:e+s,message:"Hex colors not allowed.",fix:null}):n.push({idxFrom:e+i,idxTo:e+s,message:"Unrecognised hex code.",fix:null}):a.startsWith("rgb(")?n.push({idxFrom:e+i,idxTo:e+s,message:"rgb() is not allowed.",fix:null}):n.push({idxFrom:e+i,idxTo:e+s,message:"Unrecognised color value.",fix:null})}return n}function Oa(t){return{attribute(e){if("alink"===e.attribName)if("body"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-alink",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){Ra(e.attribValueRaw,e.attribValueStartsAt,{namedCssLevel1OK:!0,namedCssLevel2PlusOK:!0,hexThreeOK:!1,hexFourOK:!1,hexSixOK:!0,hexEightOK:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-alink"})}))}else t.report({ruleId:"attribute-validate-alink",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function $a(t){return{attribute(e){if("alt"===e.attribName&&(["applet","area","img","input"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-alt",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),null!==e.attribValueStartsAt&&null!==e.attribValueEndsAt)){const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-alt"})}))}}}}function ka(t){return{attribute(e){"archive"===e.attribName&&(["applet","object"].includes(e.parent.tagName)?e.attribValueStartsAt&&e.attribValueEndsAt?"applet"===e.parent.tagName?ya(e.attribValueRaw,{offset:e.attribValueStartsAt,separator:"comma",multipleOK:!0}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-archive"})})):"object"===e.parent.tagName&&ya(e.attribValueRaw,{offset:e.attribValueStartsAt,separator:"space",multipleOK:!0}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-archive"})})):t.report({ruleId:`attribute-validate-${e.attribName}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null}):t.report({ruleId:"attribute-validate-archive",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}))}}}function Ba(t){return{attribute(e){if("axis"===e.attribName)if(["td","th"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-axis",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-axis"})}))}else t.report({ruleId:"attribute-validate-axis",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function La(t){return{attribute(e){"background"===e.attribName&&(["body","td"].includes(e.parent.tagName)?ya(e.attribValueRaw,{offset:e.attribValueStartsAt,multipleOK:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-background"})})):t.report({ruleId:"attribute-validate-background",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}))}}}function Ma(t){return{attribute(e){if("bgcolor"===e.attribName)if(["table","tr","td","th","body"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-bgcolor",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){Ra(e.attribValueRaw,e.attribValueStartsAt,{namedCssLevel1OK:!0,namedCssLevel2PlusOK:!0,hexThreeOK:!1,hexFourOK:!1,hexSixOK:!0,hexEightOK:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-bgcolor"})}))}else t.report({ruleId:"attribute-validate-bgcolor",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}const ja={type:"integer",whitelistValues:[],theOnlyGoodUnits:null,plusOK:!1,negativeOK:!1,zeroOK:!0,badUnits:[],enforceCount:null,noUnitsIsFine:!0,canBeCommaSeparated:!1,customGenericValueError:null,skipWhitespaceChecks:!1,customPxMessage:null,maxValue:null};function Ka({str:t,opts:e,charStart:a,charEnd:r,idxOffset:i,errorArr:s}){if("string"==typeof t)if("0"===t[a]&&(r===a+1?e.zeroOK||s.push({idxFrom:i+a,idxTo:i+r,message:"Zero not allowed.",fix:null}):"0123456789".includes(t[a+1])&&s.push({idxFrom:i+a,idxTo:i+r,message:"Number padded with zero.",fix:null})),"0123456789".includes(t[a])||"0123456789".includes(t[r-1])){if("0123456789".includes(t[a])&&"0123456789".includes(t[r-1])&&(!e.noUnitsIsFine||"integer"===e.type&&e.maxValue&&t.slice(a,r).match(/^\d+$/)&&Number.parseInt(t.slice(a,r),10)>e.maxValue))s.push(e.noUnitsIsFine?{idxFrom:i+a,idxTo:i+r,message:`Maximum, ${e.maxValue} exceeded.`,fix:null}:{idxFrom:i+a,idxTo:i+r,message:e.customGenericValueError||"Units missing.",fix:null});else for(let n=a;n<r;n++)if(!("0123456789".includes(t[n])||"."===t[n]&&"rational"===e.type||"-"===t[n]&&e.negativeOK&&0===n||"+"===t[n]&&e.plusOK&&0===n)){const a=t.slice(n,r);if(H(e)&&(Array.isArray(e.theOnlyGoodUnits)&&!e.theOnlyGoodUnits.includes(a)||Array.isArray(e.badUnits)&&e.badUnits.includes(a)))if("px"===a){s.push({idxFrom:i+n,idxTo:i+r,message:e.customPxMessage?e.customPxMessage:"Remove px.",fix:e.customPxMessage?null:{ranges:[[i+n,i+r]]}})}else{let o="Bad unit.";t.match(/-\s*-/g)?o="Repeated minus.":t.match(/\+\s*\+/g)?o="Repeated plus.":Array.isArray(e.theOnlyGoodUnits)&&e.theOnlyGoodUnits.length&&e.theOnlyGoodUnits.includes(a.trim())?o="Rogue whitespace.":e.customGenericValueError?o=e.customGenericValueError:Array.isArray(e.theOnlyGoodUnits)&&!e.theOnlyGoodUnits.length&&"integer"===e.type&&(o="Should be integer, no units."),s.push({idxFrom:i+n,idxTo:i+r,message:o,fix:null})}else if(!pa.includes(a)){let t="Unrecognised unit.";/\d/.test(a)?t="Messy value.":pa.includes(a.trim())&&(t="Rogue whitespace."),s.push({idxFrom:i+n,idxTo:i+r,message:t,fix:null})}break}}else{let t="Digits missing.";e.customGenericValueError?t=e.customGenericValueError:Array.isArray(e.theOnlyGoodUnits)&&!e.theOnlyGoodUnits.length&&"integer"===e.type&&(t="Should be integer, no units."),s.push({idxFrom:i+a,idxTo:i+r,message:t,fix:null})}}function Pa(t,e,a){if("string"!=typeof t)return[];const r={...ja,...a};let i=0,s=t.length,n=[];if(!r.skipWhitespaceChecks){const a=k(t,e);i=a.charStart,s=a.charEnd,n=a.errorArr}if(Number.isInteger(i))if(r.canBeCommaSeparated){const a=[];l(t,{offset:e,oneSpaceAfterCommaOK:!1,leadingWhitespaceOK:!0,trailingWhitespaceOK:!0,cb:(i,s)=>{const o=t.slice(i-e,s-e);Array.isArray(r.whitelistValues)&&r.whitelistValues.includes(o)||Ka({str:t,opts:r,charStart:i-e,charEnd:s-e,idxOffset:e,errorArr:n}),a.push(o)},errCb:(t,e)=>{n.push({idxFrom:t[0][0],idxTo:t[t.length-1][1],message:e,fix:{ranges:t}})}}),Number.isInteger(r.enforceCount)&&a.length!==r.enforceCount?n.push({idxFrom:i+e,idxTo:s+e,message:`There should be ${r.enforceCount} values.`,fix:null}):"string"==typeof r.enforceCount&&["even","odd"].includes(r.enforceCount.toLowerCase())&&("even"===r.enforceCount.toLowerCase()&&a.length%2!=0?n.push({idxFrom:i+e,idxTo:s+e,message:`Should be an even number of values but found ${a.length}.`,fix:null}):"even"!==r.enforceCount.toLowerCase()&&a.length%2==0&&n.push({idxFrom:i+e,idxTo:s+e,message:`Should be an odd number of values but found ${a.length}.`,fix:null}))}else Array.isArray(r.whitelistValues)&&r.whitelistValues.includes(t.slice(i,s))||Ka({str:t,opts:r,charStart:i,charEnd:s,idxOffset:e,errorArr:n});return n}function Ua(t){return{attribute(e){if("border"===e.attribName){["table","img","object"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-border",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});Pa(e.attribValueRaw,e.attribValueStartsAt,{type:"integer",negativeOK:!1,theOnlyGoodUnits:[]}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-border"})}))}}}}function _a(t){return{attribute(e){if("cellpadding"===e.attribName){"table"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-cellpadding",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});Pa(e.attribValueRaw,e.attribValueStartsAt,{type:"integer",negativeOK:!1,theOnlyGoodUnits:["%"],badUnits:["px"],customGenericValueError:"Should be integer, either no units or percentage."}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-cellpadding"})}))}}}}function Ga(t){return{attribute(e){if("cellspacing"===e.attribName){"table"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-cellspacing",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});Pa(e.attribValueRaw,e.attribValueStartsAt,{type:"integer",negativeOK:!1,theOnlyGoodUnits:["%"],badUnits:["px"],customGenericValueError:"Should be integer, either no units or percentage."}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-cellspacing"})}))}}}}function qa(t){return{attribute(e){if("char"===e.attribName)if(["col","colgroup","tbody","td","tfoot","th","thead","tr"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-char",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){const{charStart:a,charEnd:r,errorArr:i,trimmedVal:s}=k(e.attribValueRaw,e.attribValueStartsAt);"number"==typeof a&&"number"==typeof r&&(!(s.length>1)||s.startsWith("&")&&s.endsWith(";")||i.push({idxFrom:e.attribValueStartsAt+a,idxTo:e.attribValueStartsAt+r,message:"Should be a single character.",fix:null})),i.forEach((e=>{t.report({...e,ruleId:"attribute-validate-char"})}))}else t.report({ruleId:"attribute-validate-char",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function Wa(t){return{attribute(e){if("charoff"===e.attribName)if(["col","colgroup","tbody","td","tfoot","th","thead","tr"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-charoff",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){const a=Pa(e.attribValueRaw,e.attribValueStartsAt,{type:"integer",negativeOK:!0,theOnlyGoodUnits:[],customGenericValueError:"Should be integer, no units."});e.parent.attribs.some((t=>"char"===t.attribName))||a.push({idxFrom:e.parent.start,idxTo:e.parent.end,message:'Attribute "char" missing.',fix:null}),a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-charoff"})}))}else t.report({ruleId:"attribute-validate-charoff",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function Da(t){return{attribute(e){if("charset"===e.attribName)if(["a","link","script"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-charset",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){K(e.attribValueRaw,e.attribValueStartsAt,{canBeCommaSeparated:!1,noSpaceAfterComma:!1,quickPermittedValues:[],permittedValues:ga}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-charset"})}))}else t.report({ruleId:"attribute-validate-charset",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function Ha(t,e,a,r){const i={xhtml:!1,enforceSiblingAttributes:null,...r};if(i.xhtml){let r='"';(null!==t.attribOpeningQuoteAt&&"'"===e.str[t.attribOpeningQuoteAt]||null!==t.attribClosingQuoteAt&&"'"===e.str[t.attribClosingQuoteAt])&&(r="'"),t.attribValueRaw===t.attribName&&e.str.slice(t.attribNameEndsAt,t.attribEnds)===`=${r}${t.attribName}${r}`||a.push({idxFrom:t.attribNameStartsAt,idxTo:t.attribNameEndsAt,message:`It's XHTML, add value, ="${t.attribName}".`,fix:{ranges:[[t.attribNameEndsAt,t.attribEnds,`=${r}${t.attribName}${r}`]]}})}else null!==t.attribValueRaw&&a.push({idxFrom:t.attribNameEndsAt,idxTo:t.attribEnds,message:"Should have no value.",fix:{ranges:[[t.attribNameEndsAt,t.attribEnds]]}});return H(i.enforceSiblingAttributes)&&Object.keys(i.enforceSiblingAttributes).length&&Object.keys(i.enforceSiblingAttributes).forEach((e=>{if(Array.isArray(t.parent.attribs)&&!t.parent.attribs.some((t=>t.attribName===e)))a.push({idxFrom:t.parent.start,idxTo:t.parent.end,message:`Should have attribute "${e}".`,fix:null});else if(i.enforceSiblingAttributes[e]&&Array.isArray(i.enforceSiblingAttributes[e])&&Array.isArray(t.parent.attribs)&&!t.parent.attribs.some((t=>t.attribName===e&&i.enforceSiblingAttributes[e].includes(t.attribValueRaw)))){let r,s;for(let a=0,i=t.parent.attribs.length;a<i;a++)if(t.parent.attribs[a].attribName===e){r=t.parent.attribs[a].attribValueStartsAt,s=t.parent.attribs[a].attribValueEndsAt;break}a.push({idxFrom:r,idxTo:s,message:`Only tags with ${i.enforceSiblingAttributes[e].map((t=>`"${t}"`)).join(" or ")} attributes can be ${t.attribName}.`,fix:null})}})),a}function za(t,e){return{attribute(a){const r=[];"checked"===a.attribName&&("input"!==a.parent.tagName?r.push({idxFrom:a.attribStarts,idxTo:a.attribEnds,message:`Tag "${a.parent.tagName}" can't have attribute "${a.attribName}".`,fix:null}):Ha(a,t,r,{xhtml:!!e,enforceSiblingAttributes:{type:["checkbox","radio"]}}),r.length&&r.forEach((e=>{t.report({...e,ruleId:"attribute-validate-checked"})})))}}}function Qa(t){return{attribute(e){"cite"===e.attribName&&(["blockquote","q","del","ins"].includes(e.parent.tagName)?ya(e.attribValueRaw,{offset:e.attribValueStartsAt,multipleOK:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-cite"})})):t.report({ruleId:"attribute-validate-cite",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}))}}}function Za(t,e,a){const r={...{typeName:"class",from:0,to:t.length,offset:0},...e},i=new Set;$(t,(([e,s])=>{const n=t.slice(e,s);if(Na.test(n)||a.push({idxFrom:e,idxTo:s,message:`Wrong ${r.typeName} name.`,fix:null}),i.has(n)){let i=e,o=s;const d=c(t,o);o>=r.to||!d||d>r.to?i=u(t,e)+1:o=d,a.push({idxFrom:e,idxTo:s,message:`Duplicate ${r.typeName} "${n}".`,fix:{ranges:[[i,o]]}})}else i.add(n)}),(([e,i])=>Ia(t,{from:e,to:i,offset:r.offset},a)),r)}function Ja(t){return{attribute(e){if("class"===e.attribName)if(["base","basefont","head","html","meta","param","script","style","title"].includes(e.parent.tagName)&&t.report({ruleId:"attribute-validate-class",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){const{charStart:a,charEnd:r,errorArr:i}=k(e.attribValueRaw,e.attribValueStartsAt);"number"==typeof a&&"number"==typeof r&&Za(t.str,{typeName:e.attribName,from:e.attribValueStartsAt+a,to:e.attribValueStartsAt+r,offset:0},i),i.forEach((e=>{t.report({...e,ruleId:"attribute-validate-class"})}))}else t.report({ruleId:"attribute-validate-class",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function Xa(t){return{attribute(e){"classid"===e.attribName&&("object"!==e.parent.tagName?t.report({ruleId:"attribute-validate-classid",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}):ya(e.attribValueRaw,{offset:e.attribValueStartsAt,multipleOK:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-classid"})})))}}}function Ya(t){return{attribute(e){if("clear"===e.attribName){"br"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-clear",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});const{charStart:a,charEnd:r,errorArr:i}=k(e.attribValueRaw,e.attribValueStartsAt);"number"!=typeof a||"number"!=typeof r||["left","all","right","none"].includes(t.str.slice(e.attribValueStartsAt+a,e.attribValueStartsAt+r))||i.push({idxFrom:e.attribValueStartsAt+a,idxTo:e.attribValueStartsAt+r,message:"Should be: left|all|right|none.",fix:null}),i.forEach((e=>{t.report({...e,ruleId:"attribute-validate-clear"})}))}}}}function tr(t){return{attribute(e){if("code"===e.attribName)if("applet"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-code",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-code"})}))}else t.report({ruleId:"attribute-validate-code",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function er(t){return{attribute(e){"codebase"===e.attribName&&(["applet","object"].includes(e.parent.tagName)?ya(e.attribValueRaw,{offset:e.attribValueStartsAt,multipleOK:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-codebase"})})):t.report({ruleId:"attribute-validate-codebase",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}))}}}function ar(t){return{attribute(e){if("codetype"===e.attribName){"object"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-codetype",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});K(e.attribValueRaw,e.attribValueStartsAt,{quickPermittedValues:["application/javascript","application/json","application/x-www-form-urlencoded","application/xml","application/zip","application/pdf","application/sql","application/graphql","application/ld+json","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.oasis.opendocument.text","application/zstd","audio/mpeg","audio/ogg","multipart/form-data","text/css","text/html","text/xml","text/csv","text/plain","image/png","image/jpeg","image/gif","application/vnd.api+json"],permittedValues:Object.keys(g),canBeCommaSeparated:!1,noSpaceAfterComma:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-codetype"})}))}}}}function rr(t){return{attribute(e){if("color"===e.attribName)if(["basefont","font"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-color",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){Ra(e.attribValueRaw,e.attribValueStartsAt,{namedCssLevel1OK:!0,namedCssLevel2PlusOK:!0,hexThreeOK:!1,hexFourOK:!1,hexSixOK:!0,hexEightOK:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-color"})}))}else t.report({ruleId:"attribute-validate-color",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function ir(t){return{attribute(e){if("cols"===e.attribName)if(["frameset","textarea"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-cols",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){let a=[];"frameset"===e.parent.tagName?a=Pa(e.attribValueRaw,e.attribValueStartsAt,{whitelistValues:["*"],theOnlyGoodUnits:["%"],badUnits:["px"],noUnitsIsFine:!0,canBeCommaSeparated:!0,type:"rational",customGenericValueError:"Should be: pixels|%|*."}):"textarea"===e.parent.tagName&&(a=Pa(e.attribValueRaw,e.attribValueStartsAt,{type:"integer",theOnlyGoodUnits:[],customGenericValueError:"Should be integer, no units."})),Array.isArray(a)&&a.length&&a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-cols"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function sr(t){return{attribute(e){if("colspan"===e.attribName){["th","td"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-colspan",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});Pa(e.attribValueRaw,e.attribValueStartsAt,{type:"integer",theOnlyGoodUnits:[],customGenericValueError:"Should be integer, no units."}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-colspan"})}))}}}}function nr(t,e){return{attribute(a){const r=[];"compact"===a.attribName&&(["dir","dl","menu","ol","ul"].includes(a.parent.tagName)?Ha(a,t,r,{xhtml:!!e,enforceSiblingAttributes:null}):r.push({idxFrom:a.attribStarts,idxTo:a.attribEnds,message:`Tag "${a.parent.tagName}" can't have attribute "${a.attribName}".`,fix:null}),r.length&&r.forEach((e=>{t.report({...e,ruleId:"attribute-validate-compact"})})))}}}function or(t){return{attribute(e){if("content"===e.attribName){"meta"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-content",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-content"})}))}}}}function dr(t){return{attribute(e){if("coords"===e.attribName)if(["area","a"].includes(e.parent.tagName))if(Array.isArray(e.parent.attribs)&&e.parent.attribs.length&&e.parent.attribs.some((t=>"shape"===t.attribName))){const a=e.parent.attribs.filter((t=>"shape"===t.attribName))[0];let r=null;"rect"===a.attribValueRaw?r=4:"circle"===a.attribValueRaw?r=3:"poly"===a.attribValueRaw&&(r="even");const i=Pa(e.attribValueRaw,e.attribValueStartsAt,{whitelistValues:[],theOnlyGoodUnits:[],badUnits:[],noUnitsIsFine:!0,canBeCommaSeparated:!0,enforceCount:r,type:"integer",customGenericValueError:"Should be integer, no units."});Array.isArray(i)&&i.length&&i.forEach((e=>{t.report({...e,ruleId:"attribute-validate-coords"})}))}else t.report({ruleId:"attribute-validate-coords",idxFrom:e.parent.start,idxTo:e.parent.end,message:'Missing "shape" attribute.',fix:null});else t.report({ruleId:"attribute-validate-coords",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null})}}}function lr(t){return{attribute(e){"data"===e.attribName&&("object"!==e.parent.tagName?t.report({ruleId:"attribute-validate-data",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}):ya(e.attribValueRaw,{offset:e.attribValueStartsAt,multipleOK:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-data"})})))}}}function cr(t){return{attribute(e){if("datetime"===e.attribName){["del","ins"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-datetime",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});K(e.attribValueRaw,e.attribValueStartsAt,{quickPermittedValues:[U],canBeCommaSeparated:!1,noSpaceAfterComma:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-datetime"})}))}}}}function ur(t,e){return{attribute(a){const r=[];"declare"===a.attribName&&("object"!==a.parent.tagName?r.push({idxFrom:a.attribStarts,idxTo:a.attribEnds,message:`Tag "${a.parent.tagName}" can't have attribute "${a.attribName}".`,fix:null}):Ha(a,t,r,{xhtml:!!e,enforceSiblingAttributes:null}),r.length&&r.forEach((e=>{t.report({...e,ruleId:"attribute-validate-declare"})})))}}}function br(t,e){return{attribute(a){const r=[];"defer"===a.attribName&&("script"!==a.parent.tagName?r.push({idxFrom:a.attribStarts,idxTo:a.attribEnds,message:`Tag "${a.parent.tagName}" can't have attribute "${a.attribName}".`,fix:null}):Ha(a,t,r,{xhtml:!!e,enforceSiblingAttributes:null}),r.length&&r.forEach((e=>{t.report({...e,ruleId:"attribute-validate-defer"})})))}}}function mr(t){return{attribute(e){if("dir"===e.attribName){["applet","base","basefont","br","frame","frameset","iframe","param","script"].includes(e.parent.tagName)&&t.report({ruleId:"attribute-validate-dir",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});K(e.attribValueRaw,e.attribValueStartsAt,{permittedValues:["ltr","rtl"],canBeCommaSeparated:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-dir"})}))}}}}function hr(t,e){return{attribute(a){const r=[];"disabled"===a.attribName&&(["button","input","optgroup","option","select","textarea"].includes(a.parent.tagName)?Ha(a,t,r,{xhtml:!!e,enforceSiblingAttributes:null}):r.push({idxFrom:a.attribStarts,idxTo:a.attribEnds,message:`Tag "${a.parent.tagName}" can't have attribute "${a.attribName}".`,fix:null}),r.length&&r.forEach((e=>{t.report({...e,ruleId:"attribute-validate-disabled"})})))}}}function fr(t){return{attribute(e){if("enctype"===e.attribName){"form"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-enctype",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});K(e.attribValueRaw,e.attribValueStartsAt,{quickPermittedValues:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],permittedValues:Object.keys(g),canBeCommaSeparated:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-enctype"})}))}}}}function pr(t){return{attribute(e){if("face"===e.attribName){"font"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-face",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-face"})}))}}}}function gr(t){return{attribute(e){if("for"===e.attribName)if("label"!==e.parent.tagName)t.report({ruleId:"attribute-validate-for",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});else if(e.attribValueStartsAt&&e.attribValueEndsAt){const{charStart:a,charEnd:r,errorArr:i}=k(e.attribValueRaw,e.attribValueStartsAt);if("number"==typeof a&&"number"==typeof r){const t=e.attribValueRaw.slice(a,r);let s="Wrong id name.",n=null,o=a+e.attribValueStartsAt,d=r+e.attribValueStartsAt;if(Number.isInteger(a)&&!Na.test(t)){if(Array.from(t).some((t=>!t.trim().length)))s="Should be one value, no spaces.";else if(t.includes("#")){s="Remove hash.";const t=e.attribValueRaw.indexOf("#");n={ranges:[[e.attribValueStartsAt+t,e.attribValueStartsAt+t+1]]},o=e.attribValueStartsAt+t,d=e.attribValueStartsAt+t+1}i.push({ruleId:"attribute-validate-for",idxFrom:o,idxTo:d,message:s,fix:n})}}i.forEach((e=>{t.report({...e,ruleId:"attribute-validate-for"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function xr(t){return{attribute(e){if("frame"===e.attribName){"table"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-frame",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});K(e.attribValueRaw,e.attribValueStartsAt,{permittedValues:["void","above","below","hsides","lhs","rhs","vsides","box","border"],canBeCommaSeparated:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-frame"})}))}}}}function vr(t){return{attribute(e){if("frameborder"===e.attribName){["frame","iframe"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-frameborder",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});K(e.attribValueRaw,e.attribValueStartsAt,{permittedValues:["0","1"],canBeCommaSeparated:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-frameborder"})}))}}}}function Ar(t){return{attribute(e){if("headers"===e.attribName)if(["td","th"].includes(e.parent.tagName))if(e.attribValueStartsAt&&e.attribValueEndsAt){const{charStart:a,charEnd:r,errorArr:i}=k(e.attribValueRaw,e.attribValueStartsAt);Za(t.str,{typeName:"id",from:e.attribValueStartsAt+a,to:e.attribValueStartsAt+r,offset:0},i),i.forEach((e=>{t.report({...e,ruleId:"attribute-validate-headers"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null});else t.report({ruleId:"attribute-validate-headers",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null})}}}function Nr(t){return{attribute(e){if("height"===e.attribName){["iframe","td","th","img","object","applet"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-height",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});Pa(e.attribValueRaw,e.attribValueStartsAt,{badUnits:["px"],theOnlyGoodUnits:["%"],noUnitsIsFine:!0,customGenericValueError:'Should be "pixels|%".'}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-height"})}))}}}}function Tr(t){return{attribute(e){"href"===e.attribName&&(["a","area","link","base"].includes(e.parent.tagName)?ya(e.attribValueRaw,{offset:e.attribValueStartsAt,multipleOK:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-href"})})):t.report({ruleId:"attribute-validate-href",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}))}}}function Er(t){return{attribute(e){if("hreflang"===e.attribName){["a","link"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-hreflang",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});const{charStart:a,charEnd:r,errorArr:i}=k(e.attribValueRaw,e.attribValueStartsAt),{message:s}=A(e.attribValueRaw.slice(a,r));s&&i.push({idxFrom:e.attribValueStartsAt+a,idxTo:e.attribValueStartsAt+r,message:s,fix:null}),i.forEach((e=>{t.report({...e,ruleId:"attribute-validate-hreflang"})}))}}}}function Sr(t){return{attribute(e){if("hspace"===e.attribName){["applet","img","object"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-hspace",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});Pa(e.attribValueRaw,e.attribValueStartsAt,{theOnlyGoodUnits:[],noUnitsIsFine:!0}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-hspace"})}))}}}}function Ir(t){return{attribute(e){if("http-equiv"===e.attribName){"meta"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-http-equiv",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});K(e.attribValueRaw,e.attribValueStartsAt,{permittedValues:["content-type","default-style","refresh","X-UA-Compatible"],canBeCommaSeparated:!1,caseInsensitive:!0}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-http-equiv"})}))}}}}function Vr(t){return{attribute(e){if("id"===e.attribName)if(["base","head","html","meta","script","style","title"].includes(e.parent.tagName))t.report({ruleId:"attribute-validate-id",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});else if(e.attribValueStartsAt&&e.attribValueEndsAt){const{charStart:a,charEnd:r,errorArr:i}=k(e.attribValueRaw,e.attribValueStartsAt);Za(t.str,{typeName:e.attribName,from:e.attribValueStartsAt+a,to:e.attribValueStartsAt+r,offset:0},i),i.forEach((e=>{t.report({...e,ruleId:"attribute-validate-id"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function yr(t,e){return{attribute(a){const r=[];"ismap"===a.attribName&&(["img","input"].includes(a.parent.tagName)?Ha(a,t,r,{xhtml:!!e,enforceSiblingAttributes:null}):r.push({idxFrom:a.attribStarts,idxTo:a.attribEnds,message:`Tag "${a.parent.tagName}" can't have attribute "${a.attribName}".`,fix:null}),r.length&&r.forEach((e=>{t.report({...e,ruleId:"attribute-validate-ismap"})})))}}}function Fr(t){return{attribute(e){if("label"===e.attribName)if(["option","optgroup"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-label",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-label"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function wr(t){return{attribute(e){if("lang"===e.attribName){["applet","base","basefont","br","frame","frameset","iframe","param","script"].includes(e.parent.tagName)&&t.report({ruleId:"attribute-validate-lang",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});const{charStart:a,charEnd:r,errorArr:i}=k(e.attribValueRaw,e.attribValueStartsAt),{message:s}=A(e.attribValueRaw.slice(a,r));s&&i.push({idxFrom:e.attribValueStartsAt+a,idxTo:e.attribValueStartsAt+r,message:s,fix:null}),i.forEach((e=>{t.report({...e,ruleId:"attribute-validate-lang"})}))}}}}function Cr(t){return{attribute(e){if("language"===e.attribName)if("script"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-language",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-language"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function Rr(t){return{attribute(e){if("link"===e.attribName)if("body"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-link",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){Ra(e.attribValueRaw,e.attribValueStartsAt,{namedCssLevel1OK:!0,namedCssLevel2PlusOK:!0,hexThreeOK:!1,hexFourOK:!1,hexSixOK:!0,hexEightOK:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-link"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function Or(t){return{attribute(e){if("longdesc"===e.attribName)if(["img","frame","iframe"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-longdesc",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-longdesc"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function $r(t){return{attribute(e){if("marginheight"===e.attribName){["frame","iframe"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-marginheight",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});Pa(e.attribValueRaw,e.attribValueStartsAt,{theOnlyGoodUnits:[],noUnitsIsFine:!0}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-marginheight"})}))}}}}function kr(t){return{attribute(e){if("marginwidth"===e.attribName){["frame","iframe"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-marginwidth",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});Pa(e.attribValueRaw,e.attribValueStartsAt,{theOnlyGoodUnits:[],noUnitsIsFine:!0}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-marginwidth"})}))}}}}function Br(t){return{attribute(e){if("maxlength"===e.attribName){"input"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-maxlength",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});Pa(e.attribValueRaw,e.attribValueStartsAt,{type:"integer",theOnlyGoodUnits:[],customGenericValueError:"Should be integer, no units."}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-maxlength"})}))}}}}function Lr(t){return{attribute(e){if("media"===e.attribName){["style","link"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-media",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});const{charStart:a,charEnd:r,errorArr:i}=k(e.attribValueRaw,e.attribValueStartsAt);i.concat(N(e.attribValueRaw.slice(a,r),{offset:e.attribValueStartsAt})).forEach((e=>{t.report({...e,ruleId:"attribute-validate-media"})}))}}}}function Mr(t){return{attribute(e){if("method"===e.attribName){"form"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-method",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});K(e.attribValueRaw,e.attribValueStartsAt,{permittedValues:["get","post"],canBeCommaSeparated:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-method"})}))}}}}function jr(t,e){return{attribute(a){const r=[];"multiple"===a.attribName&&("select"!==a.parent.tagName?r.push({idxFrom:a.attribStarts,idxTo:a.attribEnds,message:`Tag "${a.parent.tagName}" can't have attribute "${a.attribName}".`,fix:null}):Ha(a,t,r,{xhtml:!!e,enforceSiblingAttributes:null}),r.length&&r.forEach((e=>{t.report({...e,ruleId:"attribute-validate-multiple"})})))}}}function Kr(t){return{attribute(e){if("name"===e.attribName)if(["button","textarea","applet","select","form","frame","iframe","img","a","input","object","map","param","meta"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-name",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-name"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function Pr(t,e){return{attribute(a){const r=[];"nohref"===a.attribName&&("area"!==a.parent.tagName?r.push({idxFrom:a.attribStarts,idxTo:a.attribEnds,message:`Tag "${a.parent.tagName}" can't have attribute "${a.attribName}".`,fix:null}):Ha(a,t,r,{xhtml:!!e,enforceSiblingAttributes:null}),r.length&&r.forEach((e=>{t.report({...e,ruleId:"attribute-validate-nohref"})})))}}}function Ur(t,e){return{attribute(a){const r=[];"noresize"===a.attribName&&("frame"!==a.parent.tagName?r.push({idxFrom:a.attribStarts,idxTo:a.attribEnds,message:`Tag "${a.parent.tagName}" can't have attribute "${a.attribName}".`,fix:null}):Ha(a,t,r,{xhtml:!!e,enforceSiblingAttributes:null}),r.length&&r.forEach((e=>{t.report({...e,ruleId:"attribute-validate-noresize"})})))}}}function _r(t,e){return{attribute(a){const r=[];"noshade"===a.attribName&&("hr"!==a.parent.tagName?r.push({idxFrom:a.attribStarts,idxTo:a.attribEnds,message:`Tag "${a.parent.tagName}" can't have attribute "${a.attribName}".`,fix:null}):Ha(a,t,r,{xhtml:!!e,enforceSiblingAttributes:null}),r.length&&r.forEach((e=>{t.report({...e,ruleId:"attribute-validate-noshade"})})))}}}function Gr(t,e){return{attribute(a){const r=[];"nowrap"===a.attribName&&(["td","th"].includes(a.parent.tagName)?Ha(a,t,r,{xhtml:!!e,enforceSiblingAttributes:null}):r.push({idxFrom:a.attribStarts,idxTo:a.attribEnds,message:`Tag "${a.parent.tagName}" can't have attribute "${a.attribName}".`,fix:null}),r.length&&r.forEach((e=>{t.report({...e,ruleId:"attribute-validate-nowrap"})})))}}}function qr(t){return{attribute(e){if("object"===e.attribName)if("applet"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-object",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-object"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function Wr(t,e){const{errorArr:a}=k(t,e);return a}function Dr(t){return{attribute(e){if("onblur"===e.attribName)if(["a","area","button","input","label","select","textarea"].includes(e.parent.tagName))if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-onblur"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null});else t.report({ruleId:"attribute-validate-onblur",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null})}}}function Hr(t){return{attribute(e){if("onchange"===e.attribName)if(["input","select","textarea"].includes(e.parent.tagName))if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-onchange"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null});else t.report({ruleId:"attribute-validate-onchange",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null})}}}function zr(t){return{attribute(e){if("onclick"===e.attribName)if(["applet","base","basefont","bdo","br","font","frame","frameset","head","html","iframe","isindex","meta","param","script","style","title"].includes(e.parent.tagName))t.report({ruleId:"attribute-validate-onclick",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});else if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-onclick"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function Qr(t){return{attribute(e){if("ondblclick"===e.attribName)if(["applet","base","basefont","bdo","br","font","frame","frameset","head","html","iframe","isindex","meta","param","script","style","title"].includes(e.parent.tagName))t.report({ruleId:"attribute-validate-ondblclick",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});else if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-ondblclick"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function Zr(t){return{attribute(e){if("onfocus"===e.attribName)if(["a","area","button","input","label","select","textarea"].includes(e.parent.tagName))if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-onfocus"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null});else t.report({ruleId:"attribute-validate-onfocus",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null})}}}function Jr(t){return{attribute(e){if("onkeydown"===e.attribName)if(["applet","base","basefont","bdo","br","font","frame","frameset","head","html","iframe","isindex","meta","param","script","style","title"].includes(e.parent.tagName))t.report({ruleId:"attribute-validate-onkeydown",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});else if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-onkeydown"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function Xr(t){return{attribute(e){if("onkeypress"===e.attribName)if(["applet","base","basefont","bdo","br","font","frame","frameset","head","html","iframe","isindex","meta","param","script","style","title"].includes(e.parent.tagName))t.report({ruleId:"attribute-validate-onkeypress",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});else if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-onkeypress"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function Yr(t){return{attribute(e){if("onkeyup"===e.attribName)if(["applet","base","basefont","bdo","br","font","frame","frameset","head","html","iframe","isindex","meta","param","script","style","title"].includes(e.parent.tagName))t.report({ruleId:"attribute-validate-onkeyup",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});else if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-onkeyup"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function ti(t){return{attribute(e){if("onload"===e.attribName)if(["frameset","body"].includes(e.parent.tagName))if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-onload"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null});else t.report({ruleId:"attribute-validate-onload",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null})}}}function ei(t){return{attribute(e){if("onmousedown"===e.attribName)if(["applet","base","basefont","bdo","br","font","frame","frameset","head","html","iframe","isindex","meta","param","script","style","title"].includes(e.parent.tagName))t.report({ruleId:"attribute-validate-onmousedown",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});else if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-onmousedown"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function ai(t){return{attribute(e){if("onmousemove"===e.attribName)if(["applet","base","basefont","bdo","br","font","frame","frameset","head","html","iframe","isindex","meta","param","script","style","title"].includes(e.parent.tagName))t.report({ruleId:"attribute-validate-onmousemove",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});else if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-onmousemove"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function ri(t){return{attribute(e){if("onmouseout"===e.attribName)if(["applet","base","basefont","bdo","br","font","frame","frameset","head","html","iframe","isindex","meta","param","script","style","title"].includes(e.parent.tagName))t.report({ruleId:"attribute-validate-onmouseout",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});else if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-onmouseout"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function ii(t){return{attribute(e){if("onmouseover"===e.attribName)if(["applet","base","basefont","bdo","br","font","frame","frameset","head","html","iframe","isindex","meta","param","script","style","title"].includes(e.parent.tagName))t.report({ruleId:"attribute-validate-onmouseover",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});else if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-onmouseover"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function si(t){return{attribute(e){if("onmouseup"===e.attribName)if(["applet","base","basefont","bdo","br","font","frame","frameset","head","html","iframe","isindex","meta","param","script","style","title"].includes(e.parent.tagName))t.report({ruleId:"attribute-validate-onmouseup",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});else if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-onmouseup"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function ni(t){return{attribute(e){if("onreset"===e.attribName)if("form"!==e.parent.tagName)t.report({ruleId:"attribute-validate-onreset",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});else if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-onreset"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function oi(t){return{attribute(e){if("onsubmit"===e.attribName)if("form"!==e.parent.tagName)t.report({ruleId:"attribute-validate-onsubmit",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});else if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-onsubmit"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function di(t){return{attribute(e){if("onselect"===e.attribName)if(["input","textarea"].includes(e.parent.tagName))if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-onselect"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null});else t.report({ruleId:"attribute-validate-onselect",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null})}}}function li(t){return{attribute(e){if("onunload"===e.attribName)if(["frameset","body"].includes(e.parent.tagName))if(e.attribValueStartsAt&&e.attribValueEndsAt){Wr(e.attribValueRaw,e.attribValueStartsAt).forEach((e=>{t.report({...e,ruleId:"attribute-validate-onunload"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null});else t.report({ruleId:"attribute-validate-onunload",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null})}}}function ci(t){return{attribute(e){"profile"===e.attribName&&("head"!==e.parent.tagName?t.report({ruleId:"attribute-validate-profile",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}):ya(e.attribValueRaw,{offset:e.attribValueStartsAt,multipleOK:!0}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-profile"})})))}}}function ui(t){return{attribute(e){if("prompt"===e.attribName)if("isindex"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-prompt",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-prompt"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function bi(t,e){return{attribute(a){const r=[];"readonly"===a.attribName&&(["textarea","input"].includes(a.parent.tagName)?Ha(a,t,r,{xhtml:!!e,enforceSiblingAttributes:null}):r.push({idxFrom:a.attribStarts,idxTo:a.attribEnds,message:`Tag "${a.parent.tagName}" can't have attribute "${a.attribName}".`,fix:null}),r.length&&r.forEach((e=>{t.report({...e,ruleId:"attribute-validate-readonly"})})))}}}function mi(t,e=!1){return{attribute(a){if("rel"===a.attribName){["a","link"].includes(a.parent.tagName)||t.report({ruleId:"attribute-validate-rel",idxFrom:a.attribStarts,idxTo:a.attribEnds,message:`Tag "${a.parent.tagName}" can't have attribute "${a.attribName}".`,fix:null});K(a.attribValueRaw,a.attribValueStartsAt,{permittedValues:G,canBeCommaSeparated:!1,caseInsensitive:!e}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-rel"})}))}}}}function hi(t,e=!1){return{attribute(a){if("rev"===a.attribName){["a","link"].includes(a.parent.tagName)||t.report({ruleId:"attribute-validate-rev",idxFrom:a.attribStarts,idxTo:a.attribEnds,message:`Tag "${a.parent.tagName}" can't have attribute "${a.attribName}".`,fix:null});K(a.attribValueRaw,a.attribValueStartsAt,{permittedValues:G,canBeCommaSeparated:!1,caseInsensitive:!e}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-rev"})}))}}}}function fi(t){return{attribute(e){if("rows"===e.attribName){["frameset","textarea"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-rows",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});let a=[];e.attribValueStartsAt&&e.attribValueEndsAt?"frameset"===e.parent.tagName?a=Pa(e.attribValueRaw,e.attribValueStartsAt,{whitelistValues:["*"],theOnlyGoodUnits:["%"],badUnits:["px"],noUnitsIsFine:!0,canBeCommaSeparated:!0,type:"rational",customGenericValueError:"Should be: pixels|%|*."}):"textarea"===e.parent.tagName&&(a=Pa(e.attribValueRaw,e.attribValueStartsAt,{type:"integer",theOnlyGoodUnits:[],customGenericValueError:"Should be integer, no units."})):t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null}),Array.isArray(a)&&a.length&&a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-rows"})}))}}}}function pi(t){return{attribute(e){if("rowspan"===e.attribName){["th","td"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-rowspan",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});Pa(e.attribValueRaw,e.attribValueStartsAt,{type:"integer",theOnlyGoodUnits:[],customGenericValueError:"Should be integer, no units."}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-rowspan"})}))}}}}function gi(t){return{attribute(e){if("rules"===e.attribName){"table"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-rules",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});K(e.attribValueRaw,e.attribValueStartsAt,{permittedValues:["none","groups","rows","cols","all"],canBeCommaSeparated:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-rules"})}))}}}}function xi(t){return{attribute(e){if("scheme"===e.attribName)if("meta"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-scheme",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-scheme"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function vi(t){return{attribute(e){if("scope"===e.attribName){["td","th"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-scope",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});K(e.attribValueRaw,e.attribValueStartsAt,{permittedValues:["row","col","rowgroup","colgroup"],canBeCommaSeparated:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-scope"})}))}}}}function Ai(t){return{attribute(e){if("scrolling"===e.attribName){["frame","iframe"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-scrolling",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});K(e.attribValueRaw,e.attribValueStartsAt,{permittedValues:["auto","yes","no"],canBeCommaSeparated:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-scrolling"})}))}}}}function Ni(t,e){return{attribute(a){const r=[];"selected"===a.attribName&&("option"!==a.parent.tagName?r.push({idxFrom:a.attribStarts,idxTo:a.attribEnds,message:`Tag "${a.parent.tagName}" can't have attribute "${a.attribName}".`,fix:null}):Ha(a,t,r,{xhtml:!!e,enforceSiblingAttributes:null}),r.length&&r.forEach((e=>{t.report({...e,ruleId:"attribute-validate-selected"})})))}}}function Ti(t){return{attribute(e){if("shape"===e.attribName){["area","a"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-shape",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});K(e.attribValueRaw,e.attribValueStartsAt,{permittedValues:["default","rect","circle","poly"],canBeCommaSeparated:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-shape"})}))}}}}function Ei(t){return{attribute(e){if("size"===e.attribName)if(["hr","font","input","basefont","select"].includes(e.parent.tagName)){const{charStart:a,charEnd:r,errorArr:i}=k(e.attribValueRaw,e.attribValueStartsAt);if(i.forEach((e=>{t.report({...e,ruleId:"attribute-validate-size"})})),"number"==typeof a&&"number"==typeof r){const i=e.attribValueRaw.slice(a,r);if(["hr","input","select"].includes(e.parent.tagName))Pa(i,e.attribValueStartsAt+a,{type:"integer",negativeOK:!1,theOnlyGoodUnits:[],skipWhitespaceChecks:!0}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-size"})}));else if(["font","basefont"].includes(e.parent.tagName)&&!i.match(_)){const s=Pa(i,e.attribValueStartsAt+a,{type:"integer",negativeOK:!1,theOnlyGoodUnits:[],skipWhitespaceChecks:!0,customGenericValueError:"Should be integer 1-7, plus/minus are optional."});s.length||s.push({idxFrom:e.attribValueStartsAt+a,idxTo:e.attribValueStartsAt+r,message:"Should be integer 1-7, plus/minus are optional.",fix:null}),s.forEach((e=>{t.report({...e,ruleId:"attribute-validate-size"})}))}}}else t.report({ruleId:"attribute-validate-size",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null})}}}function Si(t){return{attribute(e){if("span"===e.attribName){["col","colgroup"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-span",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});Pa(e.attribValueRaw,e.attribValueStartsAt,{type:"integer",theOnlyGoodUnits:[],customGenericValueError:"Should be integer, no units.",zeroOK:!1,customPxMessage:"Columns number is not in pixels."}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-span"})}))}}}}function Ii(t){return{attribute(e){"src"===e.attribName&&(["script","input","frame","iframe","img"].includes(e.parent.tagName)?ya(e.attribValueRaw,{offset:e.attribValueStartsAt,multipleOK:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-src"})})):t.report({ruleId:"attribute-validate-src",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}))}}}function Vi(t){return{attribute(e){if("standby"===e.attribName)if("object"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-standby",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-standby"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function yi(t){return{attribute(e){if("start"===e.attribName){"ol"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-start",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});Pa(e.attribValueRaw,e.attribValueStartsAt,{type:"integer",theOnlyGoodUnits:[],customGenericValueError:"Should be integer, no units.",zeroOK:!1,customPxMessage:"Starting sequence number is not in pixels."}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-start"})}))}}}}function Fi(t,e){let a,r="";if(void 0!==t.properties?(a=t.properties,r="css-rule-malformed"):void 0!==t.attribValue&&(a=t.attribValue,r="attribute-validate-style"),!a||!r)return;let i=[];if(a.some((t=>void 0!==t.property))&&(i=a.filter((t=>void 0!==t.property))),i&&i.length){for(let t=i.length-1;t--;)null===i[t].semi&&i[t].value&&e.report({ruleId:r,idxFrom:i[t].start,idxTo:i[t].end,message:"Add a semicolon.",fix:{ranges:[[i[t].end,i[t].end,";"]]}});i.forEach((t=>{t.important&&"!important"!==t.important&&e.report({ruleId:r,idxFrom:t.importantStarts,idxTo:t.importantEnds,message:"Malformed !important.",fix:{ranges:[[t.importantStarts,t.importantEnds,"!important"]]}}),t.colon&&t.propertyEnds&&t.propertyEnds<t.colon&&e.report({ruleId:r,idxFrom:t.start,idxTo:t.end,message:"Gap in front of semicolon.",fix:{ranges:[[t.propertyEnds,t.colon]]}}),t.semi&&(t.importantEnds||t.valueEnds)&&(t.importantEnds||t.valueEnds)<t.semi&&e.report({ruleId:r,idxFrom:t.start,idxTo:t.end,message:"Gap in front of semi.",fix:{ranges:[[t.importantEnds||t.valueEnds,t.semi]]}}),t.colon&&":"!==e.str[t.colon]&&e.report({ruleId:r,idxFrom:t.start,idxTo:t.end,message:"Mis-typed colon.",fix:{ranges:[[t.colon,t.colon+1,":"]]}}),!t.semi||t.propertyStarts||t.valueStarts||t.importantStarts||e.report({ruleId:r,idxFrom:t.start,idxTo:t.end,message:"Rogue semicolon.",fix:{ranges:[[t.semi,t.semi+1]]}}),t.colon&&t.valueStarts&&(t.valueStarts>t.colon+2&&e.report({ruleId:r,idxFrom:t.start,idxTo:t.end,message:"Remove whitespace.",fix:{ranges:[[t.colon+2,t.valueStarts]]}}),t.valueStarts>t.colon+1&&!e.str[t.colon+1].trim()&&" "!==e.str[t.colon+1]&&e.report({ruleId:r,idxFrom:t.colon+1,idxTo:t.valueStarts,message:"Replace whitespace.",fix:{ranges:[[t.colon+1,t.valueStarts," "]]}}))}))}if(a&&Array.isArray(a)&&a.length)for(let t=0,i=a.length;t<i;t++)if(t&&t!==i-1||"text"!==a[t].type||"attribute-validate-style"!==r||e.report(1===i?{ruleId:r,idxFrom:a[t].start,idxTo:a[t].end,message:"Missing value.",fix:null}:{ruleId:r,idxFrom:a[t].start,idxTo:a[t].end,message:"Remove whitespace.",fix:{ranges:[[a[t].start,a[t].end]]}}),null===a[t].value)if(null!==a[t].important&&null===a[t].property){let i=!1;if(t)for(let s=a.length;s--;)if(s!==t&&a[t].important&&!a[t].propertyStarts&&!a[t].valueStarts&&void 0!==a[s].property){if(!a[s].semi||a[s].importantStarts)break;{const t=a[s].semi,n=a[s].semi+1;let o;" "!==e.str[a[s].semi+1]&&(o=" "),e.report({ruleId:r,idxFrom:t,idxTo:n,message:"Delete the semicolon.",fix:{ranges:[[t,n,o]]}}),i=!0}}void 0===a[t].property||i||e.report({ruleId:r,idxFrom:a[t].start,idxTo:a[t].end,message:"Missing value.",fix:null})}else(a[t].property||a[t].value||a[t].important)&&e.report({ruleId:r,idxFrom:a[t].start,idxTo:a[t].end,message:"Missing value.",fix:null})}function wi(t,...e){return{attribute(e){"style"===e.attribName&&(["base","basefont","head","html","meta","param","script","style","title"].includes(e.parent.tagName)&&t.report({ruleId:"attribute-validate-style",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),Fi(e,t))}}}function Ci(t){return{attribute(e){if("summary"===e.attribName)if("table"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-summary",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-summary"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function Ri(t){return{attribute(e){if("tabindex"===e.attribName){["a","area","button","input","object","select","textarea"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-tabindex",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});Pa(e.attribValueRaw,e.attribValueStartsAt,{type:"integer",theOnlyGoodUnits:[],customGenericValueError:"Should be integer, no units.",zeroOK:!0,customPxMessage:"Tabbing order number should not be in pixels.",maxValue:32767}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-tabindex"})}))}}}}function Oi(t){return{attribute(e){if("target"===e.attribName)if(["a","area","base","form","link"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-target",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-target"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function $i(t){return{attribute(e){if("text"===e.attribName)if("body"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-text",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){Ra(e.attribValueRaw,e.attribValueStartsAt,{namedCssLevel1OK:!0,namedCssLevel2PlusOK:!0,hexThreeOK:!1,hexFourOK:!1,hexSixOK:!0,hexEightOK:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-text"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function ki(t){return{attribute(e){if("title"===e.attribName)if(["base","basefont","head","html","meta","param","script","title"].includes(e.parent.tagName)&&t.report({ruleId:"attribute-validate-title",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-title"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function Bi(t){return{attribute(e){"type"===e.attribName&&(["a","link","object","param","script","style","input","li","ol","ul","button"].includes(e.parent.tagName)?["a","link","object","param","script","style"].includes(e.parent.tagName)?K(e.attribValueRaw,e.attribValueStartsAt,{quickPermittedValues:["application/javascript","application/json","application/x-www-form-urlencoded","application/xml","application/zip","application/pdf","application/sql","application/graphql","application/ld+json","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.oasis.opendocument.text","application/zstd","audio/mpeg","audio/ogg","multipart/form-data","text/css","text/html","text/xml","text/csv","text/plain","image/png","image/jpeg","image/gif","application/vnd.api+json"],permittedValues:Object.keys(g),canBeCommaSeparated:!1,noSpaceAfterComma:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-type"})})):"input"===e.parent.tagName?K(e.attribValueRaw,e.attribValueStartsAt,{quickPermittedValues:["text","password","checkbox","radio","submit","reset","file","hidden","image","button"],canBeCommaSeparated:!1,noSpaceAfterComma:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-type"})})):"li"===e.parent.tagName?K(e.attribValueRaw,e.attribValueStartsAt,{quickPermittedValues:["disc","square","circle","1","a","A","i","I"],canBeCommaSeparated:!1,noSpaceAfterComma:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-type"})})):"ol"===e.parent.tagName?K(e.attribValueRaw,e.attribValueStartsAt,{quickPermittedValues:["1","a","A","i","I"],canBeCommaSeparated:!1,noSpaceAfterComma:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-type"})})):"ul"===e.parent.tagName?K(e.attribValueRaw,e.attribValueStartsAt,{quickPermittedValues:["disc","square","circle"],canBeCommaSeparated:!1,noSpaceAfterComma:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-type"})})):"button"===e.parent.tagName&&K(e.attribValueRaw,e.attribValueStartsAt,{quickPermittedValues:["button","submit","reset"],canBeCommaSeparated:!1,noSpaceAfterComma:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-type"})})):t.report({ruleId:"attribute-validate-type",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}))}}}function Li(t){return{attribute(e){"usemap"===e.attribName&&(["img","input","object"].includes(e.parent.tagName)?ya(e.attribValueRaw,{offset:e.attribValueStartsAt,multipleOK:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-usemap"})})):t.report({ruleId:"attribute-validate-usemap",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}))}}}function Mi(t){return{attribute(e){"valign"===e.attribName&&(["col","colgroup","tbody","td","tfoot","th","thead","tr"].includes(e.parent.tagName)?K(e.attribValueRaw,e.attribValueStartsAt,{permittedValues:["top","middle","bottom","baseline"],canBeCommaSeparated:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-valign"})})):t.report({ruleId:"attribute-validate-valign",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}))}}}function ji(t){return{attribute(e){if("value"===e.attribName)if(["input","option","param","button","li"].includes(e.parent.tagName))if("li"===e.parent.tagName)Pa(e.attribValueRaw,e.attribValueStartsAt,{type:"integer",theOnlyGoodUnits:[],customGenericValueError:"Should be integer, no units.",zeroOK:!1,customPxMessage:"Sequence number should not be in pixels."}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-value"})}));else{const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-value"})}))}else t.report({ruleId:"attribute-validate-value",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null})}}}function Ki(t){return{attribute(e){"valuetype"===e.attribName&&("param"!==e.parent.tagName?t.report({ruleId:"attribute-validate-valuetype",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}):K(e.attribValueRaw,e.attribValueStartsAt,{permittedValues:["data","ref","object"],canBeCommaSeparated:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-valuetype"})})))}}}function Pi(t){return{attribute(e){if("version"===e.attribName)if("html"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-version",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){const{errorArr:a}=k(e.attribValueRaw,e.attribValueStartsAt);a.forEach((e=>{t.report({...e,ruleId:"attribute-validate-version"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function Ui(t){return{attribute(e){if("vlink"===e.attribName)if("body"!==e.parent.tagName&&t.report({ruleId:"attribute-validate-vlink",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}),e.attribValueStartsAt&&e.attribValueEndsAt){Ra(e.attribValueRaw,e.attribValueStartsAt,{namedCssLevel1OK:!0,namedCssLevel2PlusOK:!0,hexThreeOK:!1,hexFourOK:!1,hexSixOK:!0,hexEightOK:!1}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-vlink"})}))}else t.report({ruleId:`attribute-validate-${e.attribName.toLowerCase()}`,idxFrom:e.attribStarts,idxTo:e.attribEnds,message:"Missing value.",fix:null})}}}function _i(t){return{attribute(e){if("vspace"===e.attribName){["applet","img","object"].includes(e.parent.tagName)||t.report({ruleId:"attribute-validate-vspace",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null});Pa(e.attribValueRaw,e.attribValueStartsAt,{theOnlyGoodUnits:[],noUnitsIsFine:!0}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-vspace"})}))}}}}function Gi(t){return{attribute(e){"width"===e.attribName&&(["hr","iframe","img","object","table","td","th","applet","col","colgroup","pre"].includes(e.parent.tagName)?"pre"===e.parent.tagName?Pa(e.attribValueRaw,e.attribValueStartsAt,{theOnlyGoodUnits:[],noUnitsIsFine:!0}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-width"})})):["colgroup","col"].includes(e.parent.tagName)?Pa(e.attribValueRaw,e.attribValueStartsAt,{badUnits:["px"],theOnlyGoodUnits:["*","%"],noUnitsIsFine:!0}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-width"})})):Pa(e.attribValueRaw,e.attribValueStartsAt,{badUnits:["px"],noUnitsIsFine:!0}).forEach((e=>{t.report({...e,ruleId:"attribute-validate-width"})})):t.report({ruleId:"attribute-validate-width",idxFrom:e.attribStarts,idxTo:e.attribEnds,message:`Tag "${e.parent.tagName}" can't have attribute "${e.attribName}".`,fix:null}))}}}function qi(t){return{entity({idxFrom:e,idxTo:a}){Object.keys(T).includes(t.str.slice(e+1,a-1))&&t.report({ruleId:"bad-named-html-entity-not-email-friendly",message:"Email-unfriendly named HTML entity.",idxFrom:e,idxTo:a,fix:{ranges:[[e,a,`&${T[t.str.slice(e+1,a-1)]};`]]}})}}}const Wi=(t,...e)=>({text(a){let r="named";Array.isArray(e)&&["named","numeric"].includes(e[0])&&(r=e[0]),function(t,e,a,r){for(let i=0,s=t.length;i<s;i++)if((t[i].charCodeAt(0)>127||'<>"&'.includes(t[i]))&&(160!==t[i].charCodeAt(0)||!Object.keys(a.processedRulesConfig).includes("bad-character-non-breaking-space")||!D(a.processedRulesConfig["bad-character-non-breaking-space"]))){let s=E.encode(t[i],{useNamedReferences:"named"===r});Object.keys(T).includes(s.slice(1,s.length-1))&&(s=`&${T[s.slice(1,s.length-1)]};`);let n="";160===t[i].charCodeAt(0)?n=" no-break space":38===t[i].charCodeAt(0)?n=" ampersand":60===t[i].charCodeAt(0)?n=" less than":62===t[i].charCodeAt(0)?n=" greater than":34===t[i].charCodeAt(0)?n=" double quotes":163===t[i].charCodeAt(0)&&(n=" pound sign"),a.report({ruleId:"character-encode",message:`Unencoded${n} character.`,idxFrom:i+e,idxTo:i+1+e,fix:{ranges:[[i+e,i+1+e,s]]}})}}(a.value,a.start,t,r)}});function Di(t,e){const a={63:"questionMark",33:"exclamationMark",59:"semicolon",187:"rightDoubleAngleQuotMark",171:"leftDoubleAngleQuotMark"};return{text(r){const i={questionMark:{whitespaceLeft:"never",whitespaceRight:"always"},exclamationMark:{whitespaceLeft:"never",whitespaceRight:"always"},semicolon:{whitespaceLeft:"never",whitespaceRight:"always"},rightDoubleAngleQuotMark:{whitespaceLeft:"never",whitespaceRight:"always"},leftDoubleAngleQuotMark:{whitespaceLeft:"never",whitespaceRight:"always"},...e};for(let e=r.start;e<r.end;e++){const s=t.str[e].charCodeAt(0);if(a[String(s)]){const n=a[String(s)];if("exclamationMark"===n&&"-"===t.str[c(t.str,e)]&&"-"===t.str[c(t.str,c(t.str,e))])return;if("never"===i[n].whitespaceLeft&&e&&!t.str[e-1].trim().length){const a=u(t.str,e)?u(t.str,e)+1:0;t.report({ruleId:"character-unspaced-punctuation",idxFrom:a,idxTo:e,message:"Remove the whitespace.",fix:{ranges:[[a,e]]}})}"never"===i[n].whitespaceRight&&e<r.end-1&&!t.str[e+1].trim().length&&t.report({ruleId:"character-unspaced-punctuation",idxFrom:e+1,idxTo:c(t.str,e)||t.str.length,message:"Remove the whitespace.",fix:{ranges:[[e+1,c(t.str,e)||t.str.length]]}}),"always"===i[n].whitespaceLeft&&e&&t.str[e-1].trim().length&&t.report({ruleId:"character-unspaced-punctuation",idxFrom:e,idxTo:e+1,message:"Add a space.",fix:{ranges:[[e,e," "]]}}),"always"===i[n].whitespaceRight&&e<r.end-1&&t.str[e+1].trim().length&&t.report({ruleId:"character-unspaced-punctuation",idxFrom:e,idxTo:e+1,message:"Add a space.",fix:{ranges:[[e+1,e+1," "]]}})}}}}}function Hi(t){return{at(e){if("media"===e.identifier){N(e.query,{offset:e.queryStartsAt}).forEach((e=>{t.report({...e,ruleId:"media-malformed"})}))}}}}function zi(t){return{comment(e){if(e.closing){(function(t){if("simple"===t.kind&&"--\x3e"===t.value||"only"===t.kind&&"<![endif]--\x3e"===t.value||"not"===t.kind&&"\x3c!--<![endif]--\x3e"===t.value)return[];const e=[];let a="";return $(t.value,(([e,r])=>{a=`${a}${t.value.slice(e,r)}`}),(([a,r])=>{e.push({ruleId:"comment-only-closing-malformed",idxFrom:t.start,idxTo:t.end,message:"Remove whitespace.",fix:{ranges:[[a+t.start,r+t.start]]}})})),"simple"===t.kind&&"--\x3e"===a||"only"===t.kind&&"<![endif]--\x3e"===a||"not"===t.kind&&"\x3c!--<![endif]--\x3e"===a||e.push({idxFrom:t.start,idxTo:t.end,message:"Malformed closing comment tag.",fix:{ranges:[[t.start,t.end,{simple:"--\x3e",only:"<![endif]--\x3e",not:"\x3c!--<![endif]--\x3e"}[t.kind]]]}}),e}(e)||[]).forEach((e=>{t.report({...e,keepSeparateWhenFixing:!0,ruleId:"comment-closing-malformed"})}))}}}}function Qi(t){return{text:e=>{S(e.value,"\x3c!--",(e=>{t.report({...e,message:"Malformed opening comment tag.",ruleId:"comment-opening-malformed",fix:{ranges:[[e.idxFrom,e.idxTo,"\x3c!--"]]}})}),{stringOffset:e.start})},comment:e=>{if(!e.closing){(function(t){const e={simple:/<!--/g,only:/<!--\[[^\]]+\]>/g,not:/<!--\[[^\]]+\]><!-->/g};if("simple"===t.kind&&e.simple.test(t.value)||"only"===t.kind&&e.only.test(t.value)||"not"===t.kind&&e.not.test(t.value))return[];const a=[];let r="";if("simple"===t.kind&&$(t.value,(([e,a])=>{r=`${r}${t.value.slice(e,a)}`}),(([e,r])=>{a.push({idxFrom:t.start,idxTo:t.end,message:"Remove whitespace.",fix:{ranges:[[e+t.start,r+t.start]]}})})),"simple"===t.kind&&e.simple.test(r)||"only"===t.kind&&e.only.test(r)||"not"===t.kind&&e.not.test(r))return a;let i=!1;if(["only","not"].includes(t.kind)&&S(t.value,"\x3c!--[",(({idxFrom:e,idxTo:r})=>{let s=r;e===t.start&&("{(".includes(t.value[r])&&I(t.value,r,"if",{trimBeforeMatching:!0})&&(i=!0,s+=1),a.push({idxFrom:t.start,idxTo:t.end,message:"Malformed opening comment tag.",fix:{ranges:[[e+t.start,s+t.start,"\x3c!--["]]}}))})),"not"===t.kind)S(t.value,"]>\x3c!--\x3e",(({idxFrom:e,idxTo:r})=>{let s=e;"})".includes(t.value[e-1])&&i&&(s-=1),a.push({idxFrom:t.start,idxTo:t.end,message:"Malformed opening comment tag.",fix:{ranges:[[s+t.start,r+t.start,"]>\x3c!--\x3e"]]}})}));else if("only"===t.kind)for(let e=t.value.length;e--;)if(t.value[e].trim().length&&!">]".includes(t.value[e])){let r=e+1;"})".includes(t.value[e])&&i&&(r-=1),"]>"!==t.value.slice(e+1)&&a.push({idxFrom:t.start,idxTo:t.end,message:"Malformed opening comment tag.",fix:{ranges:[[r+t.start,t.end,"]>"]]}});break}return a}(e)||[]).forEach((e=>{t.report({...e,ruleId:"comment-opening-malformed"})}))}}}}function Zi(t){return{ast(e){a(e,((a,r,i)=>{const s=void 0!==r?r:a;if(H(s)&&"comment"===s.type&&s.closing){const a=y.get(e,V(i.path));H(a)&&"comment"===a.type&&!a.closing&&("not"===a.kind&&"only"===s.kind?t.report({ruleId:"comment-mismatching-pair",keepSeparateWhenFixing:!0,message:'Add "\x3c!--".',idxFrom:s.start,idxTo:s.end,fix:{ranges:[[s.start,s.start,"\x3c!--"]]}}):"only"===a.kind&&"not"===s.kind&&t.report({ruleId:"comment-mismatching-pair",keepSeparateWhenFixing:!0,message:'Remove "\x3c!--".',idxFrom:s.start,idxTo:s.end,fix:{ranges:[[s.start,s.end,"<![endif]--\x3e"]]}}))}return s}))}}}function Ji(t){return{ast(e){const r=[];a(e,((e,a,i)=>{const s=void 0!==a?a:e;return H(s)&&"comment"===s.type&&(r.some((t=>i.path.startsWith(t)))&&t.report({ruleId:"comment-conditional-nested",message:"Don't nest comments.",idxFrom:s.start,idxTo:s.end,fix:null}),s.closing||r.push(i.path)),s}))}}}function Xi(t){let e,a;return{tag(r){"tr"===r.tagName&&Array.isArray(r.children)&&r.children.filter((t=>"tag"===t.type&&"td"===t.tagName&&!t.closing)).length>1&&r.children.some((t=>"tag"===t.type&&"td"===t.tagName&&!t.closing&&Array.isArray(t.attribs)&&t.attribs.some((t=>"style"===t.attribName&&Array.isArray(t.attribValue)&&t.attribValue.some((t=>!("string"!=typeof t.property||!t.property.startsWith("padding-"))&&(e=t.start,a=t.end,!0)))))))&&t.report({ruleId:"email-td-sibling-padding",message:"Don't set padding on TD when sibling TD's are present.",idxFrom:e,idxTo:a,fix:null})}}}function Yi(t,e,a){let r;if(void 0!==t.properties?r=t.properties:void 0!==t.attribValue&&(r=t.attribValue),!r)return;const i=r.filter((t=>void 0!==t.property)),s=i[~-i.length];if("never"!==a&&i&&i.length&&null===s.semi&&s.valueEnds){const t=s.importantEnds||s.valueEnds||s.propertyEnds;e.report({ruleId:"css-trailing-semi",idxFrom:s.start,idxTo:s.end,message:"Add a semicolon.",fix:{ranges:[[t,t,";"]]}})}else if("never"===a&&i&&i.length&&null!==s.semi&&s.valueEnds){const t=s.semi;e.report({ruleId:"css-trailing-semi",idxFrom:s.start,idxTo:s.end,message:"Remove the semicolon.",fix:{ranges:[[t,t+1]]}})}}const ts=(t,e)=>({rule(a){Yi(a,t,e)},attribute(a){Yi(a,t,e)}}),es=t=>({rule(e){Array.isArray(e.properties)&&e.properties.length&&Fi(e,t)}});function as(t,e){let a;if(void 0!==t.properties?a=t.properties:void 0!==t.attribValue&&(a=t.attribValue),a&&(a.filter((t=>void 0!==t.property)).forEach((t=>{t.colon&&t.valueStarts&&(t.valueStarts!==t.colon+2||" "!==e.str[t.colon+1])&&e.report({ruleId:"format-prettier",idxFrom:t.start,idxTo:t.end,message:"Put a space before a value.",fix:{ranges:[[t.colon+1,t.valueStarts," "]]}});const a=t.valueEnds||(t.colon?t.colon+1:null)||t.propertyEnds;t.importantStarts&&a&&(a+1!==t.importantStarts||" "!==e.str[a])&&e.report({ruleId:"format-prettier",idxFrom:t.start,idxTo:t.end,message:"Put a space in front of !imporant.",fix:{ranges:[[a,t.importantStarts," "]]}})})),a.length>1)){let t=!1;for(let r=0,i=a.length;r<i;r++)t&&(void 0!==a[r].property||"comment"===a[r].type&&!a[r].closing||"esp"===a[r].type&&a[r-2]&&void 0!==a[r-2].property)&&"text"===a[r-1].type&&" "!==a[r-1].value?e.report({ruleId:"format-prettier",idxFrom:a[r-1].start,idxTo:a[r-1].end,message:"Put a space in front of !imporant.",fix:{ranges:[[a[r-1].start,a[r-1].end," "]]}}):r&&!["text","esp"].includes(a[r-1].type)&&void 0!==a[r].property&&(a[r].property||a[r].value||a[r].important)&&e.report({ruleId:"format-prettier",idxFrom:a[r].start,idxTo:a[r].end,message:"Put a space in front.",fix:{ranges:[[a[r].start,a[r].start," "]]}}),t||void 0!==a[r].type&&"text"===a[r].type||(t=!0)}}const rs=t=>({rule(e){as(e,t)},attribute(e){as(e,t)}}),is={};function ss(t){return is[t]}d(is,"bad-character-null",(()=>Z)),d(is,"bad-character-start-of-heading",(()=>J)),d(is,"bad-character-start-of-text",(()=>X)),d(is,"bad-character-end-of-text",(()=>Y)),d(is,"bad-character-end-of-transmission",(()=>tt)),d(is,"bad-character-enquiry",(()=>et)),d(is,"bad-character-acknowledge",(()=>at)),d(is,"bad-character-bell",(()=>rt)),d(is,"bad-character-backspace",(()=>it)),d(is,"bad-character-tabulation",(()=>st)),d(is,"bad-character-line-tabulation",(()=>nt)),d(is,"bad-character-form-feed",(()=>ot)),d(is,"bad-character-shift-out",(()=>dt)),d(is,"bad-character-shift-in",(()=>lt)),d(is,"bad-character-data-link-escape",(()=>ct)),d(is,"bad-character-device-control-one",(()=>ut)),d(is,"bad-character-device-control-two",(()=>bt)),d(is,"bad-character-device-control-three",(()=>mt)),d(is,"bad-character-device-control-four",(()=>ht)),d(is,"bad-character-negative-acknowledge",(()=>ft)),d(is,"bad-character-synchronous-idle",(()=>pt)),d(is,"bad-character-end-of-transmission-block",(()=>gt)),d(is,"bad-character-cancel",(()=>xt)),d(is,"bad-character-end-of-medium",(()=>vt)),d(is,"bad-character-substitute",(()=>At)),d(is,"bad-character-escape",(()=>Nt)),d(is,"bad-character-information-separator-four",(()=>Tt)),d(is,"bad-character-information-separator-three",(()=>Et)),d(is,"bad-character-information-separator-two",(()=>St)),d(is,"bad-character-information-separator-one",(()=>It)),d(is,"bad-character-delete",(()=>Vt)),d(is,"bad-character-control-0080",(()=>yt)),d(is,"bad-character-control-0081",(()=>Ft)),d(is,"bad-character-break-permitted-here",(()=>wt)),d(is,"bad-character-no-break-here",(()=>Ct)),d(is,"bad-character-control-0084",(()=>Rt)),d(is,"bad-character-next-line",(()=>Ot)),d(is,"bad-character-start-of-selected-area",(()=>$t)),d(is,"bad-character-end-of-selected-area",(()=>kt)),d(is,"bad-character-character-tabulation-set",(()=>Bt)),d(is,"bad-character-character-tabulation-with-justification",(()=>Lt)),d(is,"bad-character-line-tabulation-set",(()=>Mt)),d(is,"bad-character-partial-line-forward",(()=>jt)),d(is,"bad-character-partial-line-backward",(()=>Kt)),d(is,"bad-character-reverse-line-feed",(()=>Pt)),d(is,"bad-character-single-shift-two",(()=>Ut)),d(is,"bad-character-single-shift-three",(()=>_t)),d(is,"bad-character-device-control-string",(()=>Gt)),d(is,"bad-character-private-use-1",(()=>qt)),d(is,"bad-character-private-use-2",(()=>Wt)),d(is,"bad-character-set-transmit-state",(()=>Dt)),d(is,"bad-character-cancel-character",(()=>Ht)),d(is,"bad-character-message-waiting",(()=>zt)),d(is,"bad-character-start-of-protected-area",(()=>Qt)),d(is,"bad-character-end-of-protected-area",(()=>Zt)),d(is,"bad-character-start-of-string",(()=>Jt)),d(is,"bad-character-control-0099",(()=>Xt)),d(is,"bad-character-single-character-introducer",(()=>Yt)),d(is,"bad-character-control-sequence-introducer",(()=>te)),d(is,"bad-character-string-terminator",(()=>ee)),d(is,"bad-character-operating-system-command",(()=>ae)),d(is,"bad-character-private-message",(()=>re)),d(is,"bad-character-application-program-command",(()=>ie)),d(is,"bad-character-soft-hyphen",(()=>se)),d(is,"bad-character-non-breaking-space",(()=>ne)),d(is,"bad-character-ogham-space-mark",(()=>oe)),d(is,"bad-character-en-quad",(()=>de)),d(is,"bad-character-em-quad",(()=>le)),d(is,"bad-character-en-space",(()=>ce)),d(is,"bad-character-em-space",(()=>ue)),d(is,"bad-character-three-per-em-space",(()=>be)),d(is,"bad-character-four-per-em-space",(()=>me)),d(is,"bad-character-six-per-em-space",(()=>he)),d(is,"bad-character-figure-space",(()=>fe)),d(is,"bad-character-punctuation-space",(()=>pe)),d(is,"bad-character-thin-space",(()=>ge)),d(is,"bad-character-hair-space",(()=>xe)),d(is,"bad-character-zero-width-space",(()=>ve)),d(is,"bad-character-zero-width-non-joiner",(()=>Ae)),d(is,"bad-character-zero-width-joiner",(()=>Ne)),d(is,"bad-character-left-to-right-mark",(()=>Te)),d(is,"bad-character-right-to-left-mark",(()=>Ee)),d(is,"bad-character-left-to-right-embedding",(()=>Se)),d(is,"bad-character-right-to-left-embedding",(()=>Ie)),d(is,"bad-character-pop-directional-formatting",(()=>Ve)),d(is,"bad-character-left-to-right-override",(()=>ye)),d(is,"bad-character-right-to-left-override",(()=>Fe)),d(is,"bad-character-word-joiner",(()=>we)),d(is,"bad-character-function-application",(()=>Ce)),d(is,"bad-character-invisible-times",(()=>Re)),d(is,"bad-character-invisible-separator",(()=>Oe)),d(is,"bad-character-invisible-plus",(()=>$e)),d(is,"bad-character-left-to-right-isolate",(()=>ke)),d(is,"bad-character-right-to-left-isolate",(()=>Be)),d(is,"bad-character-first-strong-isolate",(()=>Le)),d(is,"bad-character-pop-directional-isolate",(()=>Me)),d(is,"bad-character-inhibit-symmetric-swapping",(()=>je)),d(is,"bad-character-activate-symmetric-swapping",(()=>Ke)),d(is,"bad-character-inhibit-arabic-form-shaping",(()=>Pe)),d(is,"bad-character-activate-arabic-form-shaping",(()=>Ue)),d(is,"bad-character-national-digit-shapes",(()=>_e)),d(is,"bad-character-nominal-digit-shapes",(()=>Ge)),d(is,"bad-character-zero-width-no-break-space",(()=>qe)),d(is,"bad-character-interlinear-annotation-anchor",(()=>We)),d(is,"bad-character-interlinear-annotation-separator",(()=>De)),d(is,"bad-character-interlinear-annotation-terminator",(()=>He)),d(is,"bad-character-line-separator",(()=>ze)),d(is,"bad-character-paragraph-separator",(()=>Qe)),d(is,"bad-character-narrow-no-break-space",(()=>Ze)),d(is,"bad-character-medium-mathematical-space",(()=>Je)),d(is,"bad-character-ideographic-space",(()=>Xe)),d(is,"bad-character-replacement-character",(()=>Ye)),d(is,"tag-space-after-opening-bracket",(()=>ta)),d(is,"tag-space-before-closing-bracket",(()=>ea)),d(is,"tag-space-between-slash-and-bracket",(()=>aa)),d(is,"tag-table",(()=>ra)),d(is,"tag-malformed",(()=>ia)),d(is,"tag-closing-backslash",(()=>sa)),d(is,"tag-void-slash",(()=>na)),d(is,"tag-name-case",(()=>oa)),d(is,"tag-is-present",(()=>da)),d(is,"tag-bold",(()=>la)),d(is,"tag-bad-self-closing",(()=>ca)),d(is,"attribute-duplicate",(()=>ua)),d(is,"attribute-malformed",(()=>ba)),d(is,"attribute-on-closing-tag",(()=>ma)),d(is,"attribute-enforce-img-alt",(()=>ha)),d(is,"attribute-validate-abbr",(()=>fa)),d(is,"attribute-validate-accept-charset",(()=>Ta)),d(is,"attribute-validate-accept",(()=>Ea)),d(is,"attribute-validate-accesskey",(()=>Sa)),d(is,"attribute-validate-action",(()=>Fa)),d(is,"attribute-validate-align",(()=>wa)),d(is,"attribute-validate-alink",(()=>Oa)),d(is,"attribute-validate-alt",(()=>$a)),d(is,"attribute-validate-archive",(()=>ka)),d(is,"attribute-validate-axis",(()=>Ba)),d(is,"attribute-validate-background",(()=>La)),d(is,"attribute-validate-bgcolor",(()=>Ma)),d(is,"attribute-validate-border",(()=>Ua)),d(is,"attribute-validate-cellpadding",(()=>_a)),d(is,"attribute-validate-cellspacing",(()=>Ga)),d(is,"attribute-validate-char",(()=>qa)),d(is,"attribute-validate-charoff",(()=>Wa)),d(is,"attribute-validate-charset",(()=>Da)),d(is,"attribute-validate-checked",(()=>za)),d(is,"attribute-validate-cite",(()=>Qa)),d(is,"attribute-validate-class",(()=>Ja)),d(is,"attribute-validate-classid",(()=>Xa)),d(is,"attribute-validate-clear",(()=>Ya)),d(is,"attribute-validate-code",(()=>tr)),d(is,"attribute-validate-codebase",(()=>er)),d(is,"attribute-validate-codetype",(()=>ar)),d(is,"attribute-validate-color",(()=>rr)),d(is,"attribute-validate-cols",(()=>ir)),d(is,"attribute-validate-colspan",(()=>sr)),d(is,"attribute-validate-compact",(()=>nr)),d(is,"attribute-validate-content",(()=>or)),d(is,"attribute-validate-coords",(()=>dr)),d(is,"attribute-validate-data",(()=>lr)),d(is,"attribute-validate-datetime",(()=>cr)),d(is,"attribute-validate-declare",(()=>ur)),d(is,"attribute-validate-defer",(()=>br)),d(is,"attribute-validate-dir",(()=>mr)),d(is,"attribute-validate-disabled",(()=>hr)),d(is,"attribute-validate-enctype",(()=>fr)),d(is,"attribute-validate-face",(()=>pr)),d(is,"attribute-validate-for",(()=>gr)),d(is,"attribute-validate-frame",(()=>xr)),d(is,"attribute-validate-frameborder",(()=>vr)),d(is,"attribute-validate-headers",(()=>Ar)),d(is,"attribute-validate-height",(()=>Nr)),d(is,"attribute-validate-href",(()=>Tr)),d(is,"attribute-validate-hreflang",(()=>Er)),d(is,"attribute-validate-hspace",(()=>Sr)),d(is,"attribute-validate-http-equiv",(()=>Ir)),d(is,"attribute-validate-id",(()=>Vr)),d(is,"attribute-validate-ismap",(()=>yr)),d(is,"attribute-validate-label",(()=>Fr)),d(is,"attribute-validate-lang",(()=>wr)),d(is,"attribute-validate-language",(()=>Cr)),d(is,"attribute-validate-link",(()=>Rr)),d(is,"attribute-validate-longdesc",(()=>Or)),d(is,"attribute-validate-marginheight",(()=>$r)),d(is,"attribute-validate-marginwidth",(()=>kr)),d(is,"attribute-validate-maxlength",(()=>Br)),d(is,"attribute-validate-media",(()=>Lr)),d(is,"attribute-validate-method",(()=>Mr)),d(is,"attribute-validate-multiple",(()=>jr)),d(is,"attribute-validate-name",(()=>Kr)),d(is,"attribute-validate-nohref",(()=>Pr)),d(is,"attribute-validate-noresize",(()=>Ur)),d(is,"attribute-validate-noshade",(()=>_r)),d(is,"attribute-validate-nowrap",(()=>Gr)),d(is,"attribute-validate-object",(()=>qr)),d(is,"attribute-validate-onblur",(()=>Dr)),d(is,"attribute-validate-onchange",(()=>Hr)),d(is,"attribute-validate-onclick",(()=>zr)),d(is,"attribute-validate-ondblclick",(()=>Qr)),d(is,"attribute-validate-onfocus",(()=>Zr)),d(is,"attribute-validate-onkeydown",(()=>Jr)),d(is,"attribute-validate-onkeypress",(()=>Xr)),d(is,"attribute-validate-onkeyup",(()=>Yr)),d(is,"attribute-validate-onload",(()=>ti)),d(is,"attribute-validate-onmousedown",(()=>ei)),d(is,"attribute-validate-onmousemove",(()=>ai)),d(is,"attribute-validate-onmouseout",(()=>ri)),d(is,"attribute-validate-onmouseover",(()=>ii)),d(is,"attribute-validate-onmouseup",(()=>si)),d(is,"attribute-validate-onreset",(()=>ni)),d(is,"attribute-validate-onsubmit",(()=>oi)),d(is,"attribute-validate-onselect",(()=>di)),d(is,"attribute-validate-onunload",(()=>li)),d(is,"attribute-validate-profile",(()=>ci)),d(is,"attribute-validate-prompt",(()=>ui)),d(is,"attribute-validate-readonly",(()=>bi)),d(is,"attribute-validate-rel",(()=>mi)),d(is,"attribute-validate-rev",(()=>hi)),d(is,"attribute-validate-rows",(()=>fi)),d(is,"attribute-validate-rowspan",(()=>pi)),d(is,"attribute-validate-rules",(()=>gi)),d(is,"attribute-validate-scheme",(()=>xi)),d(is,"attribute-validate-scope",(()=>vi)),d(is,"attribute-validate-scrolling",(()=>Ai)),d(is,"attribute-validate-selected",(()=>Ni)),d(is,"attribute-validate-shape",(()=>Ti)),d(is,"attribute-validate-size",(()=>Ei)),d(is,"attribute-validate-span",(()=>Si)),d(is,"attribute-validate-src",(()=>Ii)),d(is,"attribute-validate-standby",(()=>Vi)),d(is,"attribute-validate-start",(()=>yi)),d(is,"attribute-validate-style",(()=>wi)),d(is,"attribute-validate-summary",(()=>Ci)),d(is,"attribute-validate-tabindex",(()=>Ri)),d(is,"attribute-validate-target",(()=>Oi)),d(is,"attribute-validate-text",(()=>$i)),d(is,"attribute-validate-title",(()=>ki)),d(is,"attribute-validate-type",(()=>Bi)),d(is,"attribute-validate-usemap",(()=>Li)),d(is,"attribute-validate-valign",(()=>Mi)),d(is,"attribute-validate-value",(()=>ji)),d(is,"attribute-validate-valuetype",(()=>Ki)),d(is,"attribute-validate-version",(()=>Pi)),d(is,"attribute-validate-vlink",(()=>Ui)),d(is,"attribute-validate-vspace",(()=>_i)),d(is,"attribute-validate-width",(()=>Gi)),d(is,"bad-named-html-entity-not-email-friendly",(()=>qi)),d(is,"character-encode",(()=>Wi)),d(is,"character-unspaced-punctuation",(()=>Di)),d(is,"media-malformed",(()=>Hi)),d(is,"comment-closing-malformed",(()=>zi)),d(is,"comment-opening-malformed",(()=>Qi)),d(is,"comment-mismatching-pair",(()=>Zi)),d(is,"comment-conditional-nested",(()=>Ji)),d(is,"email-td-sibling-padding",(()=>Xi)),d(is,"css-trailing-semi",(()=>ts)),d(is,"css-rule-malformed",(()=>es)),d(is,"format-prettier",(()=>rs)),t.defaultMaxListeners=0;class ns extends t{constructor(){super(),this.messages=[],this.str="",this.strLineStartIndexes=[],this.config={},this.hasBeenCalledWithKeepSeparateWhenFixing=!1,this.processedRulesConfig={}}verify(t,i){this.messages=[],this.str=t,this.strLineStartIndexes=r(t),this.config=s(i),this.hasBeenCalledWithKeepSeparateWhenFixing=!1,this.processedRulesConfig={};const d=Object.prototype.hasOwnProperty;if(!i)return[];if("object"!=typeof i)throw new Error(`emlint/verify(): [THROW_ID_01] second input argument, config is not a plain object but ${typeof i}. It's equal to:\n${JSON.stringify(i,null,4)}`);if(!Object.keys(i).length)return[];if(!i.rules||"object"!=typeof i.rules)throw new Error(`emlint/verify(): [THROW_ID_02] config contains no rules! It was given as:\n${JSON.stringify(i,null,4)}`);const l=function(t){const e={};if(Object.keys(t).includes("all")&&D(t.all))Object.keys(is).forEach((a=>{e[a]=t.all}));else{let a;Object.keys(t).some((t=>!!["bad-character","bad-character*","bad-character-*"].includes(t)&&(a=t,!0)))&&F.forEach((r=>{e[r]=t[a]})),Object.keys(t).some((t=>!!["tag","tag*","tag-*"].includes(t)&&(a=t,!0)))&&w.forEach((r=>{e[r]=t[a]})),Object.keys(t).some((t=>!!["attribute","attribute*","attribute-*"].includes(t)&&(a=t,!0)))&&C.forEach((r=>{e[r]=t[a]})),Object.keys(t).some((t=>!!["css","css*","css-*"].includes(t)&&(a=t,!0)))&&R.forEach((r=>{e[r]=t[a]})),Object.keys(t).includes("bad-html-entity")&&O.forEach((a=>{e[a]=t["bad-html-entity"]})),Object.keys(t).forEach((a=>{["all","tag","tag*","tag-*","attribute","attribute*","attribute-*","bad-character","bad-character","bad-character*","bad-character-*","bad-html-entity"].includes(a)||(Object.keys(is).includes(a)?e[a]=s(t[a]):a.includes("*")&&Object.keys(is).forEach((r=>{o.isMatch(r,a)&&(e[r]=s(t[a]))})))}))}return e}(i.rules);this.processedRulesConfig=l,Object.keys(l).filter((t=>ss(t))).filter((t=>"number"==typeof l[t]?l[t]>0:!!Array.isArray(l[t])&&l[t][0]>0)).forEach((t=>{let e;e=Array.isArray(l[t])&&l[t].length>1?ss(t)(this,...l[t].slice(1)):ss(t)(this),Object.keys(e).forEach((t=>{this.on(t,((...a)=>{e[t](...a)}))}))})),this.emit("ast",a(n(t,{charCb:t=>{this.emit("character",t)},errCb:t=>{const e=z(i.rules,t.ruleId);if(e){let a="Something is wrong.";H(t)&&"string"==typeof t.ruleId&&d.call(q,t.ruleId)&&(a=q[t.ruleId]),this.report({message:a,severity:e,fix:null,...t})}}}),((t,e,a)=>{const r=void 0!==e?e:t;return!H(r)||a.parentKey&&a.parentKey.startsWith("attrib")||(this.emit(r.type,r),"tag"===r.type&&Array.isArray(r.attribs)&&r.attribs.length&&r.attribs.forEach((t=>{this.emit("attribute",{...t,parent:{...r}})}))),r}))),Object.keys(i.rules).some((t=>("all"===t||"bad-html-entity"===t||t.startsWith("bad-html-entity")||t.startsWith("bad-named-html-entity")||o.isMatch(["bad-malformed-numeric-character-entity"],t))&&(D(i.rules[t])||D(l[t]))))&&e(t,{cb:t=>{let e,a="";if(Object.keys(i.rules).includes("bad-html-entity")?"bad-named-html-entity-unrecognised"===t.ruleName?e=1:Array.isArray(i.rules["bad-html-entity"])?e=i.rules["bad-html-entity"][0]:Number.isInteger(i.rules["bad-html-entity"])&&(e=i.rules["bad-html-entity"]):Object.keys(i.rules).some((e=>!!o.isMatch(t.ruleName,e)&&(a=e,!0)))&&("bad-named-html-entity-unrecognised"===t.ruleName&&void 0===i.rules["bad-named-html-entity-unrecognised"]?e=1:Array.isArray(i.rules[a])?e=i.rules[a][0]:Number.isInteger(i.rules[a])&&(e=i.rules[a])),Number.isInteger(e)){let a;a="bad-named-html-entity-malformed-nbsp"===t.ruleName?"Malformed NBSP entity.":"bad-named-html-entity-unrecognised"===t.ruleName?"Unrecognised named entity.":"bad-named-html-entity-multiple-encoding"===t.ruleName?"HTML entity encoding over and over.":"bad-malformed-numeric-character-entity"===t.ruleName?"Malformed numeric entity.":`Malformed ${t.entityName?t.entityName:"named"} entity.`;let r=[[t.rangeFrom,t.rangeTo,t.rangeValEncoded?t.rangeValEncoded:""]];"bad-named-html-entity-unrecognised"===t.ruleName&&(r=[]),this.report({severity:e,ruleId:t.ruleName,message:a,idxFrom:t.rangeFrom,idxTo:t.rangeTo,fix:{ranges:r}})}},entityCatcherCb:(t,e)=>{this.emit("entity",{idxFrom:t,idxTo:e})}});return["tag","at","rule","text","esp","character","attribute","ast","comment","entity"].forEach((t=>{this.removeAllListeners(t)})),s(this.messages)}report(t){const{line:e,col:a}=i(this.strLineStartIndexes,t.idxFrom,!0);let r=t.severity||0;Number.isInteger(t.severity)||"number"!=typeof this.processedRulesConfig[t.ruleId]?!Number.isInteger(t.severity)&&Array.isArray(this.processedRulesConfig[t.ruleId])&&(r=this.processedRulesConfig[t.ruleId][0]):r=this.processedRulesConfig[t.ruleId],this.messages.push({fix:null,keepSeparateWhenFixing:!1,line:e,column:a,severity:r,...t,...this.hasBeenCalledWithKeepSeparateWhenFixing?{fix:null}:{}}),t.keepSeparateWhenFixing&&!this.hasBeenCalledWithKeepSeparateWhenFixing&&t.fix&&(this.hasBeenCalledWithKeepSeparateWhenFixing=!0)}}const os="4.4.0";export{ns as Linter,Q as util,os as version};
